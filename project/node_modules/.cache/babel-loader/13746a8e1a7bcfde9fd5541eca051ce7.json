{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/NikitaMac/Desktop/Modern Web Development/Homework/modern-web-development-project/project/src/Components/Comments/Comment.js\";\n\nimport CommentForm from \"./CommentForm\";\nimport React from \"react\";\n\nvar Comment = function Comment(_ref) {\n  var comment = _ref.comment,\n      replies = _ref.replies,\n      setActiveComment = _ref.setActiveComment,\n      activeComment = _ref.activeComment,\n      updateComment = _ref.updateComment,\n      deleteComment = _ref.deleteComment,\n      addComment = _ref.addComment,\n      _ref$parentId = _ref.parentId,\n      parentId = _ref$parentId === void 0 ? null : _ref$parentId,\n      currentUserId = _ref.currentUserId;\n  console.log(comment);\n  var isEditing = activeComment && activeComment.id === comment.id && activeComment.type === \"editing\";\n  var isReplying = activeComment && activeComment.id === comment.id && activeComment.type === \"replying\";\n  var fiveMinutes = 300000;\n  var timePassed = new Date() - new Date(comment.createdAt) > fiveMinutes;\n  var canDelete = currentUserId === comment.userId && replies.length === 0 && !timePassed;\n  var canReply = Boolean(currentUserId);\n  var canEdit = currentUserId === comment.userId && !timePassed;\n  var replyId = parentId ? parentId : comment.id;\n  var createdAt = new Date(comment.createdAt).toLocaleDateString();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    key: comment.id,\n    className: \"comment\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-right-part\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-author\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 11\n    }\n  }, comment.username), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }\n  }, createdAt)), !isEditing && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 24\n    }\n  }, comment.body), isEditing && /*#__PURE__*/React.createElement(CommentForm, {\n    submitLabel: \"Update\",\n    hasCancelButton: true,\n    initialText: comment.attributes.body,\n    handleSubmit: function handleSubmit(text) {\n      return updateComment(text, comment.id);\n    },\n    handleCancel: function handleCancel() {\n      setActiveComment(null);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-actions\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, canReply && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-action\",\n    onClick: function onClick() {\n      return setActiveComment({\n        id: comment.id,\n        type: \"replying\"\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, \"Reply\"), canEdit && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-action\",\n    onClick: function onClick() {\n      return setActiveComment({\n        id: comment.id,\n        type: \"editing\"\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, \"Edit\"), canDelete && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-action\",\n    onClick: function onClick() {\n      return deleteComment(comment.id);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, \"Delete\")), isReplying && /*#__PURE__*/React.createElement(CommentForm, {\n    submitLabel: \"Reply\",\n    handleSubmit: function handleSubmit(text) {\n      return addComment(text, replyId);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }), replies.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"replies\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, replies.map(function (reply) {\n    return /*#__PURE__*/React.createElement(Comment, {\n      comment: reply,\n      key: reply.id,\n      setActiveComment: setActiveComment,\n      activeComment: activeComment,\n      updateComment: updateComment,\n      deleteComment: deleteComment,\n      addComment: addComment,\n      parentId: comment.id,\n      replies: [],\n      currentUserId: currentUserId,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 15\n      }\n    });\n  }))));\n};\n\nexport default Comment;","map":{"version":3,"names":["CommentForm","React","Comment","comment","replies","setActiveComment","activeComment","updateComment","deleteComment","addComment","parentId","currentUserId","console","log","isEditing","id","type","isReplying","fiveMinutes","timePassed","Date","createdAt","canDelete","userId","length","canReply","Boolean","canEdit","replyId","toLocaleDateString","username","body","attributes","text","map","reply"],"sources":["/Users/NikitaMac/Desktop/Modern Web Development/Homework/modern-web-development-project/project/src/Components/Comments/Comment.js"],"sourcesContent":["import CommentForm from \"./CommentForm\";\nimport React from \"react\";\n\nconst Comment = ({\n  comment,\n  replies,\n  setActiveComment,\n  activeComment,\n  updateComment,\n  deleteComment,\n  addComment,\n  parentId = null,\n  currentUserId,\n}) => {\n\n  console.log(comment);\n\n  const isEditing =\n    activeComment &&\n    activeComment.id === comment.id &&\n    activeComment.type === \"editing\";\n\n  const isReplying =\n    activeComment &&\n    activeComment.id === comment.id &&\n    activeComment.type === \"replying\";\n\n  const fiveMinutes = 300000;\n\n  const timePassed = new Date() - new Date(comment.createdAt) > fiveMinutes;\n\n  const canDelete = currentUserId === comment.userId && replies.length === 0 && !timePassed;\n\n  const canReply = Boolean(currentUserId);\n\n  const canEdit = currentUserId === comment.userId && !timePassed;\n\n  const replyId = parentId ? parentId : comment.id;\n\n  const createdAt = new Date(comment.createdAt).toLocaleDateString();\n\n  return (\n    <div key={comment.id} className=\"comment\">\n      <div className=\"comment-right-part\">\n        <div className=\"comment-content\">\n          <div className=\"comment-author\">{comment.username}</div>\n          <div>{createdAt}</div>\n        </div>\n        {!isEditing && <div className=\"comment-text\">{comment.body}</div>}\n        {isEditing && (\n          <CommentForm\n            submitLabel=\"Update\"\n            hasCancelButton\n            initialText={comment.attributes.body}\n            handleSubmit={(text) => updateComment(text, comment.id)}\n            handleCancel={() => {\n              setActiveComment(null);\n            }}\n          />\n        )}\n        <div className=\"comment-actions\">\n          {canReply && (\n            <div\n              className=\"comment-action\"\n              onClick={() =>\n                setActiveComment({ id: comment.id, type: \"replying\" })\n              }\n            >\n              Reply\n            </div>\n          )}\n          {canEdit && (\n            <div\n              className=\"comment-action\"\n              onClick={() =>\n                setActiveComment({ id: comment.id, type: \"editing\" })\n              }\n            >\n              Edit\n            </div>\n          )}\n          {canDelete && (\n            <div\n              className=\"comment-action\"\n              onClick={() => deleteComment(comment.id)}\n            >\n              Delete\n            </div>\n          )}\n        </div>\n        {isReplying && (\n          <CommentForm\n            submitLabel=\"Reply\"\n            handleSubmit={(text) => addComment(text, replyId)}\n          />\n        )}\n        {replies.length > 0 && (\n          <div className=\"replies\">\n            {replies.map((reply) => (\n              <Comment\n                comment={reply}\n                key={reply.id}\n                setActiveComment={setActiveComment}\n                activeComment={activeComment}\n                updateComment={updateComment}\n                deleteComment={deleteComment}\n                addComment={addComment}\n                parentId={comment.id}\n                replies={[]}\n                currentUserId={currentUserId}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Comment;"],"mappings":"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"},"metadata":{},"sourceType":"module"}