{"ast":null,"code":"/**\r\n * Work around Safari 14 IndexedDB open bug.\r\n *\r\n * Safari has a horrible bug where IDB requests can hang while the browser is starting up. https://bugs.webkit.org/show_bug.cgi?id=226547\r\n * The only solution is to keep nudging it until it's awake.\r\n */\nfunction idbReady() {\n  var isSafari = !navigator.userAgentData && /Safari\\//.test(navigator.userAgent) && !/Chrom(e|ium)\\//.test(navigator.userAgent); // No point putting other browsers or older versions of Safari through this mess.\n\n  if (!isSafari || !indexedDB.databases) return Promise.resolve();\n  var intervalId;\n  return new Promise(function (resolve) {\n    var tryIdb = function () {\n      return indexedDB.databases().finally(resolve);\n    };\n\n    intervalId = setInterval(tryIdb, 100);\n    tryIdb();\n  }).finally(function () {\n    return clearInterval(intervalId);\n  });\n}\n\nexport default idbReady;","map":{"version":3,"names":["idbReady","isSafari","navigator","userAgentData","test","userAgent","indexedDB","databases","Promise","resolve","intervalId","tryIdb","finally","setInterval","clearInterval"],"sources":["C:/Users/brosk/Documents/Web Dev/modern-web-development-project/project/node_modules/safari-14-idb-fix/dist/index.js"],"sourcesContent":["/**\r\n * Work around Safari 14 IndexedDB open bug.\r\n *\r\n * Safari has a horrible bug where IDB requests can hang while the browser is starting up. https://bugs.webkit.org/show_bug.cgi?id=226547\r\n * The only solution is to keep nudging it until it's awake.\r\n */\r\nfunction idbReady() {\r\n    var isSafari = !navigator.userAgentData &&\r\n        /Safari\\//.test(navigator.userAgent) &&\r\n        !/Chrom(e|ium)\\//.test(navigator.userAgent);\r\n    // No point putting other browsers or older versions of Safari through this mess.\r\n    if (!isSafari || !indexedDB.databases)\r\n        return Promise.resolve();\r\n    var intervalId;\r\n    return new Promise(function (resolve) {\r\n        var tryIdb = function () { return indexedDB.databases().finally(resolve); };\r\n        intervalId = setInterval(tryIdb, 100);\r\n        tryIdb();\r\n    }).finally(function () { return clearInterval(intervalId); });\r\n}\r\n\r\nexport default idbReady;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,QAAT,GAAoB;EAChB,IAAIC,QAAQ,GAAG,CAACC,SAAS,CAACC,aAAX,IACX,WAAWC,IAAX,CAAgBF,SAAS,CAACG,SAA1B,CADW,IAEX,CAAC,iBAAiBD,IAAjB,CAAsBF,SAAS,CAACG,SAAhC,CAFL,CADgB,CAIhB;;EACA,IAAI,CAACJ,QAAD,IAAa,CAACK,SAAS,CAACC,SAA5B,EACI,OAAOC,OAAO,CAACC,OAAR,EAAP;EACJ,IAAIC,UAAJ;EACA,OAAO,IAAIF,OAAJ,CAAY,UAAUC,OAAV,EAAmB;IAClC,IAAIE,MAAM,GAAG,YAAY;MAAE,OAAOL,SAAS,CAACC,SAAV,GAAsBK,OAAtB,CAA8BH,OAA9B,CAAP;IAAgD,CAA3E;;IACAC,UAAU,GAAGG,WAAW,CAACF,MAAD,EAAS,GAAT,CAAxB;IACAA,MAAM;EACT,CAJM,EAIJC,OAJI,CAII,YAAY;IAAE,OAAOE,aAAa,CAACJ,UAAD,CAApB;EAAmC,CAJrD,CAAP;AAKH;;AAED,eAAeV,QAAf"},"metadata":{},"sourceType":"module"}