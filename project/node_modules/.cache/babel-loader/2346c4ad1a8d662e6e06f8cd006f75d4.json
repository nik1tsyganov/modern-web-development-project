{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/NikitaMac/Desktop/Modern Web Development/Homework/modern-web-development-project/html/src/Components/Comments/Comment.js\";\n\nimport CommentForm from \"./CommentForm\";\nimport React from \"react\";\n\nvar Comment = function Comment(_ref) {\n  var comment = _ref.comment,\n      replies = _ref.replies,\n      getReplies = _ref.getReplies,\n      setActiveComment = _ref.setActiveComment,\n      activeComment = _ref.activeComment,\n      currentUser = _ref.currentUser,\n      updateComment = _ref.updateComment,\n      deleteComment = _ref.deleteComment,\n      addComment = _ref.addComment,\n      _ref$parentId = _ref.parentId,\n      parentId = _ref$parentId === void 0 ? null : _ref$parentId,\n      _ref$usersForMention = _ref.usersForMention,\n      usersForMention = _ref$usersForMention === void 0 ? [] : _ref$usersForMention,\n      currentUserId = _ref.currentUserId;\n  var isEditing = activeComment && activeComment.id === comment.id && activeComment.type === \"editing\";\n  var isReplying = activeComment && activeComment.id === comment.id && activeComment.type === \"replying\";\n  var canDelete = currentUserId === comment.attributes.userId && replies.length === 0;\n  var canReply = Boolean(currentUserId);\n  var canEdit = currentUserId === comment.attributes.userId;\n  var replyId = parentId ? parentId : comment.id;\n  var createdAt = new Date(comment.attributes.createdAt).toLocaleDateString();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    key: comment.id,\n    className: \"comment\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-right-part\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-author\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 11\n    }\n  }, comment.attributes.username), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }\n  }, createdAt)), !isEditing && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 24\n    }\n  }, comment.attributes.body), isEditing && /*#__PURE__*/React.createElement(CommentForm, {\n    submitLabel: \"Update\",\n    hasCancelButton: true,\n    initialText: comment.attributes.body,\n    handleSubmit: function handleSubmit(text) {\n      return updateComment(comment.id, text);\n    },\n    handleCancel: function handleCancel() {\n      setActiveComment(null);\n    },\n    usersForMention: usersForMention,\n    currentUser: currentUser,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-actions\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, canReply && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-action\",\n    onClick: function onClick() {\n      return setActiveComment({\n        id: comment.id,\n        type: \"replying\"\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, \"Reply\"), canEdit && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-action\",\n    onClick: function onClick() {\n      return setActiveComment({\n        id: comment.id,\n        type: \"editing\"\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, \"Edit\"), canDelete && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-action\",\n    onClick: function onClick() {\n      return deleteComment(comment.id);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, \"Delete\")), isReplying && /*#__PURE__*/React.createElement(CommentForm, {\n    submitLabel: \"Reply\",\n    handleSubmit: function handleSubmit(text) {\n      addComment(text, currentUser.id, replyId, currentUser.attributes.username);\n    },\n    usersForMention: usersForMention,\n    currentUser: currentUser,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }), replies.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"replies\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, replies.map(function (reply) {\n    return /*#__PURE__*/React.createElement(Comment, {\n      comment: reply,\n      key: reply.id,\n      setActiveComment: setActiveComment,\n      activeComment: activeComment,\n      currentUser: currentUser,\n      updateComment: updateComment,\n      deleteComment: deleteComment,\n      addComment: addComment,\n      parentId: reply.id,\n      getReplies: getReplies,\n      replies: getReplies(reply.id),\n      currentUserId: currentUserId,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }\n    });\n  }))));\n};\n\nexport default Comment;","map":{"version":3,"names":["CommentForm","React","Comment","comment","replies","getReplies","setActiveComment","activeComment","currentUser","updateComment","deleteComment","addComment","parentId","usersForMention","currentUserId","isEditing","id","type","isReplying","canDelete","attributes","userId","length","canReply","Boolean","canEdit","replyId","createdAt","Date","toLocaleDateString","username","body","text","map","reply"],"sources":["/Users/NikitaMac/Desktop/Modern Web Development/Homework/modern-web-development-project/html/src/Components/Comments/Comment.js"],"sourcesContent":["import CommentForm from \"./CommentForm\";\nimport React from \"react\";\n\nconst Comment = ({\n  comment,\n  replies,\n  getReplies,\n  setActiveComment,\n  activeComment,\n  currentUser,\n  updateComment,\n  deleteComment,\n  addComment,\n  parentId = null,\n  usersForMention = [],\n  currentUserId\n}) => {\n\n  const isEditing =\n    activeComment &&\n    activeComment.id === comment.id &&\n    activeComment.type === \"editing\";\n\n  const isReplying =\n    activeComment &&\n    activeComment.id === comment.id &&\n    activeComment.type === \"replying\";\n\n  const canDelete = currentUserId === comment.attributes.userId && replies.length === 0;\n\n  const canReply = Boolean(currentUserId);\n\n  const canEdit = currentUserId === comment.attributes.userId;\n\n  const replyId = parentId ? parentId : comment.id;\n\n  const createdAt = new Date(comment.attributes.createdAt).toLocaleDateString();\n\n  return (\n    <div key={comment.id} className=\"comment\">\n      <div className=\"comment-right-part\">\n        <div className=\"comment-content\">\n          <div className=\"comment-author\">{comment.attributes.username}</div>\n          <div>{createdAt}</div>\n        </div>\n\n        {!isEditing && <div className=\"comment-text\">{comment.attributes.body}</div>}\n        \n        {isEditing && (\n          <CommentForm\n            submitLabel=\"Update\"\n            hasCancelButton\n            initialText={comment.attributes.body}\n            handleSubmit={(text) => updateComment(comment.id, text)}\n            handleCancel={() => {\n              setActiveComment(null);\n            }}\n            usersForMention={usersForMention}\n            currentUser={currentUser}\n          />\n        )}\n        <div className=\"comment-actions\">\n          {canReply && (\n            <div\n              className=\"comment-action\"\n              onClick={() =>\n                setActiveComment({ id: comment.id, type: \"replying\" })\n              }\n            >\n              Reply\n            </div>\n          )}\n          {canEdit && (\n            <div\n              className=\"comment-action\"\n              onClick={() =>\n                setActiveComment({ id: comment.id, type: \"editing\" })\n              }\n            >\n              Edit\n            </div>\n          )}\n          {canDelete && (\n            <div\n              className=\"comment-action\"\n              onClick={() => deleteComment(comment.id)}\n            >\n              Delete\n            </div>\n          )}\n        </div>\n        {isReplying && (\n          <CommentForm\n            submitLabel=\"Reply\"\n            handleSubmit={(text) => {addComment(text, currentUser.id, replyId, currentUser.attributes.username)}}\n            usersForMention={usersForMention}\n            currentUser={currentUser}\n          />\n        )}\n        {replies.length > 0 && (\n          <div className=\"replies\">\n            {replies.map((reply) => (\n              <Comment\n                comment={reply}\n                key={reply.id}\n                setActiveComment={setActiveComment}\n                activeComment={activeComment}\n                currentUser={currentUser}\n                updateComment={updateComment}\n                deleteComment={deleteComment}\n                addComment={addComment}\n                parentId={reply.id}\n                getReplies={getReplies}\n                replies={getReplies(reply.id)}\n                currentUserId={currentUserId}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Comment;"],"mappings":"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"},"metadata":{},"sourceType":"module"}