{"ast":null,"code":"import _toConsumableArray from '@babel/runtime/helpers/esm/toConsumableArray';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport React, { Children, useState, useEffect } from 'react';\nimport invariant from 'invariant';\nimport _slicedToArray from '@babel/runtime/helpers/esm/slicedToArray';\nimport _objectWithoutProperties from '@babel/runtime/helpers/esm/objectWithoutProperties';\nimport useStyles, { inline } from 'substyle';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom'; // escape RegExp special characters https://stackoverflow.com/a/9310752/5142490\n\nvar escapeRegex = function escapeRegex(str) {\n  return str.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n};\n\nvar PLACEHOLDERS = {\n  id: '__id__',\n  display: '__display__'\n};\n\nvar findPositionOfCapturingGroup = function findPositionOfCapturingGroup(markup, parameterName) {\n  invariant(parameterName === 'id' || parameterName === 'display', \"Second arg must be either \\\"id\\\" or \\\"display\\\", got: \\\"\".concat(parameterName, \"\\\"\")); // find positions of placeholders in the markup\n\n  var indexDisplay = markup.indexOf(PLACEHOLDERS.display);\n  var indexId = markup.indexOf(PLACEHOLDERS.id); // set indices to null if not found\n\n  if (indexDisplay < 0) indexDisplay = null;\n  if (indexId < 0) indexId = null; // markup must contain one of the mandatory placeholders\n\n  invariant(indexDisplay !== null || indexId !== null, \"The markup '\".concat(markup, \"' does not contain either of the placeholders '__id__' or '__display__'\"));\n\n  if (indexDisplay !== null && indexId !== null) {\n    // both placeholders are used, return 0 or 1 depending on the position of the requested parameter\n    return parameterName === 'id' && indexId <= indexDisplay || parameterName === 'display' && indexDisplay <= indexId ? 0 : 1;\n  } // just one placeholder is being used, we'll use the captured string for both parameters\n\n\n  return 0;\n};\n\nvar combineRegExps = function combineRegExps(regExps) {\n  var serializedRegexParser = /^\\/(.+)\\/(\\w+)?$/;\n  return new RegExp(regExps.map(function (regex) {\n    var _serializedRegexParse = serializedRegexParser.exec(regex.toString()),\n        _serializedRegexParse2 = _slicedToArray(_serializedRegexParse, 3),\n        regexString = _serializedRegexParse2[1],\n        regexFlags = _serializedRegexParse2[2];\n\n    invariant(!regexFlags, \"RegExp flags are not supported. Change /\".concat(regexString, \"/\").concat(regexFlags, \" into /\").concat(regexString, \"/\"));\n    return \"(\".concat(regexString, \")\");\n  }).join('|'), 'g');\n};\n\nvar countPlaceholders = function countPlaceholders(markup) {\n  var count = 0;\n  if (markup.indexOf('__id__') >= 0) count++;\n  if (markup.indexOf('__display__') >= 0) count++;\n  return count;\n};\n\nvar emptyFn = function emptyFn() {}; // Finds all occurrences of the markup in the value and calls the `markupIteratee` callback for each of them.\n// The optional `textIteratee` callback is called for each plain text ranges in between these markup occurrences.\n\n\nvar iterateMentionsMarkup = function iterateMentionsMarkup(value, config, markupIteratee) {\n  var textIteratee = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : emptyFn;\n  var regex = combineRegExps(config.map(function (c) {\n    return c.regex;\n  }));\n  var accOffset = 2; // first is whole match, second is the for the capturing group of first regexp component\n\n  var captureGroupOffsets = config.map(function (_ref) {\n    var markup = _ref.markup;\n    var result = accOffset; // + 1 is for the capturing group we add around each regexp component in combineRegExps\n\n    accOffset += countPlaceholders(markup) + 1;\n    return result;\n  });\n  var match;\n  var start = 0;\n  var currentPlainTextIndex = 0; // detect all mention markup occurrences in the value and iterate the matches\n\n  while ((match = regex.exec(value)) !== null) {\n    var offset = captureGroupOffsets.find(function (o) {\n      return !!match[o];\n    }); // eslint-disable-line no-loop-func\n\n    var mentionChildIndex = captureGroupOffsets.indexOf(offset);\n    var _config$mentionChildI = config[mentionChildIndex],\n        markup = _config$mentionChildI.markup,\n        displayTransform = _config$mentionChildI.displayTransform;\n    var idPos = offset + findPositionOfCapturingGroup(markup, 'id');\n    var displayPos = offset + findPositionOfCapturingGroup(markup, 'display');\n    var id = match[idPos];\n    var display = displayTransform(id, match[displayPos]);\n    var substr = value.substring(start, match.index);\n    textIteratee(substr, start, currentPlainTextIndex);\n    currentPlainTextIndex += substr.length;\n    markupIteratee(match[0], match.index, currentPlainTextIndex, id, display, mentionChildIndex, start);\n    currentPlainTextIndex += display.length;\n    start = regex.lastIndex;\n  }\n\n  if (start < value.length) {\n    textIteratee(value.substring(start), start, currentPlainTextIndex);\n  }\n};\n\nvar getPlainText = function getPlainText(value, config) {\n  var result = '';\n  iterateMentionsMarkup(value, config, function (match, index, plainTextIndex, id, display) {\n    result += display;\n  }, function (plainText) {\n    result += plainText;\n  });\n  return result;\n}; // in the marked up value string.\n// If the passed character index lies inside a mention, the value of `inMarkupCorrection` defines the\n// correction to apply:\n//   - 'START' to return the index of the mention markup's first char (default)\n//   - 'END' to return the index after its last char\n//   - 'NULL' to return null\n\n\nvar mapPlainTextIndex = function mapPlainTextIndex(value, config, indexInPlainText) {\n  var inMarkupCorrection = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'START';\n\n  if (typeof indexInPlainText !== 'number') {\n    return indexInPlainText;\n  }\n\n  var result;\n\n  var textIteratee = function textIteratee(substr, index, substrPlainTextIndex) {\n    if (result !== undefined) return;\n\n    if (substrPlainTextIndex + substr.length >= indexInPlainText) {\n      // found the corresponding position in the current plain text range\n      result = index + indexInPlainText - substrPlainTextIndex;\n    }\n  };\n\n  var markupIteratee = function markupIteratee(markup, index, mentionPlainTextIndex, id, display, childIndex, lastMentionEndIndex) {\n    if (result !== undefined) return;\n\n    if (mentionPlainTextIndex + display.length > indexInPlainText) {\n      // found the corresponding position inside current match,\n      // return the index of the first or after the last char of the matching markup\n      // depending on whether the `inMarkupCorrection`\n      if (inMarkupCorrection === 'NULL') {\n        result = null;\n      } else {\n        result = index + (inMarkupCorrection === 'END' ? markup.length : 0);\n      }\n    }\n  };\n\n  iterateMentionsMarkup(value, config, markupIteratee, textIteratee); // when a mention is at the end of the value and we want to get the caret position\n  // at the end of the string, result is undefined\n\n  return result === undefined ? value.length : result;\n};\n\nvar spliceString = function spliceString(str, start, end, insert) {\n  return str.substring(0, start) + insert + str.substring(end);\n}; // guided by the textarea text selection ranges before and after the change\n\n\nvar applyChangeToValue = function applyChangeToValue(value, plainTextValue, _ref, config) {\n  var selectionStartBefore = _ref.selectionStartBefore,\n      selectionEndBefore = _ref.selectionEndBefore,\n      selectionEndAfter = _ref.selectionEndAfter;\n  var oldPlainTextValue = getPlainText(value, config);\n  var lengthDelta = oldPlainTextValue.length - plainTextValue.length;\n\n  if (selectionStartBefore === 'undefined') {\n    selectionStartBefore = selectionEndAfter + lengthDelta;\n  }\n\n  if (selectionEndBefore === 'undefined') {\n    selectionEndBefore = selectionStartBefore;\n  } // Fixes an issue with replacing combined characters for complex input. Eg like acented letters on OSX\n\n\n  if (selectionStartBefore === selectionEndBefore && selectionEndBefore === selectionEndAfter && oldPlainTextValue.length === plainTextValue.length) {\n    selectionStartBefore = selectionStartBefore - 1;\n  } // extract the insertion from the new plain text value\n\n\n  var insert = plainTextValue.slice(selectionStartBefore, selectionEndAfter); // handling for Backspace key with no range selection\n\n  var spliceStart = Math.min(selectionStartBefore, selectionEndAfter);\n  var spliceEnd = selectionEndBefore;\n\n  if (selectionStartBefore === selectionEndAfter) {\n    // handling for Delete key with no range selection\n    spliceEnd = Math.max(selectionEndBefore, selectionStartBefore + lengthDelta);\n  }\n\n  var mappedSpliceStart = mapPlainTextIndex(value, config, spliceStart, 'START');\n  var mappedSpliceEnd = mapPlainTextIndex(value, config, spliceEnd, 'END');\n  var controlSpliceStart = mapPlainTextIndex(value, config, spliceStart, 'NULL');\n  var controlSpliceEnd = mapPlainTextIndex(value, config, spliceEnd, 'NULL');\n  var willRemoveMention = controlSpliceStart === null || controlSpliceEnd === null;\n  var newValue = spliceString(value, mappedSpliceStart, mappedSpliceEnd, insert);\n\n  if (!willRemoveMention) {\n    // test for auto-completion changes\n    var controlPlainTextValue = getPlainText(newValue, config);\n\n    if (controlPlainTextValue !== plainTextValue) {\n      // some auto-correction is going on\n      // find start of diff\n      spliceStart = 0;\n\n      while (plainTextValue[spliceStart] === controlPlainTextValue[spliceStart]) {\n        spliceStart++;\n      } // extract auto-corrected insertion\n\n\n      insert = plainTextValue.slice(spliceStart, selectionEndAfter); // find index of the unchanged remainder\n\n      spliceEnd = oldPlainTextValue.lastIndexOf(plainTextValue.substring(selectionEndAfter)); // re-map the corrected indices\n\n      mappedSpliceStart = mapPlainTextIndex(value, config, spliceStart, 'START');\n      mappedSpliceEnd = mapPlainTextIndex(value, config, spliceEnd, 'END');\n      newValue = spliceString(value, mappedSpliceStart, mappedSpliceEnd, insert);\n    }\n  }\n\n  return newValue;\n}; // returns a the index of of the first char of the mention in the plain text.\n// If indexInPlainText does not lie inside a mention, returns indexInPlainText.\n\n\nvar findStartOfMentionInPlainText = function findStartOfMentionInPlainText(value, config, indexInPlainText) {\n  var result = indexInPlainText;\n  var foundMention = false;\n\n  var markupIteratee = function markupIteratee(markup, index, mentionPlainTextIndex, id, display, childIndex, lastMentionEndIndex) {\n    if (mentionPlainTextIndex <= indexInPlainText && mentionPlainTextIndex + display.length > indexInPlainText) {\n      result = mentionPlainTextIndex;\n      foundMention = true;\n    }\n  };\n\n  iterateMentionsMarkup(value, config, markupIteratee);\n\n  if (foundMention) {\n    return result;\n  }\n};\n\nvar getMentions = function getMentions(value, config) {\n  var mentions = [];\n  iterateMentionsMarkup(value, config, function (match, index, plainTextIndex, id, display, childIndex, start) {\n    mentions.push({\n      id: id,\n      display: display,\n      childIndex: childIndex,\n      index: index,\n      plainTextIndex: plainTextIndex\n    });\n  });\n  return mentions;\n};\n\nvar getSuggestionHtmlId = function getSuggestionHtmlId(prefix, id) {\n  return \"\".concat(prefix, \"-\").concat(id);\n};\n\nvar countSuggestions = function countSuggestions(suggestions) {\n  return Object.values(suggestions).reduce(function (acc, _ref) {\n    var results = _ref.results;\n    return acc + results.length;\n  }, 0);\n};\n\nvar getEndOfLastMention = function getEndOfLastMention(value, config) {\n  var mentions = getMentions(value, config);\n  var lastMention = mentions[mentions.length - 1];\n  return lastMention ? lastMention.plainTextIndex + lastMention.display.length : 0;\n};\n\nvar markupToRegex = function markupToRegex(markup) {\n  var escapedMarkup = escapeRegex(markup);\n  var charAfterDisplay = markup[markup.indexOf(PLACEHOLDERS.display) + PLACEHOLDERS.display.length];\n  var charAfterId = markup[markup.indexOf(PLACEHOLDERS.id) + PLACEHOLDERS.id.length];\n  return new RegExp(escapedMarkup.replace(PLACEHOLDERS.display, \"([^\".concat(escapeRegex(charAfterDisplay || ''), \"]+?)\")).replace(PLACEHOLDERS.id, \"([^\".concat(escapeRegex(charAfterId || ''), \"]+?)\")));\n};\n\nvar readConfigFromChildren = function readConfigFromChildren(children) {\n  return Children.toArray(children).map(function (_ref) {\n    var _ref$props = _ref.props,\n        markup = _ref$props.markup,\n        regex = _ref$props.regex,\n        displayTransform = _ref$props.displayTransform;\n    return {\n      markup: markup,\n      regex: regex ? coerceCapturingGroups(regex, markup) : markupToRegex(markup),\n      displayTransform: displayTransform || function (id, display) {\n        return display || id;\n      }\n    };\n  });\n}; // make sure that the custom regex defines the correct number of capturing groups\n\n\nvar coerceCapturingGroups = function coerceCapturingGroups(regex, markup) {\n  var numberOfGroups = new RegExp(regex.toString() + '|').exec('').length - 1;\n  var numberOfPlaceholders = countPlaceholders(markup);\n  invariant(numberOfGroups === numberOfPlaceholders, \"Number of capturing groups in RegExp \".concat(regex.toString(), \" (\").concat(numberOfGroups, \") does not match the number of placeholders in the markup '\").concat(markup, \"' (\").concat(numberOfPlaceholders, \")\"));\n  return regex;\n};\n\nvar makeMentionsMarkup = function makeMentionsMarkup(markup, id, display) {\n  return markup.replace(PLACEHOLDERS.id, id).replace(PLACEHOLDERS.display, display);\n}; // This contains all the latin letters and the regex that match these letters with diacritics\n// https://stackoverflow.com/questions/990904/remove-accents-diacritics-in-a-string-in-javascript\n\n\nvar lettersDiacritics = [{\n  base: 'A',\n  letters: /(&#65;|&#9398;|&#65313;|&#192;|&#193;|&#194;|&#7846;|&#7844;|&#7850;|&#7848;|&#195;|&#256;|&#258;|&#7856;|&#7854;|&#7860;|&#7858;|&#550;|&#480;|&#196;|&#478;|&#7842;|&#197;|&#506;|&#461;|&#512;|&#514;|&#7840;|&#7852;|&#7862;|&#7680;|&#260;|&#570;|&#11375;|[\\u0041\\u24B6\\uFF21\\u00C0\\u00C1\\u00C2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\u00C3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\u00C4\\u01DE\\u1EA2\\u00C5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F])/g\n}, {\n  base: 'AA',\n  letters: /(&#42802;|[\\uA732])/g\n}, {\n  base: 'AE',\n  letters: /(&#198;|&#508;|&#482;|[\\u00C6\\u01FC\\u01E2])/g\n}, {\n  base: 'AO',\n  letters: /(&#42804;|[\\uA734])/g\n}, {\n  base: 'AU',\n  letters: /(&#42806;|[\\uA736])/g\n}, {\n  base: 'AV',\n  letters: /(&#42808;|&#42810;|[\\uA738\\uA73A])/g\n}, {\n  base: 'AY',\n  letters: /(&#42812;|[\\uA73C])/g\n}, {\n  base: 'B',\n  letters: /(&#66;|&#9399;|&#65314;|&#7682;|&#7684;|&#7686;|&#579;|&#386;|&#385;|[\\u0042\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181])/g\n}, {\n  base: 'C',\n  letters: /(&#67;|&#9400;|&#65315;|&#262;|&#264;|&#266;|&#268;|&#199;|&#7688;|&#391;|&#571;|&#42814;|[\\u0043\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\u00C7\\u1E08\\u0187\\u023B\\uA73E])/g\n}, {\n  base: 'D',\n  letters: /(&#68;|&#9401;|&#65316;|&#7690;|&#270;|&#7692;|&#7696;|&#7698;|&#7694;|&#272;|&#395;|&#394;|&#393;|&#42873;|&#208;|[\\u0044\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779\\u00D0])/g\n}, {\n  base: 'DZ',\n  letters: /(&#497;|&#452;|[\\u01F1\\u01C4])/g\n}, {\n  base: 'Dz',\n  letters: /(&#498;|&#453;|[\\u01F2\\u01C5])/g\n}, {\n  base: 'E',\n  letters: /(&#69;|&#9402;|&#65317;|&#200;|&#201;|&#202;|&#7872;|&#7870;|&#7876;|&#7874;|&#7868;|&#274;|&#7700;|&#7702;|&#276;|&#278;|&#203;|&#7866;|&#282;|&#516;|&#518;|&#7864;|&#7878;|&#552;|&#7708;|&#280;|&#7704;|&#7706;|&#400;|&#398;|[\\u0045\\u24BA\\uFF25\\u00C8\\u00C9\\u00CA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\u00CB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E])/g\n}, {\n  base: 'F',\n  letters: /(&#70;|&#9403;|&#65318;|&#7710;|&#401;|&#42875;|[\\u0046\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B])/g\n}, {\n  base: 'G',\n  letters: /(&#71;|&#9404;|&#65319;|&#500;|&#284;|&#7712;|&#286;|&#288;|&#486;|&#290;|&#484;|&#403;|&#42912;|&#42877;|&#42878;|[\\u0047\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E])/g\n}, {\n  base: 'H',\n  letters: /(&#72;|&#9405;|&#65320;|&#292;|&#7714;|&#7718;|&#542;|&#7716;|&#7720;|&#7722;|&#294;|&#11367;|&#11381;|&#42893;|[\\u0048\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D])/g\n}, {\n  base: 'I',\n  letters: /(&#73;|&#9406;|&#65321;|&#204;|&#205;|&#206;|&#296;|&#298;|&#300;|&#304;|&#207;|&#7726;|&#7880;|&#463;|&#520;|&#522;|&#7882;|&#302;|&#7724;|&#407;|[\\u0049\\u24BE\\uFF29\\u00CC\\u00CD\\u00CE\\u0128\\u012A\\u012C\\u0130\\u00CF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197])/g\n}, {\n  base: 'J',\n  letters: /(&#74;|&#9407;|&#65322;|&#308;|&#584;|[\\u004A\\u24BF\\uFF2A\\u0134\\u0248])/g\n}, {\n  base: 'K',\n  letters: /(&#75;|&#9408;|&#65323;|&#7728;|&#488;|&#7730;|&#310;|&#7732;|&#408;|&#11369;|&#42816;|&#42818;|&#42820;|&#42914;|[\\u004B\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2])/g\n}, {\n  base: 'L',\n  letters: /(&#76;|&#9409;|&#65324;|&#319;|&#313;|&#317;|&#7734;|&#7736;|&#315;|&#7740;|&#7738;|&#321;|&#573;|&#11362;|&#11360;|&#42824;|&#42822;|&#42880;|[\\u004C\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780])/g\n}, {\n  base: 'LJ',\n  letters: /(&#455;|[\\u01C7])/g\n}, {\n  base: 'Lj',\n  letters: /(&#456;|[\\u01C8])/g\n}, {\n  base: 'M',\n  letters: /(&#77;|&#9410;|&#65325;|&#7742;|&#7744;|&#7746;|&#11374;|&#412;|[\\u004D\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C])/g\n}, {\n  base: 'N',\n  letters: /(&#78;|&#9411;|&#65326;|&#504;|&#323;|&#209;|&#7748;|&#327;|&#7750;|&#325;|&#7754;|&#7752;|&#544;|&#413;|&#42896;|&#42916;|&#330;|[\\u004E\\u24C3\\uFF2E\\u01F8\\u0143\\u00D1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4\\u014A])/g\n}, {\n  base: 'NJ',\n  letters: /(&#458;|[\\u01CA])/g\n}, {\n  base: 'Nj',\n  letters: /(&#459;|[\\u01CB])/g\n}, {\n  base: 'O',\n  letters: /(&#79;|&#9412;|&#65327;|&#210;|&#211;|&#212;|&#7890;|&#7888;|&#7894;|&#7892;|&#213;|&#7756;|&#556;|&#7758;|&#332;|&#7760;|&#7762;|&#334;|&#558;|&#560;|&#214;|&#554;|&#7886;|&#336;|&#465;|&#524;|&#526;|&#416;|&#7900;|&#7898;|&#7904;|&#7902;|&#7906;|&#7884;|&#7896;|&#490;|&#492;|&#216;|&#510;|&#390;|&#415;|&#42826;|&#42828;|[\\u004F\\u24C4\\uFF2F\\u00D2\\u00D3\\u00D4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\u00D5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\u00D6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\u00D8\\u01FE\\u0186\\u019F\\uA74A\\uA74C])/g\n}, {\n  base: 'OE',\n  letters: /(&#338;|[\\u0152])/g\n}, {\n  base: 'OI',\n  letters: /(&#418;|[\\u01A2])/g\n}, {\n  base: 'OO',\n  letters: /(&#42830;|[\\uA74E])/g\n}, {\n  base: 'OU',\n  letters: /(&#546;|[\\u0222])/g\n}, {\n  base: 'P',\n  letters: /(&#80;|&#9413;|&#65328;|&#7764;|&#7766;|&#420;|&#11363;|&#42832;|&#42834;|&#42836;|[\\u0050\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754])/g\n}, {\n  base: 'Q',\n  letters: /(&#81;|&#9414;|&#65329;|&#42838;|&#42840;|&#586;|[\\u0051\\u24C6\\uFF31\\uA756\\uA758\\u024A])/g\n}, {\n  base: 'R',\n  letters: /(&#82;|&#9415;|&#65330;|&#340;|&#7768;|&#344;|&#528;|&#530;|&#7770;|&#7772;|&#342;|&#7774;|&#588;|&#11364;|&#42842;|&#42918;|&#42882;|[\\u0052\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782])/g\n}, {\n  base: 'S',\n  letters: /(&#83;|&#9416;|&#65331;|&#7838;|&#346;|&#7780;|&#348;|&#7776;|&#352;|&#7782;|&#7778;|&#7784;|&#536;|&#350;|&#11390;|&#42920;|&#42884;|[\\u0053\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784])/g\n}, {\n  base: 'T',\n  letters: /(&#84;|&#9417;|&#65332;|&#7786;|&#356;|&#7788;|&#538;|&#354;|&#7792;|&#7790;|&#358;|&#428;|&#430;|&#574;|&#42886;|[\\u0054\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786])/g\n}, {\n  base: 'TH',\n  letters: /(&#222;|[\\u00DE])/g\n}, {\n  base: 'TZ',\n  letters: /(&#42792;|[\\uA728])/g\n}, {\n  base: 'U',\n  letters: /(&#85;|&#9418;|&#65333;|&#217;|&#218;|&#219;|&#360;|&#7800;|&#362;|&#7802;|&#364;|&#220;|&#475;|&#471;|&#469;|&#473;|&#7910;|&#366;|&#368;|&#467;|&#532;|&#534;|&#431;|&#7914;|&#7912;|&#7918;|&#7916;|&#7920;|&#7908;|&#7794;|&#370;|&#7798;|&#7796;|&#580;|[\\u0055\\u24CA\\uFF35\\u00D9\\u00DA\\u00DB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\u00DC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244])/g\n}, {\n  base: 'V',\n  letters: /(&#86;|&#9419;|&#65334;|&#7804;|&#7806;|&#434;|&#42846;|&#581;|[\\u0056\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245])/g\n}, {\n  base: 'VY',\n  letters: /(&#42848;|[\\uA760])/g\n}, {\n  base: 'W',\n  letters: /(&#87;|&#9420;|&#65335;|&#7808;|&#7810;|&#372;|&#7814;|&#7812;|&#7816;|&#11378;|[\\u0057\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72])/g\n}, {\n  base: 'X',\n  letters: /(&#88;|&#9421;|&#65336;|&#7818;|&#7820;|[\\u0058\\u24CD\\uFF38\\u1E8A\\u1E8C])/g\n}, {\n  base: 'Y',\n  letters: /(&#89;|&#9422;|&#65337;|&#7922;|&#221;|&#374;|&#7928;|&#562;|&#7822;|&#376;|&#7926;|&#7924;|&#435;|&#590;|&#7934;|[\\u0059\\u24CE\\uFF39\\u1EF2\\u00DD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE])/g\n}, {\n  base: 'Z',\n  letters: /(&#90;|&#9423;|&#65338;|&#377;|&#7824;|&#379;|&#381;|&#7826;|&#7828;|&#437;|&#548;|&#11391;|&#11371;|&#42850;|[\\u005A\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762])/g\n}, {\n  base: 'a',\n  letters: /(&#97;|&#9424;|&#65345;|&#7834;|&#224;|&#225;|&#226;|&#7847;|&#7845;|&#7851;|&#7849;|&#227;|&#257;|&#259;|&#7857;|&#7855;|&#7861;|&#7859;|&#551;|&#481;|&#228;|&#479;|&#7843;|&#229;|&#507;|&#462;|&#513;|&#515;|&#7841;|&#7853;|&#7863;|&#7681;|&#261;|&#11365;|&#592;|[\\u0061\\u24D0\\uFF41\\u1E9A\\u00E0\\u00E1\\u00E2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\u00E3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\u00E4\\u01DF\\u1EA3\\u00E5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250])/g\n}, {\n  base: 'aa',\n  letters: /(&#42803;|[\\uA733])/g\n}, {\n  base: 'ae',\n  letters: /(&#230;|&#509;|&#483;|[\\u00E6\\u01FD\\u01E3])/g\n}, {\n  base: 'ao',\n  letters: /(&#42805;|[\\uA735])/g\n}, {\n  base: 'au',\n  letters: /(&#42807;|[\\uA737])/g\n}, {\n  base: 'av',\n  letters: /(&#42809;|&#42811;|[\\uA739\\uA73B])/g\n}, {\n  base: 'ay',\n  letters: /(&#42813;|[\\uA73D])/g\n}, {\n  base: 'b',\n  letters: /(&#98;|&#9425;|&#65346;|&#7683;|&#7685;|&#7687;|&#384;|&#387;|&#595;|[\\u0062\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253])/g\n}, {\n  base: 'c',\n  letters: /(&#99;|&#9426;|&#65347;|&#263;|&#265;|&#267;|&#269;|&#231;|&#7689;|&#392;|&#572;|&#42815;|&#8580;|[\\u0063\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\u00E7\\u1E09\\u0188\\u023C\\uA73F\\u2184])/g\n}, {\n  base: 'd',\n  letters: /(&#100;|&#9427;|&#65348;|&#7691;|&#271;|&#7693;|&#7697;|&#7699;|&#7695;|&#273;|&#396;|&#598;|&#599;|&#42874;|&#240;|[\\u0064\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A\\u00F0])/g\n}, {\n  base: 'dz',\n  letters: /(&#499;|&#454;|[\\u01F3\\u01C6])/g\n}, {\n  base: 'e',\n  letters: /(&#101;|&#9428;|&#65349;|&#232;|&#233;|&#234;|&#7873;|&#7871;|&#7877;|&#7875;|&#7869;|&#275;|&#7701;|&#7703;|&#277;|&#279;|&#235;|&#7867;|&#283;|&#517;|&#519;|&#7865;|&#7879;|&#553;|&#7709;|&#281;|&#7705;|&#7707;|&#583;|&#603;|&#477;|[\\u0065\\u24D4\\uFF45\\u00E8\\u00E9\\u00EA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\u00EB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD])/g\n}, {\n  base: 'f',\n  letters: /(&#102;|&#9429;|&#65350;|&#7711;|&#402;|&#42876;|[\\u0066\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C])/g\n}, {\n  base: 'g',\n  letters: /(&#103;|&#9430;|&#65351;|&#501;|&#285;|&#7713;|&#287;|&#289;|&#487;|&#291;|&#485;|&#608;|&#42913;|&#7545;|&#42879;|[\\u0067\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F])/g\n}, {\n  base: 'h',\n  letters: /(&#104;|&#9431;|&#65352;|&#293;|&#7715;|&#7719;|&#543;|&#7717;|&#7721;|&#7723;|&#7830;|&#295;|&#11368;|&#11382;|&#613;|[\\u0068\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265])/g\n}, {\n  base: 'hv',\n  letters: /(&#405;|[\\u0195])/g\n}, {\n  base: 'i',\n  letters: /(&#105;|&#9432;|&#65353;|&#236;|&#237;|&#238;|&#297;|&#299;|&#301;|&#239;|&#7727;|&#7881;|&#464;|&#521;|&#523;|&#7883;|&#303;|&#7725;|&#616;|&#305;|[\\u0069\\u24D8\\uFF49\\u00EC\\u00ED\\u00EE\\u0129\\u012B\\u012D\\u00EF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131])/g\n}, {\n  base: 'ij',\n  letters: /(&#307;|[\\u0133])/g\n}, {\n  base: 'j',\n  letters: /(&#106;|&#9433;|&#65354;|&#309;|&#496;|&#585;|[\\u006A\\u24D9\\uFF4A\\u0135\\u01F0\\u0249])/g\n}, {\n  base: 'k',\n  letters: /(&#107;|&#9434;|&#65355;|&#7729;|&#489;|&#7731;|&#311;|&#7733;|&#409;|&#11370;|&#42817;|&#42819;|&#42821;|&#42915;|[\\u006B\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3])/g\n}, {\n  base: 'l',\n  letters: /(&#108;|&#9435;|&#65356;|&#320;|&#314;|&#318;|&#7735;|&#7737;|&#316;|&#7741;|&#7739;|&#322;|&#410;|&#619;|&#11361;|&#42825;|&#42881;|&#42823;|[\\u006C\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747])/g\n}, {\n  base: 'lj',\n  letters: /(&#457;|[\\u01C9])/g\n}, {\n  base: 'm',\n  letters: /(&#109;|&#9436;|&#65357;|&#7743;|&#7745;|&#7747;|&#625;|&#623;|[\\u006D\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F])/g\n}, {\n  base: 'n',\n  letters: /(&#110;|&#9437;|&#65358;|&#505;|&#324;|&#241;|&#7749;|&#328;|&#7751;|&#326;|&#7755;|&#7753;|&#414;|&#626;|&#329;|&#42897;|&#42917;|&#331;|[\\u006E\\u24DD\\uFF4E\\u01F9\\u0144\\u00F1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5\\u014B])/g\n}, {\n  base: 'nj',\n  letters: /(&#460;|[\\u01CC])/g\n}, {\n  base: 'o',\n  letters: /(&#111;|&#9438;|&#65359;|&#242;|&#243;|&#244;|&#7891;|&#7889;|&#7895;|&#7893;|&#245;|&#7757;|&#557;|&#7759;|&#333;|&#7761;|&#7763;|&#335;|&#559;|&#561;|&#246;|&#555;|&#7887;|&#337;|&#466;|&#525;|&#527;|&#417;|&#7901;|&#7899;|&#7905;|&#7903;|&#7907;|&#7885;|&#7897;|&#491;|&#493;|&#248;|&#511;|&#596;|&#42827;|&#42829;|&#629;|[\\u006F\\u24DE\\uFF4F\\u00F2\\u00F3\\u00F4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\u00F5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\u00F6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\u00F8\\u01FF\\u0254\\uA74B\\uA74D\\u0275])/g\n}, {\n  base: 'oe',\n  letters: /(&#339;|[\\u0153])/g\n}, {\n  base: 'oi',\n  letters: /(&#419;|[\\u01A3])/g\n}, {\n  base: 'ou',\n  letters: /(&#547;|[\\u0223])/g\n}, {\n  base: 'oo',\n  letters: /(&#42831;|[\\uA74F])/g\n}, {\n  base: 'p',\n  letters: /(&#112;|&#9439;|&#65360;|&#7765;|&#7767;|&#421;|&#7549;|&#42833;|&#42835;|&#42837;|[\\u0070\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755])/g\n}, {\n  base: 'q',\n  letters: /(&#113;|&#9440;|&#65361;|&#587;|&#42839;|&#42841;|[\\u0071\\u24E0\\uFF51\\u024B\\uA757\\uA759])/g\n}, {\n  base: 'r',\n  letters: /(&#114;|&#9441;|&#65362;|&#341;|&#7769;|&#345;|&#529;|&#531;|&#7771;|&#7773;|&#343;|&#7775;|&#589;|&#637;|&#42843;|&#42919;|&#42883;|[\\u0072\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783])/g\n}, {\n  base: 's',\n  letters: /(&#115;|&#9442;|&#65363;|&#347;|&#7781;|&#349;|&#7777;|&#353;|&#7783;|&#7779;|&#7785;|&#537;|&#351;|&#575;|&#42921;|&#42885;|&#7835;|&#383;|[\\u0073\\u24E2\\uFF53\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B\\u017F])/g\n}, {\n  base: 'ss',\n  letters: /(&#223;|[\\u00DF])/g\n}, {\n  base: 't',\n  letters: /(&#116;|&#9443;|&#65364;|&#7787;|&#7831;|&#357;|&#7789;|&#539;|&#355;|&#7793;|&#7791;|&#359;|&#429;|&#648;|&#11366;|&#42887;|[\\u0074\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787])/g\n}, {\n  base: 'th',\n  letters: /(&#254;|[\\u00FE])/g\n}, {\n  base: 'tz',\n  letters: /(&#42793;|[\\uA729])/g\n}, {\n  base: 'u',\n  letters: /(&#117;|&#9444;|&#65365;|&#249;|&#250;|&#251;|&#361;|&#7801;|&#363;|&#7803;|&#365;|&#252;|&#476;|&#472;|&#470;|&#474;|&#7911;|&#367;|&#369;|&#468;|&#533;|&#535;|&#432;|&#7915;|&#7913;|&#7919;|&#7917;|&#7921;|&#7909;|&#7795;|&#371;|&#7799;|&#7797;|&#649;|[\\u0075\\u24E4\\uFF55\\u00F9\\u00FA\\u00FB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\u00FC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289])/g\n}, {\n  base: 'v',\n  letters: /(&#118;|&#9445;|&#65366;|&#7805;|&#7807;|&#651;|&#42847;|&#652;|[\\u0076\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C])/g\n}, {\n  base: 'vy',\n  letters: /(&#42849;|[\\uA761])/g\n}, {\n  base: 'w',\n  letters: /(&#119;|&#9446;|&#65367;|&#7809;|&#7811;|&#373;|&#7815;|&#7813;|&#7832;|&#7817;|&#11379;|[\\u0077\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73])/g\n}, {\n  base: 'x',\n  letters: /(&#120;|&#9447;|&#65368;|&#7819;|&#7821;|[\\u0078\\u24E7\\uFF58\\u1E8B\\u1E8D])/g\n}, {\n  base: 'y',\n  letters: /(&#121;|&#9448;|&#65369;|&#7923;|&#253;|&#375;|&#7929;|&#563;|&#7823;|&#255;|&#7927;|&#7833;|&#7925;|&#436;|&#591;|&#7935;|[\\u0079\\u24E8\\uFF59\\u1EF3\\u00FD\\u0177\\u1EF9\\u0233\\u1E8F\\u00FF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF])/g\n}, {\n  base: 'z',\n  letters: /(&#122;|&#9449;|&#65370;|&#378;|&#7825;|&#380;|&#382;|&#7827;|&#7829;|&#438;|&#549;|&#576;|&#11372;|&#42851;|[\\u007A\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763])/g\n}];\n\nvar removeAccents = function removeAccents(str) {\n  var formattedStr = str;\n  lettersDiacritics.forEach(function (letterDiacritics) {\n    formattedStr = formattedStr.replace(letterDiacritics.letters, letterDiacritics.base);\n  });\n  return formattedStr;\n};\n\nvar normalizeString = function normalizeString(str) {\n  return removeAccents(str).toLowerCase();\n};\n\nvar getSubstringIndex = function getSubstringIndex(str, substr, ignoreAccents) {\n  if (!ignoreAccents) {\n    return str.toLowerCase().indexOf(substr.toLowerCase());\n  }\n\n  return normalizeString(str).indexOf(normalizeString(substr));\n};\n\nvar isIE = function isIE() {\n  return !!document.documentMode;\n};\n\nvar isNumber = function isNumber(val) {\n  return typeof val === 'number';\n};\n\nvar keys = function keys(obj) {\n  return obj === Object(obj) ? Object.keys(obj) : [];\n};\n\nvar omit = function omit(obj) {\n  var _ref;\n\n  for (var _len = arguments.length, rest = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    rest[_key - 1] = arguments[_key];\n  }\n\n  var keys = (_ref = []).concat.apply(_ref, rest);\n\n  return Object.keys(obj).reduce(function (acc, k) {\n    if (obj.hasOwnProperty(k) && !keys.includes(k) && obj[k] !== undefined) {\n      acc[k] = obj[k];\n    }\n\n    return acc;\n  }, {});\n};\n\nvar _excluded = [\"style\", \"className\", \"classNames\"];\n\nfunction createDefaultStyle(defaultStyle, getModifiers) {\n  var enhance = function enhance(ComponentToWrap) {\n    var DefaultStyleEnhancer = function DefaultStyleEnhancer(_ref) {\n      var style = _ref.style,\n          className = _ref.className,\n          classNames = _ref.classNames,\n          rest = _objectWithoutProperties(_ref, _excluded);\n\n      var modifiers = getModifiers ? getModifiers(rest) : undefined;\n      var styles = useStyles(defaultStyle, {\n        style: style,\n        className: className,\n        classNames: classNames\n      }, modifiers);\n      return /*#__PURE__*/React.createElement(ComponentToWrap, _extends({}, rest, {\n        style: styles\n      }));\n    };\n\n    var displayName = ComponentToWrap.displayName || ComponentToWrap.name || 'Component';\n    DefaultStyleEnhancer.displayName = \"defaultStyle(\".concat(displayName, \")\");\n    return DefaultStyleEnhancer;\n  };\n\n  return enhance;\n}\n\nvar _generateComponentKey = function _generateComponentKey(usedKeys, id) {\n  if (!usedKeys.hasOwnProperty(id)) {\n    usedKeys[id] = 0;\n  } else {\n    usedKeys[id]++;\n  }\n\n  return id + '_' + usedKeys[id];\n};\n\nfunction Highlighter(_ref) {\n  var selectionStart = _ref.selectionStart,\n      selectionEnd = _ref.selectionEnd,\n      _ref$value = _ref.value,\n      value = _ref$value === void 0 ? '' : _ref$value,\n      onCaretPositionChange = _ref.onCaretPositionChange,\n      containerRef = _ref.containerRef,\n      children = _ref.children,\n      singleLine = _ref.singleLine,\n      style = _ref.style;\n\n  var _useState = useState({\n    left: undefined,\n    top: undefined\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      position = _useState2[0],\n      setPosition = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      caretElement = _useState4[0],\n      setCaretElement = _useState4[1];\n\n  useEffect(function () {\n    notifyCaretPosition();\n  }, [caretElement]);\n\n  var notifyCaretPosition = function notifyCaretPosition() {\n    if (!caretElement) {\n      return;\n    }\n\n    var offsetLeft = caretElement.offsetLeft,\n        offsetTop = caretElement.offsetTop;\n\n    if (position.left === offsetLeft && position.top === offsetTop) {\n      return;\n    }\n\n    var newPosition = {\n      left: offsetLeft,\n      top: offsetTop\n    };\n    setPosition(newPosition);\n    onCaretPositionChange(newPosition);\n  };\n\n  var config = readConfigFromChildren(children);\n  var caretPositionInMarkup;\n\n  if (selectionEnd === selectionStart) {\n    caretPositionInMarkup = mapPlainTextIndex(value, config, selectionStart, 'START');\n  }\n\n  var resultComponents = [];\n  var componentKeys = {};\n  var components = resultComponents;\n  var substringComponentKey = 0;\n\n  var textIteratee = function textIteratee(substr, index, indexInPlainText) {\n    // check whether the caret element has to be inserted inside the current plain substring\n    if (isNumber(caretPositionInMarkup) && caretPositionInMarkup >= index && caretPositionInMarkup <= index + substr.length) {\n      // if yes, split substr at the caret position and insert the caret component\n      var splitIndex = caretPositionInMarkup - index;\n      components.push(renderSubstring(substr.substring(0, splitIndex), substringComponentKey)); // add all following substrings and mention components as children of the caret component\n\n      components = [renderSubstring(substr.substring(splitIndex), substringComponentKey)];\n    } else {\n      components.push(renderSubstring(substr, substringComponentKey));\n    }\n\n    substringComponentKey++;\n  };\n\n  var mentionIteratee = function mentionIteratee(markup, index, indexInPlainText, id, display, mentionChildIndex, lastMentionEndIndex) {\n    var key = _generateComponentKey(componentKeys, id);\n\n    components.push(getMentionComponentForMatch(id, display, mentionChildIndex, key));\n  };\n\n  var renderSubstring = function renderSubstring(string, key) {\n    // set substring span to hidden, so that Emojis are not shown double in Mobile Safari\n    return /*#__PURE__*/React.createElement(\"span\", _extends({}, style('substring'), {\n      key: key\n    }), string);\n  };\n\n  var getMentionComponentForMatch = function getMentionComponentForMatch(id, display, mentionChildIndex, key) {\n    var props = {\n      id: id,\n      display: display,\n      key: key\n    };\n    var child = Children.toArray(children)[mentionChildIndex];\n    return /*#__PURE__*/React.cloneElement(child, props);\n  };\n\n  var renderHighlighterCaret = function renderHighlighterCaret(children) {\n    return /*#__PURE__*/React.createElement(\"span\", _extends({}, style('caret'), {\n      ref: setCaretElement,\n      key: \"caret\"\n    }), children);\n  };\n\n  iterateMentionsMarkup(value, config, mentionIteratee, textIteratee); // append a span containing a space, to ensure the last text line has the correct height\n\n  components.push(' ');\n\n  if (components !== resultComponents) {\n    // if a caret component is to be rendered, add all components that followed as its children\n    resultComponents.push(renderHighlighterCaret(components));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, style, {\n    ref: containerRef\n  }), resultComponents);\n}\n\nHighlighter.propTypes = {\n  selectionStart: PropTypes.number,\n  selectionEnd: PropTypes.number,\n  value: PropTypes.string.isRequired,\n  onCaretPositionChange: PropTypes.func.isRequired,\n  containerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: typeof Element === 'undefined' ? PropTypes.any : PropTypes.instanceOf(Element)\n  })]),\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.arrayOf(PropTypes.element)]).isRequired\n};\nvar styled = createDefaultStyle({\n  position: 'relative',\n  boxSizing: 'border-box',\n  width: '100%',\n  color: 'transparent',\n  overflow: 'hidden',\n  whiteSpace: 'pre-wrap',\n  wordWrap: 'break-word',\n  border: '1px solid transparent',\n  textAlign: 'start',\n  '&singleLine': {\n    whiteSpace: 'pre',\n    wordWrap: null\n  },\n  substring: {\n    visibility: 'hidden'\n  }\n}, function (props) {\n  return {\n    '&singleLine': props.singleLine\n  };\n});\nvar Highlighter$1 = styled(Highlighter);\n\nfunction Suggestion(_ref) {\n  var id = _ref.id,\n      focused = _ref.focused,\n      ignoreAccents = _ref.ignoreAccents,\n      index = _ref.index,\n      onClick = _ref.onClick,\n      onMouseEnter = _ref.onMouseEnter,\n      query = _ref.query,\n      renderSuggestion = _ref.renderSuggestion,\n      suggestion = _ref.suggestion,\n      style = _ref.style,\n      className = _ref.className,\n      classNames = _ref.classNames;\n  var rest = {\n    onClick: onClick,\n    onMouseEnter: onMouseEnter\n  };\n\n  var renderContent = function renderContent() {\n    var display = getDisplay();\n    var highlightedDisplay = renderHighlightedDisplay(display);\n\n    if (renderSuggestion) {\n      return renderSuggestion(suggestion, query, highlightedDisplay, index, focused);\n    }\n\n    return highlightedDisplay;\n  };\n\n  var getDisplay = function getDisplay() {\n    if (typeof suggestion === 'string') {\n      return suggestion;\n    }\n\n    var id = suggestion.id,\n        display = suggestion.display;\n\n    if (id === undefined || !display) {\n      return id;\n    }\n\n    return display;\n  };\n\n  var renderHighlightedDisplay = function renderHighlightedDisplay(display) {\n    var i = getSubstringIndex(display, query, ignoreAccents);\n\n    if (i === -1) {\n      return /*#__PURE__*/React.createElement(\"span\", style('display'), display);\n    }\n\n    return /*#__PURE__*/React.createElement(\"span\", style('display'), display.substring(0, i), /*#__PURE__*/React.createElement(\"b\", style('highlight'), display.substring(i, i + query.length)), display.substring(i + query.length));\n  };\n\n  return /*#__PURE__*/React.createElement(\"li\", _extends({\n    id: id,\n    role: \"option\",\n    \"aria-selected\": focused\n  }, rest, style), renderContent());\n}\n\nSuggestion.propTypes = {\n  id: PropTypes.string.isRequired,\n  query: PropTypes.string.isRequired,\n  index: PropTypes.number.isRequired,\n  ignoreAccents: PropTypes.bool,\n  suggestion: PropTypes.oneOfType([PropTypes.string, PropTypes.shape({\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    display: PropTypes.string\n  })]).isRequired,\n  renderSuggestion: PropTypes.func,\n  focused: PropTypes.bool\n};\nvar styled$1 = createDefaultStyle({\n  cursor: 'pointer'\n}, function (props) {\n  return {\n    '&focused': props.focused\n  };\n});\nvar Suggestion$1 = styled$1(Suggestion);\n\nfunction LoadingIndicator(_ref) {\n  var style = _ref.style,\n      className = _ref.className,\n      classNames = _ref.classNames;\n  var styles = useStyles(defaultstyle, {\n    style: style,\n    className: className,\n    classNames: classNames\n  });\n  var spinnerStyles = styles('spinner');\n  return /*#__PURE__*/React.createElement(\"div\", styles, /*#__PURE__*/React.createElement(\"div\", spinnerStyles, /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element1'])), /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element2'])), /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element3'])), /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element4'])), /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element5']))));\n}\n\nvar defaultstyle = {};\n\nfunction SuggestionsOverlay(_ref) {\n  var id = _ref.id,\n      _ref$suggestions = _ref.suggestions,\n      suggestions = _ref$suggestions === void 0 ? {} : _ref$suggestions,\n      a11ySuggestionsListLabel = _ref.a11ySuggestionsListLabel,\n      focusIndex = _ref.focusIndex,\n      position = _ref.position,\n      left = _ref.left,\n      right = _ref.right,\n      top = _ref.top,\n      scrollFocusedIntoView = _ref.scrollFocusedIntoView,\n      isLoading = _ref.isLoading,\n      isOpened = _ref.isOpened,\n      _ref$onSelect = _ref.onSelect,\n      onSelect = _ref$onSelect === void 0 ? function () {\n    return null;\n  } : _ref$onSelect,\n      ignoreAccents = _ref.ignoreAccents,\n      containerRef = _ref.containerRef,\n      children = _ref.children,\n      style = _ref.style,\n      customSuggestionsContainer = _ref.customSuggestionsContainer,\n      onMouseDown = _ref.onMouseDown,\n      onMouseEnter = _ref.onMouseEnter;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      ulElement = _useState2[0],\n      setUlElement = _useState2[1];\n\n  useEffect(function () {\n    if (!ulElement || ulElement.offsetHeight >= ulElement.scrollHeight || !scrollFocusedIntoView) {\n      return;\n    }\n\n    var scrollTop = ulElement.scrollTop;\n\n    var _ulElement$children$f = ulElement.children[focusIndex].getBoundingClientRect(),\n        top = _ulElement$children$f.top,\n        bottom = _ulElement$children$f.bottom;\n\n    var _ulElement$getBoundin = ulElement.getBoundingClientRect(),\n        topContainer = _ulElement$getBoundin.top;\n\n    top = top - topContainer + scrollTop;\n    bottom = bottom - topContainer + scrollTop;\n\n    if (top < scrollTop) {\n      ulElement.scrollTop = top;\n    } else if (bottom > ulElement.offsetHeight) {\n      ulElement.scrollTop = bottom - ulElement.offsetHeight;\n    }\n  }, []);\n\n  var renderSuggestions = function renderSuggestions() {\n    var suggestionsToRender = Object.values(suggestions).reduce(function (accResults, _ref2) {\n      var results = _ref2.results,\n          queryInfo = _ref2.queryInfo;\n      return [].concat(_toConsumableArray(accResults), _toConsumableArray(results.map(function (result, index) {\n        return renderSuggestion(result, queryInfo, accResults.length + index);\n      })));\n    }, []);\n    if (customSuggestionsContainer) return customSuggestionsContainer(suggestionsToRender);else return suggestionsToRender;\n  };\n\n  var renderSuggestion = function renderSuggestion(result, queryInfo, index) {\n    var isFocused = index === focusIndex;\n    var childIndex = queryInfo.childIndex,\n        query = queryInfo.query;\n    var renderSuggestion = Children.toArray(children)[childIndex].props.renderSuggestion;\n    return /*#__PURE__*/React.createElement(Suggestion$1, {\n      style: style('item'),\n      key: \"\".concat(childIndex, \"-\").concat(getID(result)),\n      id: getSuggestionHtmlId(id, index),\n      query: query,\n      index: index,\n      ignoreAccents: ignoreAccents,\n      renderSuggestion: renderSuggestion,\n      suggestion: result,\n      focused: isFocused,\n      onClick: function onClick() {\n        return select(result, queryInfo);\n      },\n      onMouseEnter: function onMouseEnter() {\n        return handleMouseEnter(index);\n      }\n    });\n  };\n\n  var renderLoadingIndicator = function renderLoadingIndicator() {\n    if (!isLoading) {\n      return;\n    }\n\n    return /*#__PURE__*/React.createElement(LoadingIndicator, {\n      style: style('loadingIndicator')\n    });\n  };\n\n  var handleMouseEnter = function handleMouseEnter(index, ev) {\n    if (onMouseEnter) {\n      onMouseEnter(index);\n    }\n  };\n\n  var select = function select(suggestion, queryInfo) {\n    onSelect(suggestion, queryInfo);\n  };\n\n  var getID = function getID(suggestion) {\n    if (typeof suggestion === 'string') {\n      return suggestion;\n    }\n\n    return suggestion.id;\n  };\n\n  if (!isOpened) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, inline({\n    position: position || 'absolute',\n    left: left,\n    right: right,\n    top: top\n  }, style), {\n    onMouseDown: onMouseDown,\n    ref: containerRef\n  }), /*#__PURE__*/React.createElement(\"ul\", _extends({\n    ref: setUlElement,\n    id: id,\n    role: \"listbox\",\n    \"aria-label\": a11ySuggestionsListLabel\n  }, style('list')), renderSuggestions()), renderLoadingIndicator());\n}\n\nSuggestionsOverlay.propTypes = {\n  id: PropTypes.string.isRequired,\n  suggestions: PropTypes.object.isRequired,\n  a11ySuggestionsListLabel: PropTypes.string,\n  focusIndex: PropTypes.number,\n  position: PropTypes.string,\n  left: PropTypes.number,\n  right: PropTypes.number,\n  top: PropTypes.number,\n  scrollFocusedIntoView: PropTypes.bool,\n  isLoading: PropTypes.bool,\n  isOpened: PropTypes.bool.isRequired,\n  onSelect: PropTypes.func,\n  ignoreAccents: PropTypes.bool,\n  customSuggestionsContainer: PropTypes.any,\n  containerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: typeof Element === 'undefined' ? PropTypes.any : PropTypes.instanceOf(Element)\n  })])\n};\nvar styled$2 = createDefaultStyle({\n  zIndex: 1,\n  backgroundColor: 'white',\n  marginTop: 14,\n  minWidth: 100,\n  list: {\n    margin: 0,\n    padding: 0,\n    listStyleType: 'none'\n  }\n});\nvar SuggestionsOverlay$1 = styled$2(SuggestionsOverlay);\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar makeTriggerRegex = function makeTriggerRegex(trigger) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (trigger instanceof RegExp) {\n    return trigger;\n  } else {\n    var allowSpaceInQuery = options.allowSpaceInQuery;\n    var escapedTriggerChar = escapeRegex(trigger); // first capture group is the part to be replaced on completion\n    // second capture group is for extracting the search query\n\n    return new RegExp(\"(?:^|\\\\s)(\".concat(escapedTriggerChar, \"([^\").concat(allowSpaceInQuery ? '' : '\\\\s').concat(escapedTriggerChar, \"]*))$\"));\n  }\n};\n\nvar getDataProvider = function getDataProvider(data, ignoreAccents) {\n  if (data instanceof Array) {\n    // if data is an array, create a function to query that\n    return function (query, callback) {\n      var results = [];\n\n      for (var i = 0, l = data.length; i < l; ++i) {\n        var display = data[i].display || data[i].id;\n\n        if (getSubstringIndex(display, query, ignoreAccents) >= 0) {\n          results.push(data[i]);\n        }\n      }\n\n      return results;\n    };\n  } else {\n    // expect data to be a query function\n    return data;\n  }\n};\n\nvar KEY = {\n  TAB: 9,\n  RETURN: 13,\n  ESC: 27,\n  UP: 38,\n  DOWN: 40\n};\nvar isComposing = false;\nvar propTypes = {\n  /**\r\n   * If set to `true` a regular text input element will be rendered\r\n   * instead of a textarea\r\n   */\n  singleLine: PropTypes.bool,\n  allowSpaceInQuery: PropTypes.bool,\n  allowSuggestionsAboveCursor: PropTypes.bool,\n  forceSuggestionsAboveCursor: PropTypes.bool,\n  ignoreAccents: PropTypes.bool,\n  a11ySuggestionsListLabel: PropTypes.string,\n  value: PropTypes.string,\n  onKeyDown: PropTypes.func,\n  customSuggestionsContainer: PropTypes.func,\n  onSelect: PropTypes.func,\n  onBlur: PropTypes.func,\n  onChange: PropTypes.func,\n  suggestionsPortalHost: typeof Element === 'undefined' ? PropTypes.any : PropTypes.PropTypes.instanceOf(Element),\n  inputRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: typeof Element === 'undefined' ? PropTypes.any : PropTypes.instanceOf(Element)\n  })]),\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.arrayOf(PropTypes.element)]).isRequired\n};\n\nvar MentionsInput = /*#__PURE__*/function (_React$Component) {\n  _inherits(MentionsInput, _React$Component);\n\n  var _super = _createSuper(MentionsInput);\n\n  function MentionsInput(_props) {\n    var _this;\n\n    _classCallCheck(this, MentionsInput);\n\n    _this = _super.call(this, _props);\n\n    _defineProperty(_assertThisInitialized(_this), \"setContainerElement\", function (el) {\n      _this.containerElement = el;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getInputProps\", function () {\n      var _this$props = _this.props,\n          readOnly = _this$props.readOnly,\n          disabled = _this$props.disabled,\n          style = _this$props.style; // pass all props that neither we, nor substyle, consume through to the input control\n\n      var props = omit(_this.props, ['style', 'classNames', 'className'], // substyle props\n      keys(propTypes));\n      return _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, props), style('input')), {}, {\n        value: _this.getPlainText(),\n        onScroll: _this.updateHighlighterScroll\n      }, !readOnly && !disabled && {\n        onChange: _this.handleChange,\n        onSelect: _this.handleSelect,\n        onKeyDown: _this.handleKeyDown,\n        onBlur: _this.handleBlur,\n        onCompositionStart: _this.handleCompositionStart,\n        onCompositionEnd: _this.handleCompositionEnd\n      }), _this.isOpened() && {\n        role: 'combobox',\n        'aria-controls': _this.uuidSuggestionsOverlay,\n        'aria-expanded': true,\n        'aria-autocomplete': 'list',\n        'aria-haspopup': 'listbox',\n        'aria-activedescendant': getSuggestionHtmlId(_this.uuidSuggestionsOverlay, _this.state.focusIndex)\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderControl\", function () {\n      var _this$props2 = _this.props,\n          singleLine = _this$props2.singleLine,\n          style = _this$props2.style;\n\n      var inputProps = _this.getInputProps();\n\n      return /*#__PURE__*/React.createElement(\"div\", style('control'), _this.renderHighlighter(), singleLine ? _this.renderInput(inputProps) : _this.renderTextarea(inputProps));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderInput\", function (props) {\n      return /*#__PURE__*/React.createElement(\"input\", _extends({\n        type: \"text\",\n        ref: _this.setInputRef\n      }, props));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderTextarea\", function (props) {\n      return /*#__PURE__*/React.createElement(\"textarea\", _extends({\n        ref: _this.setInputRef\n      }, props));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setInputRef\", function (el) {\n      _this.inputElement = el;\n      var inputRef = _this.props.inputRef;\n\n      if (typeof inputRef === 'function') {\n        inputRef(el);\n      } else if (inputRef) {\n        inputRef.current = el;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setSuggestionsElement\", function (el) {\n      _this.suggestionsElement = el;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderSuggestionsOverlay\", function () {\n      if (!isNumber(_this.state.selectionStart)) {\n        // do not show suggestions when the input does not have the focus\n        return null;\n      }\n\n      var _this$state$suggestio = _this.state.suggestionsPosition,\n          position = _this$state$suggestio.position,\n          left = _this$state$suggestio.left,\n          top = _this$state$suggestio.top,\n          right = _this$state$suggestio.right;\n      var suggestionsNode = /*#__PURE__*/React.createElement(SuggestionsOverlay$1, {\n        id: _this.uuidSuggestionsOverlay,\n        style: _this.props.style('suggestions'),\n        position: position,\n        left: left,\n        top: top,\n        right: right,\n        focusIndex: _this.state.focusIndex,\n        scrollFocusedIntoView: _this.state.scrollFocusedIntoView,\n        containerRef: _this.setSuggestionsElement,\n        suggestions: _this.state.suggestions,\n        customSuggestionsContainer: _this.props.customSuggestionsContainer,\n        onSelect: _this.addMention,\n        onMouseDown: _this.handleSuggestionsMouseDown,\n        onMouseEnter: _this.handleSuggestionsMouseEnter,\n        isLoading: _this.isLoading(),\n        isOpened: _this.isOpened(),\n        ignoreAccents: _this.props.ignoreAccents,\n        a11ySuggestionsListLabel: _this.props.a11ySuggestionsListLabel\n      }, _this.props.children);\n\n      if (_this.props.suggestionsPortalHost) {\n        return /*#__PURE__*/ReactDOM.createPortal(suggestionsNode, _this.props.suggestionsPortalHost);\n      } else {\n        return suggestionsNode;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderHighlighter\", function () {\n      var _this$state = _this.state,\n          selectionStart = _this$state.selectionStart,\n          selectionEnd = _this$state.selectionEnd;\n      var _this$props3 = _this.props,\n          singleLine = _this$props3.singleLine,\n          children = _this$props3.children,\n          value = _this$props3.value,\n          style = _this$props3.style;\n      return /*#__PURE__*/React.createElement(Highlighter$1, {\n        containerRef: _this.setHighlighterElement,\n        style: style('highlighter'),\n        value: value,\n        singleLine: singleLine,\n        selectionStart: selectionStart,\n        selectionEnd: selectionEnd,\n        onCaretPositionChange: _this.handleCaretPositionChange\n      }, children);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setHighlighterElement\", function (el) {\n      _this.highlighterElement = el;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCaretPositionChange\", function (position) {\n      _this.setState({\n        caretPosition: position\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getPlainText\", function () {\n      return getPlainText(_this.props.value || '', readConfigFromChildren(_this.props.children));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"executeOnChange\", function (event) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (_this.props.onChange) {\n        var _this$props4;\n\n        return (_this$props4 = _this.props).onChange.apply(_this$props4, [event].concat(args));\n      }\n\n      if (_this.props.valueLink) {\n        var _this$props$valueLink;\n\n        return (_this$props$valueLink = _this.props.valueLink).requestChange.apply(_this$props$valueLink, [event.target.value].concat(args));\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (ev) {\n      isComposing = false;\n\n      if (isIE()) {\n        // if we are inside iframe, we need to find activeElement within its contentDocument\n        var currentDocument = document.activeElement && document.activeElement.contentDocument || document;\n\n        if (currentDocument.activeElement !== ev.target) {\n          // fix an IE bug (blur from empty input element with placeholder attribute trigger \"input\" event)\n          return;\n        }\n      }\n\n      var value = _this.props.value || '';\n      var config = readConfigFromChildren(_this.props.children);\n      var newPlainTextValue = ev.target.value; // Derive the new value to set by applying the local change in the textarea's plain text\n\n      var newValue = applyChangeToValue(value, newPlainTextValue, {\n        selectionStartBefore: _this.state.selectionStart,\n        selectionEndBefore: _this.state.selectionEnd,\n        selectionEndAfter: ev.target.selectionEnd\n      }, config); // In case a mention is deleted, also adjust the new plain text value\n\n      newPlainTextValue = getPlainText(newValue, config); // Save current selection after change to be able to restore caret position after rerendering\n\n      var selectionStart = ev.target.selectionStart;\n      var selectionEnd = ev.target.selectionEnd;\n      var setSelectionAfterMentionChange = false; // Adjust selection range in case a mention will be deleted by the characters outside of the\n      // selection range that are automatically deleted\n\n      var startOfMention = findStartOfMentionInPlainText(value, config, selectionStart);\n\n      if (startOfMention !== undefined && _this.state.selectionEnd > startOfMention) {\n        // only if a deletion has taken place\n        selectionStart = startOfMention + (ev.nativeEvent.data ? ev.nativeEvent.data.length : 0);\n        selectionEnd = selectionStart;\n        setSelectionAfterMentionChange = true;\n      }\n\n      _this.setState({\n        selectionStart: selectionStart,\n        selectionEnd: selectionEnd,\n        setSelectionAfterMentionChange: setSelectionAfterMentionChange\n      });\n\n      var mentions = getMentions(newValue, config); // Propagate change\n      // let handleChange = this.getOnChange(this.props) || emptyFunction;\n\n      var eventMock = {\n        target: {\n          value: newValue\n        }\n      }; // this.props.onChange.call(this, eventMock, newValue, newPlainTextValue, mentions);\n\n      _this.executeOnChange(eventMock, newValue, newPlainTextValue, mentions);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSelect\", function (ev) {\n      // keep track of selection range / caret position\n      _this.setState({\n        selectionStart: ev.target.selectionStart,\n        selectionEnd: ev.target.selectionEnd\n      }); // do nothing while a IME composition session is active\n\n\n      if (isComposing) return; // refresh suggestions queries\n\n      var el = _this.inputElement;\n\n      if (ev.target.selectionStart === ev.target.selectionEnd) {\n        _this.updateMentionsQueries(el.value, ev.target.selectionStart);\n      } else {\n        _this.clearSuggestions();\n      } // sync highlighters scroll position\n\n\n      _this.updateHighlighterScroll();\n\n      _this.props.onSelect(ev);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleKeyDown\", function (ev) {\n      // do not intercept key events if the suggestions overlay is not shown\n      var suggestionsCount = countSuggestions(_this.state.suggestions);\n\n      if (suggestionsCount === 0 || !_this.suggestionsElement) {\n        _this.props.onKeyDown(ev);\n\n        return;\n      }\n\n      if (Object.values(KEY).indexOf(ev.keyCode) >= 0) {\n        ev.preventDefault();\n        ev.stopPropagation();\n      }\n\n      switch (ev.keyCode) {\n        case KEY.ESC:\n          {\n            _this.clearSuggestions();\n\n            return;\n          }\n\n        case KEY.DOWN:\n          {\n            _this.shiftFocus(+1);\n\n            return;\n          }\n\n        case KEY.UP:\n          {\n            _this.shiftFocus(-1);\n\n            return;\n          }\n\n        case KEY.RETURN:\n          {\n            _this.selectFocused();\n\n            return;\n          }\n\n        case KEY.TAB:\n          {\n            _this.selectFocused();\n\n            return;\n          }\n\n        default:\n          {\n            return;\n          }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"shiftFocus\", function (delta) {\n      var suggestionsCount = countSuggestions(_this.state.suggestions);\n\n      _this.setState({\n        focusIndex: (suggestionsCount + _this.state.focusIndex + delta) % suggestionsCount,\n        scrollFocusedIntoView: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectFocused\", function () {\n      var _this$state2 = _this.state,\n          suggestions = _this$state2.suggestions,\n          focusIndex = _this$state2.focusIndex;\n      var _Object$values$reduce = Object.values(suggestions).reduce(function (acc, _ref) {\n        var results = _ref.results,\n            queryInfo = _ref.queryInfo;\n        return [].concat(_toConsumableArray(acc), _toConsumableArray(results.map(function (result) {\n          return {\n            result: result,\n            queryInfo: queryInfo\n          };\n        })));\n      }, [])[focusIndex],\n          result = _Object$values$reduce.result,\n          queryInfo = _Object$values$reduce.queryInfo;\n\n      _this.addMention(result, queryInfo);\n\n      _this.setState({\n        focusIndex: 0\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleBlur\", function (ev) {\n      var clickedSuggestion = _this._suggestionsMouseDown;\n      _this._suggestionsMouseDown = false; // only reset selection if the mousedown happened on an element\n      // other than the suggestions overlay\n\n      if (!clickedSuggestion) {\n        _this.setState({\n          selectionStart: null,\n          selectionEnd: null\n        });\n      }\n\n      window.setTimeout(function () {\n        _this.updateHighlighterScroll();\n      }, 1);\n\n      _this.props.onBlur(ev, clickedSuggestion);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSuggestionsMouseDown\", function (ev) {\n      _this._suggestionsMouseDown = true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSuggestionsMouseEnter\", function (focusIndex) {\n      _this.setState({\n        focusIndex: focusIndex,\n        scrollFocusedIntoView: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateSuggestionsPosition\", function () {\n      var caretPosition = _this.state.caretPosition;\n      var _this$props5 = _this.props,\n          suggestionsPortalHost = _this$props5.suggestionsPortalHost,\n          allowSuggestionsAboveCursor = _this$props5.allowSuggestionsAboveCursor,\n          forceSuggestionsAboveCursor = _this$props5.forceSuggestionsAboveCursor;\n\n      if (!caretPosition || !_this.suggestionsElement) {\n        return;\n      }\n\n      var suggestions = _this.suggestionsElement;\n      var highlighter = _this.highlighterElement; // first get viewport-relative position (highlighter is offsetParent of caret):\n\n      var caretOffsetParentRect = highlighter.getBoundingClientRect();\n      var caretHeight = getComputedStyleLengthProp(highlighter, 'font-size');\n      var viewportRelative = {\n        left: caretOffsetParentRect.left + caretPosition.left,\n        top: caretOffsetParentRect.top + caretPosition.top + caretHeight\n      };\n      var viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n\n      if (!suggestions) {\n        return;\n      }\n\n      var position = {}; // if suggestions menu is in a portal, update position to be releative to its portal node\n\n      if (suggestionsPortalHost) {\n        position.position = 'fixed';\n        var left = viewportRelative.left;\n        var top = viewportRelative.top; // absolute/fixed positioned elements are positioned according to their entire box including margins; so we remove margins here:\n\n        left -= getComputedStyleLengthProp(suggestions, 'margin-left');\n        top -= getComputedStyleLengthProp(suggestions, 'margin-top'); // take into account highlighter/textinput scrolling:\n\n        left -= highlighter.scrollLeft;\n        top -= highlighter.scrollTop; // guard for mentions suggestions list clipped by right edge of window\n\n        var viewportWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n\n        if (left + suggestions.offsetWidth > viewportWidth) {\n          position.left = Math.max(0, viewportWidth - suggestions.offsetWidth);\n        } else {\n          position.left = left;\n        } // guard for mentions suggestions list clipped by bottom edge of window if allowSuggestionsAboveCursor set to true.\n        // Move the list up above the caret if it's getting cut off by the bottom of the window, provided that the list height\n        // is small enough to NOT cover up the caret\n\n\n        if (allowSuggestionsAboveCursor && top + suggestions.offsetHeight > viewportHeight && suggestions.offsetHeight < top - caretHeight || forceSuggestionsAboveCursor) {\n          position.top = Math.max(0, top - suggestions.offsetHeight - caretHeight);\n        } else {\n          position.top = top;\n        }\n      } else {\n        var _left = caretPosition.left - highlighter.scrollLeft;\n\n        var _top = caretPosition.top - highlighter.scrollTop; // guard for mentions suggestions list clipped by right edge of window\n\n\n        if (_left + suggestions.offsetWidth > _this.containerElement.offsetWidth) {\n          position.right = 0;\n        } else {\n          position.left = _left;\n        } // guard for mentions suggestions list clipped by bottom edge of window if allowSuggestionsAboveCursor set to true.\n        // move the list up above the caret if it's getting cut off by the bottom of the window, provided that the list height\n        // is small enough to NOT cover up the caret\n\n\n        if (allowSuggestionsAboveCursor && viewportRelative.top - highlighter.scrollTop + suggestions.offsetHeight > viewportHeight && suggestions.offsetHeight < caretOffsetParentRect.top - caretHeight - highlighter.scrollTop || forceSuggestionsAboveCursor) {\n          position.top = _top - suggestions.offsetHeight - caretHeight;\n        } else {\n          position.top = _top;\n        }\n      }\n\n      if (position.left === _this.state.suggestionsPosition.left && position.top === _this.state.suggestionsPosition.top && position.position === _this.state.suggestionsPosition.position) {\n        return;\n      }\n\n      _this.setState({\n        suggestionsPosition: position\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateHighlighterScroll\", function () {\n      var input = _this.inputElement;\n      var highlighter = _this.highlighterElement;\n\n      if (!input || !highlighter) {\n        // since the invocation of this function is deferred,\n        // the whole component may have been unmounted in the meanwhile\n        return;\n      }\n\n      highlighter.scrollLeft = input.scrollLeft;\n      highlighter.scrollTop = input.scrollTop;\n      highlighter.height = input.height;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCompositionStart\", function () {\n      isComposing = true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCompositionEnd\", function () {\n      isComposing = false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setSelection\", function (selectionStart, selectionEnd) {\n      if (selectionStart === null || selectionEnd === null) return;\n      var el = _this.inputElement;\n\n      if (el.setSelectionRange) {\n        el.setSelectionRange(selectionStart, selectionEnd);\n      } else if (el.createTextRange) {\n        var range = el.createTextRange();\n        range.collapse(true);\n        range.moveEnd('character', selectionEnd);\n        range.moveStart('character', selectionStart);\n        range.select();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateMentionsQueries\", function (plainTextValue, caretPosition) {\n      // Invalidate previous queries. Async results for previous queries will be neglected.\n      _this._queryId++;\n      _this.suggestions = {};\n\n      _this.setState({\n        suggestions: {}\n      });\n\n      var value = _this.props.value || '';\n      var children = _this.props.children;\n      var config = readConfigFromChildren(children);\n      var positionInValue = mapPlainTextIndex(value, config, caretPosition, 'NULL'); // If caret is inside of mention, do not query\n\n      if (positionInValue === null) {\n        return;\n      } // Extract substring in between the end of the previous mention and the caret\n\n\n      var substringStartIndex = getEndOfLastMention(value.substring(0, positionInValue), config);\n      var substring = plainTextValue.substring(substringStartIndex, caretPosition); // Check if suggestions have to be shown:\n      // Match the trigger patterns of all Mention children on the extracted substring\n\n      React.Children.forEach(children, function (child, childIndex) {\n        if (!child) {\n          return;\n        }\n\n        var regex = makeTriggerRegex(child.props.trigger, _this.props);\n        var match = substring.match(regex);\n\n        if (match) {\n          var querySequenceStart = substringStartIndex + substring.indexOf(match[1], match.index);\n\n          _this.queryData(match[2], childIndex, querySequenceStart, querySequenceStart + match[1].length, plainTextValue);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clearSuggestions\", function () {\n      // Invalidate previous queries. Async results for previous queries will be neglected.\n      _this._queryId++;\n      _this.suggestions = {};\n\n      _this.setState({\n        suggestions: {},\n        focusIndex: 0\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"queryData\", function (query, childIndex, querySequenceStart, querySequenceEnd, plainTextValue) {\n      var _this$props6 = _this.props,\n          children = _this$props6.children,\n          ignoreAccents = _this$props6.ignoreAccents;\n      var mentionChild = Children.toArray(children)[childIndex];\n      var provideData = getDataProvider(mentionChild.props.data, ignoreAccents);\n      var syncResult = provideData(query, _this.updateSuggestions.bind(null, _this._queryId, childIndex, query, querySequenceStart, querySequenceEnd, plainTextValue));\n\n      if (syncResult instanceof Array) {\n        _this.updateSuggestions(_this._queryId, childIndex, query, querySequenceStart, querySequenceEnd, plainTextValue, syncResult);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateSuggestions\", function (queryId, childIndex, query, querySequenceStart, querySequenceEnd, plainTextValue, results) {\n      // neglect async results from previous queries\n      if (queryId !== _this._queryId) return; // save in property so that multiple sync state updates from different mentions sources\n      // won't overwrite each other\n\n      _this.suggestions = _objectSpread(_objectSpread({}, _this.suggestions), {}, _defineProperty({}, childIndex, {\n        queryInfo: {\n          childIndex: childIndex,\n          query: query,\n          querySequenceStart: querySequenceStart,\n          querySequenceEnd: querySequenceEnd,\n          plainTextValue: plainTextValue\n        },\n        results: results\n      }));\n      var focusIndex = _this.state.focusIndex;\n      var suggestionsCount = countSuggestions(_this.suggestions);\n\n      _this.setState({\n        suggestions: _this.suggestions,\n        focusIndex: focusIndex >= suggestionsCount ? Math.max(suggestionsCount - 1, 0) : focusIndex\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addMention\", function (_ref2, _ref3) {\n      var id = _ref2.id,\n          display = _ref2.display;\n      var childIndex = _ref3.childIndex,\n          querySequenceStart = _ref3.querySequenceStart,\n          querySequenceEnd = _ref3.querySequenceEnd,\n          plainTextValue = _ref3.plainTextValue; // Insert mention in the marked up value at the correct position\n\n      var value = _this.props.value || '';\n      var config = readConfigFromChildren(_this.props.children);\n      var mentionsChild = Children.toArray(_this.props.children)[childIndex];\n      var _mentionsChild$props = mentionsChild.props,\n          markup = _mentionsChild$props.markup,\n          displayTransform = _mentionsChild$props.displayTransform,\n          appendSpaceOnAdd = _mentionsChild$props.appendSpaceOnAdd,\n          onAdd = _mentionsChild$props.onAdd;\n      var start = mapPlainTextIndex(value, config, querySequenceStart, 'START');\n      var end = start + querySequenceEnd - querySequenceStart;\n      var insert = makeMentionsMarkup(markup, id, display);\n\n      if (appendSpaceOnAdd) {\n        insert += ' ';\n      }\n\n      var newValue = spliceString(value, start, end, insert); // Refocus input and set caret position to end of mention\n\n      _this.inputElement.focus();\n\n      var displayValue = displayTransform(id, display);\n\n      if (appendSpaceOnAdd) {\n        displayValue += ' ';\n      }\n\n      var newCaretPosition = querySequenceStart + displayValue.length;\n\n      _this.setState({\n        selectionStart: newCaretPosition,\n        selectionEnd: newCaretPosition,\n        setSelectionAfterMentionChange: true\n      }); // Propagate change\n\n\n      var eventMock = {\n        target: {\n          value: newValue\n        }\n      };\n      var mentions = getMentions(newValue, config);\n      var newPlainTextValue = spliceString(plainTextValue, querySequenceStart, querySequenceEnd, displayValue);\n\n      _this.executeOnChange(eventMock, newValue, newPlainTextValue, mentions);\n\n      if (onAdd) {\n        onAdd(id, display, start, end);\n      } // Make sure the suggestions overlay is closed\n\n\n      _this.clearSuggestions();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isLoading\", function () {\n      var isLoading = false;\n      React.Children.forEach(_this.props.children, function (child) {\n        isLoading = isLoading || child && child.props.isLoading;\n      });\n      return isLoading;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isOpened\", function () {\n      return isNumber(_this.state.selectionStart) && (countSuggestions(_this.state.suggestions) !== 0 || _this.isLoading());\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_queryId\", 0);\n\n    _this.suggestions = {};\n    _this.uuidSuggestionsOverlay = Math.random().toString(16).substring(2);\n    _this.handleCopy = _this.handleCopy.bind(_assertThisInitialized(_this));\n    _this.handleCut = _this.handleCut.bind(_assertThisInitialized(_this));\n    _this.handlePaste = _this.handlePaste.bind(_assertThisInitialized(_this));\n    _this.state = {\n      focusIndex: 0,\n      selectionStart: null,\n      selectionEnd: null,\n      suggestions: {},\n      caretPosition: null,\n      suggestionsPosition: {}\n    };\n    return _this;\n  }\n\n  _createClass(MentionsInput, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener('copy', this.handleCopy);\n      document.addEventListener('cut', this.handleCut);\n      document.addEventListener('paste', this.handlePaste);\n      this.updateSuggestionsPosition();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      // Update position of suggestions unless this componentDidUpdate was\n      // triggered by an update to suggestionsPosition.\n      if (prevState.suggestionsPosition === this.state.suggestionsPosition) {\n        this.updateSuggestionsPosition();\n      } // maintain selection in case a mention is added/removed causing\n      // the cursor to jump to the end\n\n\n      if (this.state.setSelectionAfterMentionChange) {\n        this.setState({\n          setSelectionAfterMentionChange: false\n        });\n        this.setSelection(this.state.selectionStart, this.state.selectionEnd);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('copy', this.handleCopy);\n      document.removeEventListener('cut', this.handleCut);\n      document.removeEventListener('paste', this.handlePaste);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", _extends({\n        ref: this.setContainerElement\n      }, this.props.style), this.renderControl(), this.renderSuggestionsOverlay());\n    }\n  }, {\n    key: \"handlePaste\",\n    value: function handlePaste(event) {\n      if (event.target !== this.inputElement) {\n        return;\n      }\n\n      if (!this.supportsClipboardActions(event)) {\n        return;\n      }\n\n      event.preventDefault();\n      var _this$state3 = this.state,\n          selectionStart = _this$state3.selectionStart,\n          selectionEnd = _this$state3.selectionEnd;\n      var _this$props7 = this.props,\n          value = _this$props7.value,\n          children = _this$props7.children;\n      var config = readConfigFromChildren(children);\n      var markupStartIndex = mapPlainTextIndex(value, config, selectionStart, 'START');\n      var markupEndIndex = mapPlainTextIndex(value, config, selectionEnd, 'END');\n      var pastedMentions = event.clipboardData.getData('text/react-mentions');\n      var pastedData = event.clipboardData.getData('text/plain');\n      var newValue = spliceString(value, markupStartIndex, markupEndIndex, pastedMentions || pastedData).replace(/\\r/g, '');\n      var newPlainTextValue = getPlainText(newValue, config);\n      var eventMock = {\n        target: _objectSpread(_objectSpread({}, event.target), {}, {\n          value: newValue\n        })\n      };\n      this.executeOnChange(eventMock, newValue, newPlainTextValue, getMentions(newValue, config)); // Move the cursor position to the end of the pasted data\n\n      var startOfMention = findStartOfMentionInPlainText(value, config, selectionStart);\n      var nextPos = (startOfMention || selectionStart) + getPlainText(pastedMentions || pastedData, config).length;\n      this.setSelection(nextPos, nextPos);\n    }\n  }, {\n    key: \"saveSelectionToClipboard\",\n    value: function saveSelectionToClipboard(event) {\n      // use the actual selectionStart & selectionEnd instead of the one stored\n      // in state to ensure copy & paste also works on disabled inputs & textareas\n      var selectionStart = this.inputElement.selectionStart;\n      var selectionEnd = this.inputElement.selectionEnd;\n      var _this$props8 = this.props,\n          children = _this$props8.children,\n          value = _this$props8.value;\n      var config = readConfigFromChildren(children);\n      var markupStartIndex = mapPlainTextIndex(value, config, selectionStart, 'START');\n      var markupEndIndex = mapPlainTextIndex(value, config, selectionEnd, 'END');\n      event.clipboardData.setData('text/plain', event.target.value.slice(selectionStart, selectionEnd));\n      event.clipboardData.setData('text/react-mentions', value.slice(markupStartIndex, markupEndIndex));\n    }\n  }, {\n    key: \"supportsClipboardActions\",\n    value: function supportsClipboardActions(event) {\n      return !!event.clipboardData;\n    }\n  }, {\n    key: \"handleCopy\",\n    value: function handleCopy(event) {\n      if (event.target !== this.inputElement) {\n        return;\n      }\n\n      if (!this.supportsClipboardActions(event)) {\n        return;\n      }\n\n      event.preventDefault();\n      this.saveSelectionToClipboard(event);\n    }\n  }, {\n    key: \"handleCut\",\n    value: function handleCut(event) {\n      if (event.target !== this.inputElement) {\n        return;\n      }\n\n      if (!this.supportsClipboardActions(event)) {\n        return;\n      }\n\n      event.preventDefault();\n      this.saveSelectionToClipboard(event);\n      var _this$state4 = this.state,\n          selectionStart = _this$state4.selectionStart,\n          selectionEnd = _this$state4.selectionEnd;\n      var _this$props9 = this.props,\n          children = _this$props9.children,\n          value = _this$props9.value;\n      var config = readConfigFromChildren(children);\n      var markupStartIndex = mapPlainTextIndex(value, config, selectionStart, 'START');\n      var markupEndIndex = mapPlainTextIndex(value, config, selectionEnd, 'END');\n      var newValue = [value.slice(0, markupStartIndex), value.slice(markupEndIndex)].join('');\n      var newPlainTextValue = getPlainText(newValue, config);\n      var eventMock = {\n        target: _objectSpread(_objectSpread({}, event.target), {}, {\n          value: newPlainTextValue\n        })\n      };\n      this.executeOnChange(eventMock, newValue, newPlainTextValue, getMentions(value, config));\n    } // Handle input element's change event\n\n  }]);\n\n  return MentionsInput;\n}(React.Component);\n/**\r\n * Returns the computed length property value for the provided element.\r\n * Note: According to spec and testing, can count on length values coming back in pixels. See https://developer.mozilla.org/en-US/docs/Web/CSS/used_value#Difference_from_computed_value\r\n */\n\n\n_defineProperty(MentionsInput, \"propTypes\", propTypes);\n\n_defineProperty(MentionsInput, \"defaultProps\", {\n  ignoreAccents: false,\n  singleLine: false,\n  allowSuggestionsAboveCursor: false,\n  onKeyDown: function onKeyDown() {\n    return null;\n  },\n  onSelect: function onSelect() {\n    return null;\n  },\n  onBlur: function onBlur() {\n    return null;\n  }\n});\n\nvar getComputedStyleLengthProp = function getComputedStyleLengthProp(forElement, propertyName) {\n  var length = parseFloat(window.getComputedStyle(forElement, null).getPropertyValue(propertyName));\n  return isFinite(length) ? length : 0;\n};\n\nvar isMobileSafari = typeof navigator !== 'undefined' && /iPhone|iPad|iPod/i.test(navigator.userAgent);\nvar styled$3 = createDefaultStyle({\n  position: 'relative',\n  overflowY: 'visible',\n  input: {\n    display: 'block',\n    width: '100%',\n    position: 'absolute',\n    margin: 0,\n    top: 0,\n    left: 0,\n    boxSizing: 'border-box',\n    backgroundColor: 'transparent',\n    fontFamily: 'inherit',\n    fontSize: 'inherit',\n    letterSpacing: 'inherit'\n  },\n  '&multiLine': {\n    input: _objectSpread({\n      height: '100%',\n      bottom: 0,\n      overflow: 'hidden',\n      resize: 'none'\n    }, isMobileSafari ? {\n      marginTop: 1,\n      marginLeft: -3\n    } : null)\n  }\n}, function (_ref4) {\n  var singleLine = _ref4.singleLine;\n  return {\n    '&singleLine': singleLine,\n    '&multiLine': !singleLine\n  };\n});\nvar MentionsInput$1 = styled$3(MentionsInput);\nvar defaultStyle = {\n  fontWeight: 'inherit'\n};\n\nvar Mention = function Mention(_ref) {\n  var display = _ref.display,\n      style = _ref.style,\n      className = _ref.className,\n      classNames = _ref.classNames;\n  var styles = useStyles(defaultStyle, {\n    style: style,\n    className: className,\n    classNames: classNames\n  });\n  return /*#__PURE__*/React.createElement(\"strong\", styles, display);\n};\n\nMention.propTypes = {\n  /**\r\n   * Called when a new mention is added in the input\r\n   *\r\n   * Example:\r\n   *\r\n   * ```js\r\n   * function(id, display) {\r\n   *   console.log(\"user \" + display + \" was mentioned!\");\r\n   * }\r\n   * ```\r\n   */\n  onAdd: PropTypes.func,\n  onRemove: PropTypes.func,\n  renderSuggestion: PropTypes.func,\n  trigger: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(RegExp)]),\n  markup: PropTypes.string,\n  displayTransform: PropTypes.func,\n\n  /**\r\n   * If set to `true` spaces will not interrupt matching suggestions\r\n   */\n  allowSpaceInQuery: PropTypes.bool,\n  isLoading: PropTypes.bool\n};\nMention.defaultProps = {\n  trigger: '@',\n  markup: '@[__display__](__id__)',\n  displayTransform: function displayTransform(id, display) {\n    return display || id;\n  },\n  onAdd: function onAdd() {\n    return null;\n  },\n  onRemove: function onRemove() {\n    return null;\n  },\n  renderSuggestion: null,\n  isLoading: false,\n  appendSpaceOnAdd: false\n};\nexport { Mention, MentionsInput$1 as MentionsInput };","map":{"version":3,"names":["_toConsumableArray","_extends","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","React","Children","useState","useEffect","invariant","_slicedToArray","_objectWithoutProperties","useStyles","inline","PropTypes","ReactDOM","escapeRegex","str","replace","PLACEHOLDERS","id","display","findPositionOfCapturingGroup","markup","parameterName","concat","indexDisplay","indexOf","indexId","combineRegExps","regExps","serializedRegexParser","RegExp","map","regex","_serializedRegexParse","exec","toString","_serializedRegexParse2","regexString","regexFlags","join","countPlaceholders","count","emptyFn","iterateMentionsMarkup","value","config","markupIteratee","textIteratee","arguments","length","undefined","c","accOffset","captureGroupOffsets","_ref","result","match","start","currentPlainTextIndex","offset","find","o","mentionChildIndex","_config$mentionChildI","displayTransform","idPos","displayPos","substr","substring","index","lastIndex","getPlainText","plainTextIndex","plainText","mapPlainTextIndex","indexInPlainText","inMarkupCorrection","substrPlainTextIndex","mentionPlainTextIndex","childIndex","lastMentionEndIndex","spliceString","end","insert","applyChangeToValue","plainTextValue","selectionStartBefore","selectionEndBefore","selectionEndAfter","oldPlainTextValue","lengthDelta","slice","spliceStart","Math","min","spliceEnd","max","mappedSpliceStart","mappedSpliceEnd","controlSpliceStart","controlSpliceEnd","willRemoveMention","newValue","controlPlainTextValue","lastIndexOf","findStartOfMentionInPlainText","foundMention","getMentions","mentions","push","getSuggestionHtmlId","prefix","countSuggestions","suggestions","Object","values","reduce","acc","results","getEndOfLastMention","lastMention","markupToRegex","escapedMarkup","charAfterDisplay","charAfterId","readConfigFromChildren","children","toArray","_ref$props","props","coerceCapturingGroups","numberOfGroups","numberOfPlaceholders","makeMentionsMarkup","lettersDiacritics","base","letters","removeAccents","formattedStr","forEach","letterDiacritics","normalizeString","toLowerCase","getSubstringIndex","ignoreAccents","isIE","document","documentMode","isNumber","val","keys","obj","omit","_len","rest","Array","_key","apply","k","hasOwnProperty","includes","_excluded","createDefaultStyle","defaultStyle","getModifiers","enhance","ComponentToWrap","DefaultStyleEnhancer","style","className","classNames","modifiers","styles","createElement","displayName","name","_generateComponentKey","usedKeys","Highlighter","selectionStart","selectionEnd","_ref$value","onCaretPositionChange","containerRef","singleLine","_useState","left","top","_useState2","position","setPosition","_useState3","_useState4","caretElement","setCaretElement","notifyCaretPosition","offsetLeft","offsetTop","newPosition","caretPositionInMarkup","resultComponents","componentKeys","components","substringComponentKey","splitIndex","renderSubstring","mentionIteratee","key","getMentionComponentForMatch","string","child","cloneElement","renderHighlighterCaret","ref","propTypes","number","isRequired","func","oneOfType","shape","current","Element","any","instanceOf","element","arrayOf","styled","boxSizing","width","color","overflow","whiteSpace","wordWrap","border","textAlign","visibility","Highlighter$1","Suggestion","focused","onClick","onMouseEnter","query","renderSuggestion","suggestion","renderContent","getDisplay","highlightedDisplay","renderHighlightedDisplay","i","role","bool","styled$1","cursor","Suggestion$1","LoadingIndicator","defaultstyle","spinnerStyles","SuggestionsOverlay","_ref$suggestions","a11ySuggestionsListLabel","focusIndex","right","scrollFocusedIntoView","isLoading","isOpened","_ref$onSelect","onSelect","customSuggestionsContainer","onMouseDown","ulElement","setUlElement","offsetHeight","scrollHeight","scrollTop","_ulElement$children$f","getBoundingClientRect","bottom","_ulElement$getBoundin","topContainer","renderSuggestions","suggestionsToRender","accResults","_ref2","queryInfo","isFocused","getID","select","handleMouseEnter","renderLoadingIndicator","ev","object","styled$2","zIndex","backgroundColor","marginTop","minWidth","list","margin","padding","listStyleType","SuggestionsOverlay$1","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","target","source","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","NewTarget","constructor","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","makeTriggerRegex","trigger","options","allowSpaceInQuery","escapedTriggerChar","getDataProvider","data","callback","l","KEY","TAB","RETURN","ESC","UP","DOWN","isComposing","allowSuggestionsAboveCursor","forceSuggestionsAboveCursor","onKeyDown","onBlur","onChange","suggestionsPortalHost","inputRef","MentionsInput","_React$Component","_super","_props","_this","el","containerElement","_this$props","readOnly","disabled","onScroll","updateHighlighterScroll","handleChange","handleSelect","handleKeyDown","handleBlur","onCompositionStart","handleCompositionStart","onCompositionEnd","handleCompositionEnd","uuidSuggestionsOverlay","state","_this$props2","inputProps","getInputProps","renderHighlighter","renderInput","renderTextarea","type","setInputRef","inputElement","suggestionsElement","_this$state$suggestio","suggestionsPosition","suggestionsNode","setSuggestionsElement","addMention","handleSuggestionsMouseDown","handleSuggestionsMouseEnter","createPortal","_this$state","_this$props3","setHighlighterElement","handleCaretPositionChange","highlighterElement","setState","caretPosition","event","args","_this$props4","valueLink","_this$props$valueLink","requestChange","currentDocument","activeElement","contentDocument","newPlainTextValue","setSelectionAfterMentionChange","startOfMention","nativeEvent","eventMock","executeOnChange","updateMentionsQueries","clearSuggestions","suggestionsCount","keyCode","preventDefault","stopPropagation","shiftFocus","selectFocused","delta","_this$state2","_Object$values$reduce","clickedSuggestion","_suggestionsMouseDown","window","setTimeout","_this$props5","highlighter","caretOffsetParentRect","caretHeight","getComputedStyleLengthProp","viewportRelative","viewportHeight","documentElement","clientHeight","innerHeight","scrollLeft","viewportWidth","clientWidth","innerWidth","offsetWidth","_left","_top","input","height","setSelectionRange","createTextRange","range","collapse","moveEnd","moveStart","_queryId","positionInValue","substringStartIndex","querySequenceStart","queryData","querySequenceEnd","_this$props6","mentionChild","provideData","syncResult","updateSuggestions","bind","queryId","_ref3","mentionsChild","_mentionsChild$props","appendSpaceOnAdd","onAdd","focus","displayValue","newCaretPosition","random","handleCopy","handleCut","handlePaste","componentDidMount","addEventListener","updateSuggestionsPosition","componentDidUpdate","prevProps","prevState","setSelection","componentWillUnmount","removeEventListener","render","setContainerElement","renderControl","renderSuggestionsOverlay","supportsClipboardActions","_this$state3","_this$props7","markupStartIndex","markupEndIndex","pastedMentions","clipboardData","getData","pastedData","nextPos","saveSelectionToClipboard","_this$props8","setData","_this$state4","_this$props9","Component","forElement","propertyName","parseFloat","getComputedStyle","getPropertyValue","isFinite","isMobileSafari","navigator","test","userAgent","styled$3","overflowY","fontFamily","fontSize","letterSpacing","resize","marginLeft","_ref4","MentionsInput$1","fontWeight","Mention","onRemove","defaultProps"],"sources":["C:/Users/brosk/Documents/Web Dev/modern-web-development-project/project/node_modules/react-mentions/dist/react-mentions.esm.js"],"sourcesContent":["import _toConsumableArray from '@babel/runtime/helpers/esm/toConsumableArray';\r\nimport _extends from '@babel/runtime/helpers/esm/extends';\r\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\r\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\r\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\r\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\r\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\r\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\r\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\r\nimport React, { Children, useState, useEffect } from 'react';\r\nimport invariant from 'invariant';\r\nimport _slicedToArray from '@babel/runtime/helpers/esm/slicedToArray';\r\nimport _objectWithoutProperties from '@babel/runtime/helpers/esm/objectWithoutProperties';\r\nimport useStyles, { inline } from 'substyle';\r\nimport PropTypes from 'prop-types';\r\nimport ReactDOM from 'react-dom';\r\n\r\n// escape RegExp special characters https://stackoverflow.com/a/9310752/5142490\r\nvar escapeRegex = function escapeRegex(str) {\r\n  return str.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\r\n};\r\n\r\nvar PLACEHOLDERS = {\r\n  id: '__id__',\r\n  display: '__display__'\r\n};\r\n\r\nvar findPositionOfCapturingGroup = function findPositionOfCapturingGroup(markup, parameterName) {\r\n  invariant(parameterName === 'id' || parameterName === 'display', \"Second arg must be either \\\"id\\\" or \\\"display\\\", got: \\\"\".concat(parameterName, \"\\\"\")); // find positions of placeholders in the markup\r\n\r\n  var indexDisplay = markup.indexOf(PLACEHOLDERS.display);\r\n  var indexId = markup.indexOf(PLACEHOLDERS.id); // set indices to null if not found\r\n\r\n  if (indexDisplay < 0) indexDisplay = null;\r\n  if (indexId < 0) indexId = null; // markup must contain one of the mandatory placeholders\r\n\r\n  invariant(indexDisplay !== null || indexId !== null, \"The markup '\".concat(markup, \"' does not contain either of the placeholders '__id__' or '__display__'\"));\r\n\r\n  if (indexDisplay !== null && indexId !== null) {\r\n    // both placeholders are used, return 0 or 1 depending on the position of the requested parameter\r\n    return parameterName === 'id' && indexId <= indexDisplay || parameterName === 'display' && indexDisplay <= indexId ? 0 : 1;\r\n  } // just one placeholder is being used, we'll use the captured string for both parameters\r\n\r\n\r\n  return 0;\r\n};\r\n\r\nvar combineRegExps = function combineRegExps(regExps) {\r\n  var serializedRegexParser = /^\\/(.+)\\/(\\w+)?$/;\r\n  return new RegExp(regExps.map(function (regex) {\r\n    var _serializedRegexParse = serializedRegexParser.exec(regex.toString()),\r\n        _serializedRegexParse2 = _slicedToArray(_serializedRegexParse, 3),\r\n        regexString = _serializedRegexParse2[1],\r\n        regexFlags = _serializedRegexParse2[2];\r\n\r\n    invariant(!regexFlags, \"RegExp flags are not supported. Change /\".concat(regexString, \"/\").concat(regexFlags, \" into /\").concat(regexString, \"/\"));\r\n    return \"(\".concat(regexString, \")\");\r\n  }).join('|'), 'g');\r\n};\r\n\r\nvar countPlaceholders = function countPlaceholders(markup) {\r\n  var count = 0;\r\n  if (markup.indexOf('__id__') >= 0) count++;\r\n  if (markup.indexOf('__display__') >= 0) count++;\r\n  return count;\r\n};\r\n\r\nvar emptyFn = function emptyFn() {}; // Finds all occurrences of the markup in the value and calls the `markupIteratee` callback for each of them.\r\n// The optional `textIteratee` callback is called for each plain text ranges in between these markup occurrences.\r\n\r\n\r\nvar iterateMentionsMarkup = function iterateMentionsMarkup(value, config, markupIteratee) {\r\n  var textIteratee = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : emptyFn;\r\n  var regex = combineRegExps(config.map(function (c) {\r\n    return c.regex;\r\n  }));\r\n  var accOffset = 2; // first is whole match, second is the for the capturing group of first regexp component\r\n\r\n  var captureGroupOffsets = config.map(function (_ref) {\r\n    var markup = _ref.markup;\r\n    var result = accOffset; // + 1 is for the capturing group we add around each regexp component in combineRegExps\r\n\r\n    accOffset += countPlaceholders(markup) + 1;\r\n    return result;\r\n  });\r\n  var match;\r\n  var start = 0;\r\n  var currentPlainTextIndex = 0; // detect all mention markup occurrences in the value and iterate the matches\r\n\r\n  while ((match = regex.exec(value)) !== null) {\r\n    var offset = captureGroupOffsets.find(function (o) {\r\n      return !!match[o];\r\n    }); // eslint-disable-line no-loop-func\r\n\r\n    var mentionChildIndex = captureGroupOffsets.indexOf(offset);\r\n    var _config$mentionChildI = config[mentionChildIndex],\r\n        markup = _config$mentionChildI.markup,\r\n        displayTransform = _config$mentionChildI.displayTransform;\r\n    var idPos = offset + findPositionOfCapturingGroup(markup, 'id');\r\n    var displayPos = offset + findPositionOfCapturingGroup(markup, 'display');\r\n    var id = match[idPos];\r\n    var display = displayTransform(id, match[displayPos]);\r\n    var substr = value.substring(start, match.index);\r\n    textIteratee(substr, start, currentPlainTextIndex);\r\n    currentPlainTextIndex += substr.length;\r\n    markupIteratee(match[0], match.index, currentPlainTextIndex, id, display, mentionChildIndex, start);\r\n    currentPlainTextIndex += display.length;\r\n    start = regex.lastIndex;\r\n  }\r\n\r\n  if (start < value.length) {\r\n    textIteratee(value.substring(start), start, currentPlainTextIndex);\r\n  }\r\n};\r\n\r\nvar getPlainText = function getPlainText(value, config) {\r\n  var result = '';\r\n  iterateMentionsMarkup(value, config, function (match, index, plainTextIndex, id, display) {\r\n    result += display;\r\n  }, function (plainText) {\r\n    result += plainText;\r\n  });\r\n  return result;\r\n};\r\n\r\n// in the marked up value string.\r\n// If the passed character index lies inside a mention, the value of `inMarkupCorrection` defines the\r\n// correction to apply:\r\n//   - 'START' to return the index of the mention markup's first char (default)\r\n//   - 'END' to return the index after its last char\r\n//   - 'NULL' to return null\r\n\r\nvar mapPlainTextIndex = function mapPlainTextIndex(value, config, indexInPlainText) {\r\n  var inMarkupCorrection = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'START';\r\n\r\n  if (typeof indexInPlainText !== 'number') {\r\n    return indexInPlainText;\r\n  }\r\n\r\n  var result;\r\n\r\n  var textIteratee = function textIteratee(substr, index, substrPlainTextIndex) {\r\n    if (result !== undefined) return;\r\n\r\n    if (substrPlainTextIndex + substr.length >= indexInPlainText) {\r\n      // found the corresponding position in the current plain text range\r\n      result = index + indexInPlainText - substrPlainTextIndex;\r\n    }\r\n  };\r\n\r\n  var markupIteratee = function markupIteratee(markup, index, mentionPlainTextIndex, id, display, childIndex, lastMentionEndIndex) {\r\n    if (result !== undefined) return;\r\n\r\n    if (mentionPlainTextIndex + display.length > indexInPlainText) {\r\n      // found the corresponding position inside current match,\r\n      // return the index of the first or after the last char of the matching markup\r\n      // depending on whether the `inMarkupCorrection`\r\n      if (inMarkupCorrection === 'NULL') {\r\n        result = null;\r\n      } else {\r\n        result = index + (inMarkupCorrection === 'END' ? markup.length : 0);\r\n      }\r\n    }\r\n  };\r\n\r\n  iterateMentionsMarkup(value, config, markupIteratee, textIteratee); // when a mention is at the end of the value and we want to get the caret position\r\n  // at the end of the string, result is undefined\r\n\r\n  return result === undefined ? value.length : result;\r\n};\r\n\r\nvar spliceString = function spliceString(str, start, end, insert) {\r\n  return str.substring(0, start) + insert + str.substring(end);\r\n};\r\n\r\n// guided by the textarea text selection ranges before and after the change\r\n\r\nvar applyChangeToValue = function applyChangeToValue(value, plainTextValue, _ref, config) {\r\n  var selectionStartBefore = _ref.selectionStartBefore,\r\n      selectionEndBefore = _ref.selectionEndBefore,\r\n      selectionEndAfter = _ref.selectionEndAfter;\r\n  var oldPlainTextValue = getPlainText(value, config);\r\n  var lengthDelta = oldPlainTextValue.length - plainTextValue.length;\r\n\r\n  if (selectionStartBefore === 'undefined') {\r\n    selectionStartBefore = selectionEndAfter + lengthDelta;\r\n  }\r\n\r\n  if (selectionEndBefore === 'undefined') {\r\n    selectionEndBefore = selectionStartBefore;\r\n  } // Fixes an issue with replacing combined characters for complex input. Eg like acented letters on OSX\r\n\r\n\r\n  if (selectionStartBefore === selectionEndBefore && selectionEndBefore === selectionEndAfter && oldPlainTextValue.length === plainTextValue.length) {\r\n    selectionStartBefore = selectionStartBefore - 1;\r\n  } // extract the insertion from the new plain text value\r\n\r\n\r\n  var insert = plainTextValue.slice(selectionStartBefore, selectionEndAfter); // handling for Backspace key with no range selection\r\n\r\n  var spliceStart = Math.min(selectionStartBefore, selectionEndAfter);\r\n  var spliceEnd = selectionEndBefore;\r\n\r\n  if (selectionStartBefore === selectionEndAfter) {\r\n    // handling for Delete key with no range selection\r\n    spliceEnd = Math.max(selectionEndBefore, selectionStartBefore + lengthDelta);\r\n  }\r\n\r\n  var mappedSpliceStart = mapPlainTextIndex(value, config, spliceStart, 'START');\r\n  var mappedSpliceEnd = mapPlainTextIndex(value, config, spliceEnd, 'END');\r\n  var controlSpliceStart = mapPlainTextIndex(value, config, spliceStart, 'NULL');\r\n  var controlSpliceEnd = mapPlainTextIndex(value, config, spliceEnd, 'NULL');\r\n  var willRemoveMention = controlSpliceStart === null || controlSpliceEnd === null;\r\n  var newValue = spliceString(value, mappedSpliceStart, mappedSpliceEnd, insert);\r\n\r\n  if (!willRemoveMention) {\r\n    // test for auto-completion changes\r\n    var controlPlainTextValue = getPlainText(newValue, config);\r\n\r\n    if (controlPlainTextValue !== plainTextValue) {\r\n      // some auto-correction is going on\r\n      // find start of diff\r\n      spliceStart = 0;\r\n\r\n      while (plainTextValue[spliceStart] === controlPlainTextValue[spliceStart]) {\r\n        spliceStart++;\r\n      } // extract auto-corrected insertion\r\n\r\n\r\n      insert = plainTextValue.slice(spliceStart, selectionEndAfter); // find index of the unchanged remainder\r\n\r\n      spliceEnd = oldPlainTextValue.lastIndexOf(plainTextValue.substring(selectionEndAfter)); // re-map the corrected indices\r\n\r\n      mappedSpliceStart = mapPlainTextIndex(value, config, spliceStart, 'START');\r\n      mappedSpliceEnd = mapPlainTextIndex(value, config, spliceEnd, 'END');\r\n      newValue = spliceString(value, mappedSpliceStart, mappedSpliceEnd, insert);\r\n    }\r\n  }\r\n\r\n  return newValue;\r\n};\r\n\r\n// returns a the index of of the first char of the mention in the plain text.\r\n// If indexInPlainText does not lie inside a mention, returns indexInPlainText.\r\n\r\nvar findStartOfMentionInPlainText = function findStartOfMentionInPlainText(value, config, indexInPlainText) {\r\n  var result = indexInPlainText;\r\n  var foundMention = false;\r\n\r\n  var markupIteratee = function markupIteratee(markup, index, mentionPlainTextIndex, id, display, childIndex, lastMentionEndIndex) {\r\n    if (mentionPlainTextIndex <= indexInPlainText && mentionPlainTextIndex + display.length > indexInPlainText) {\r\n      result = mentionPlainTextIndex;\r\n      foundMention = true;\r\n    }\r\n  };\r\n\r\n  iterateMentionsMarkup(value, config, markupIteratee);\r\n\r\n  if (foundMention) {\r\n    return result;\r\n  }\r\n};\r\n\r\nvar getMentions = function getMentions(value, config) {\r\n  var mentions = [];\r\n  iterateMentionsMarkup(value, config, function (match, index, plainTextIndex, id, display, childIndex, start) {\r\n    mentions.push({\r\n      id: id,\r\n      display: display,\r\n      childIndex: childIndex,\r\n      index: index,\r\n      plainTextIndex: plainTextIndex\r\n    });\r\n  });\r\n  return mentions;\r\n};\r\n\r\nvar getSuggestionHtmlId = function getSuggestionHtmlId(prefix, id) {\r\n  return \"\".concat(prefix, \"-\").concat(id);\r\n};\r\n\r\nvar countSuggestions = function countSuggestions(suggestions) {\r\n  return Object.values(suggestions).reduce(function (acc, _ref) {\r\n    var results = _ref.results;\r\n    return acc + results.length;\r\n  }, 0);\r\n};\r\n\r\nvar getEndOfLastMention = function getEndOfLastMention(value, config) {\r\n  var mentions = getMentions(value, config);\r\n  var lastMention = mentions[mentions.length - 1];\r\n  return lastMention ? lastMention.plainTextIndex + lastMention.display.length : 0;\r\n};\r\n\r\nvar markupToRegex = function markupToRegex(markup) {\r\n  var escapedMarkup = escapeRegex(markup);\r\n  var charAfterDisplay = markup[markup.indexOf(PLACEHOLDERS.display) + PLACEHOLDERS.display.length];\r\n  var charAfterId = markup[markup.indexOf(PLACEHOLDERS.id) + PLACEHOLDERS.id.length];\r\n  return new RegExp(escapedMarkup.replace(PLACEHOLDERS.display, \"([^\".concat(escapeRegex(charAfterDisplay || ''), \"]+?)\")).replace(PLACEHOLDERS.id, \"([^\".concat(escapeRegex(charAfterId || ''), \"]+?)\")));\r\n};\r\n\r\nvar readConfigFromChildren = function readConfigFromChildren(children) {\r\n  return Children.toArray(children).map(function (_ref) {\r\n    var _ref$props = _ref.props,\r\n        markup = _ref$props.markup,\r\n        regex = _ref$props.regex,\r\n        displayTransform = _ref$props.displayTransform;\r\n    return {\r\n      markup: markup,\r\n      regex: regex ? coerceCapturingGroups(regex, markup) : markupToRegex(markup),\r\n      displayTransform: displayTransform || function (id, display) {\r\n        return display || id;\r\n      }\r\n    };\r\n  });\r\n}; // make sure that the custom regex defines the correct number of capturing groups\r\n\r\n\r\nvar coerceCapturingGroups = function coerceCapturingGroups(regex, markup) {\r\n  var numberOfGroups = new RegExp(regex.toString() + '|').exec('').length - 1;\r\n  var numberOfPlaceholders = countPlaceholders(markup);\r\n  invariant(numberOfGroups === numberOfPlaceholders, \"Number of capturing groups in RegExp \".concat(regex.toString(), \" (\").concat(numberOfGroups, \") does not match the number of placeholders in the markup '\").concat(markup, \"' (\").concat(numberOfPlaceholders, \")\"));\r\n  return regex;\r\n};\r\n\r\nvar makeMentionsMarkup = function makeMentionsMarkup(markup, id, display) {\r\n  return markup.replace(PLACEHOLDERS.id, id).replace(PLACEHOLDERS.display, display);\r\n};\r\n\r\n// This contains all the latin letters and the regex that match these letters with diacritics\r\n// https://stackoverflow.com/questions/990904/remove-accents-diacritics-in-a-string-in-javascript\r\nvar lettersDiacritics = [{\r\n  base: 'A',\r\n  letters: /(&#65;|&#9398;|&#65313;|&#192;|&#193;|&#194;|&#7846;|&#7844;|&#7850;|&#7848;|&#195;|&#256;|&#258;|&#7856;|&#7854;|&#7860;|&#7858;|&#550;|&#480;|&#196;|&#478;|&#7842;|&#197;|&#506;|&#461;|&#512;|&#514;|&#7840;|&#7852;|&#7862;|&#7680;|&#260;|&#570;|&#11375;|[\\u0041\\u24B6\\uFF21\\u00C0\\u00C1\\u00C2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\u00C3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\u00C4\\u01DE\\u1EA2\\u00C5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F])/g\r\n}, {\r\n  base: 'AA',\r\n  letters: /(&#42802;|[\\uA732])/g\r\n}, {\r\n  base: 'AE',\r\n  letters: /(&#198;|&#508;|&#482;|[\\u00C6\\u01FC\\u01E2])/g\r\n}, {\r\n  base: 'AO',\r\n  letters: /(&#42804;|[\\uA734])/g\r\n}, {\r\n  base: 'AU',\r\n  letters: /(&#42806;|[\\uA736])/g\r\n}, {\r\n  base: 'AV',\r\n  letters: /(&#42808;|&#42810;|[\\uA738\\uA73A])/g\r\n}, {\r\n  base: 'AY',\r\n  letters: /(&#42812;|[\\uA73C])/g\r\n}, {\r\n  base: 'B',\r\n  letters: /(&#66;|&#9399;|&#65314;|&#7682;|&#7684;|&#7686;|&#579;|&#386;|&#385;|[\\u0042\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181])/g\r\n}, {\r\n  base: 'C',\r\n  letters: /(&#67;|&#9400;|&#65315;|&#262;|&#264;|&#266;|&#268;|&#199;|&#7688;|&#391;|&#571;|&#42814;|[\\u0043\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\u00C7\\u1E08\\u0187\\u023B\\uA73E])/g\r\n}, {\r\n  base: 'D',\r\n  letters: /(&#68;|&#9401;|&#65316;|&#7690;|&#270;|&#7692;|&#7696;|&#7698;|&#7694;|&#272;|&#395;|&#394;|&#393;|&#42873;|&#208;|[\\u0044\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779\\u00D0])/g\r\n}, {\r\n  base: 'DZ',\r\n  letters: /(&#497;|&#452;|[\\u01F1\\u01C4])/g\r\n}, {\r\n  base: 'Dz',\r\n  letters: /(&#498;|&#453;|[\\u01F2\\u01C5])/g\r\n}, {\r\n  base: 'E',\r\n  letters: /(&#69;|&#9402;|&#65317;|&#200;|&#201;|&#202;|&#7872;|&#7870;|&#7876;|&#7874;|&#7868;|&#274;|&#7700;|&#7702;|&#276;|&#278;|&#203;|&#7866;|&#282;|&#516;|&#518;|&#7864;|&#7878;|&#552;|&#7708;|&#280;|&#7704;|&#7706;|&#400;|&#398;|[\\u0045\\u24BA\\uFF25\\u00C8\\u00C9\\u00CA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\u00CB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E])/g\r\n}, {\r\n  base: 'F',\r\n  letters: /(&#70;|&#9403;|&#65318;|&#7710;|&#401;|&#42875;|[\\u0046\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B])/g\r\n}, {\r\n  base: 'G',\r\n  letters: /(&#71;|&#9404;|&#65319;|&#500;|&#284;|&#7712;|&#286;|&#288;|&#486;|&#290;|&#484;|&#403;|&#42912;|&#42877;|&#42878;|[\\u0047\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E])/g\r\n}, {\r\n  base: 'H',\r\n  letters: /(&#72;|&#9405;|&#65320;|&#292;|&#7714;|&#7718;|&#542;|&#7716;|&#7720;|&#7722;|&#294;|&#11367;|&#11381;|&#42893;|[\\u0048\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D])/g\r\n}, {\r\n  base: 'I',\r\n  letters: /(&#73;|&#9406;|&#65321;|&#204;|&#205;|&#206;|&#296;|&#298;|&#300;|&#304;|&#207;|&#7726;|&#7880;|&#463;|&#520;|&#522;|&#7882;|&#302;|&#7724;|&#407;|[\\u0049\\u24BE\\uFF29\\u00CC\\u00CD\\u00CE\\u0128\\u012A\\u012C\\u0130\\u00CF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197])/g\r\n}, {\r\n  base: 'J',\r\n  letters: /(&#74;|&#9407;|&#65322;|&#308;|&#584;|[\\u004A\\u24BF\\uFF2A\\u0134\\u0248])/g\r\n}, {\r\n  base: 'K',\r\n  letters: /(&#75;|&#9408;|&#65323;|&#7728;|&#488;|&#7730;|&#310;|&#7732;|&#408;|&#11369;|&#42816;|&#42818;|&#42820;|&#42914;|[\\u004B\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2])/g\r\n}, {\r\n  base: 'L',\r\n  letters: /(&#76;|&#9409;|&#65324;|&#319;|&#313;|&#317;|&#7734;|&#7736;|&#315;|&#7740;|&#7738;|&#321;|&#573;|&#11362;|&#11360;|&#42824;|&#42822;|&#42880;|[\\u004C\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780])/g\r\n}, {\r\n  base: 'LJ',\r\n  letters: /(&#455;|[\\u01C7])/g\r\n}, {\r\n  base: 'Lj',\r\n  letters: /(&#456;|[\\u01C8])/g\r\n}, {\r\n  base: 'M',\r\n  letters: /(&#77;|&#9410;|&#65325;|&#7742;|&#7744;|&#7746;|&#11374;|&#412;|[\\u004D\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C])/g\r\n}, {\r\n  base: 'N',\r\n  letters: /(&#78;|&#9411;|&#65326;|&#504;|&#323;|&#209;|&#7748;|&#327;|&#7750;|&#325;|&#7754;|&#7752;|&#544;|&#413;|&#42896;|&#42916;|&#330;|[\\u004E\\u24C3\\uFF2E\\u01F8\\u0143\\u00D1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4\\u014A])/g\r\n}, {\r\n  base: 'NJ',\r\n  letters: /(&#458;|[\\u01CA])/g\r\n}, {\r\n  base: 'Nj',\r\n  letters: /(&#459;|[\\u01CB])/g\r\n}, {\r\n  base: 'O',\r\n  letters: /(&#79;|&#9412;|&#65327;|&#210;|&#211;|&#212;|&#7890;|&#7888;|&#7894;|&#7892;|&#213;|&#7756;|&#556;|&#7758;|&#332;|&#7760;|&#7762;|&#334;|&#558;|&#560;|&#214;|&#554;|&#7886;|&#336;|&#465;|&#524;|&#526;|&#416;|&#7900;|&#7898;|&#7904;|&#7902;|&#7906;|&#7884;|&#7896;|&#490;|&#492;|&#216;|&#510;|&#390;|&#415;|&#42826;|&#42828;|[\\u004F\\u24C4\\uFF2F\\u00D2\\u00D3\\u00D4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\u00D5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\u00D6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\u00D8\\u01FE\\u0186\\u019F\\uA74A\\uA74C])/g\r\n}, {\r\n  base: 'OE',\r\n  letters: /(&#338;|[\\u0152])/g\r\n}, {\r\n  base: 'OI',\r\n  letters: /(&#418;|[\\u01A2])/g\r\n}, {\r\n  base: 'OO',\r\n  letters: /(&#42830;|[\\uA74E])/g\r\n}, {\r\n  base: 'OU',\r\n  letters: /(&#546;|[\\u0222])/g\r\n}, {\r\n  base: 'P',\r\n  letters: /(&#80;|&#9413;|&#65328;|&#7764;|&#7766;|&#420;|&#11363;|&#42832;|&#42834;|&#42836;|[\\u0050\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754])/g\r\n}, {\r\n  base: 'Q',\r\n  letters: /(&#81;|&#9414;|&#65329;|&#42838;|&#42840;|&#586;|[\\u0051\\u24C6\\uFF31\\uA756\\uA758\\u024A])/g\r\n}, {\r\n  base: 'R',\r\n  letters: /(&#82;|&#9415;|&#65330;|&#340;|&#7768;|&#344;|&#528;|&#530;|&#7770;|&#7772;|&#342;|&#7774;|&#588;|&#11364;|&#42842;|&#42918;|&#42882;|[\\u0052\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782])/g\r\n}, {\r\n  base: 'S',\r\n  letters: /(&#83;|&#9416;|&#65331;|&#7838;|&#346;|&#7780;|&#348;|&#7776;|&#352;|&#7782;|&#7778;|&#7784;|&#536;|&#350;|&#11390;|&#42920;|&#42884;|[\\u0053\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784])/g\r\n}, {\r\n  base: 'T',\r\n  letters: /(&#84;|&#9417;|&#65332;|&#7786;|&#356;|&#7788;|&#538;|&#354;|&#7792;|&#7790;|&#358;|&#428;|&#430;|&#574;|&#42886;|[\\u0054\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786])/g\r\n}, {\r\n  base: 'TH',\r\n  letters: /(&#222;|[\\u00DE])/g\r\n}, {\r\n  base: 'TZ',\r\n  letters: /(&#42792;|[\\uA728])/g\r\n}, {\r\n  base: 'U',\r\n  letters: /(&#85;|&#9418;|&#65333;|&#217;|&#218;|&#219;|&#360;|&#7800;|&#362;|&#7802;|&#364;|&#220;|&#475;|&#471;|&#469;|&#473;|&#7910;|&#366;|&#368;|&#467;|&#532;|&#534;|&#431;|&#7914;|&#7912;|&#7918;|&#7916;|&#7920;|&#7908;|&#7794;|&#370;|&#7798;|&#7796;|&#580;|[\\u0055\\u24CA\\uFF35\\u00D9\\u00DA\\u00DB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\u00DC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244])/g\r\n}, {\r\n  base: 'V',\r\n  letters: /(&#86;|&#9419;|&#65334;|&#7804;|&#7806;|&#434;|&#42846;|&#581;|[\\u0056\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245])/g\r\n}, {\r\n  base: 'VY',\r\n  letters: /(&#42848;|[\\uA760])/g\r\n}, {\r\n  base: 'W',\r\n  letters: /(&#87;|&#9420;|&#65335;|&#7808;|&#7810;|&#372;|&#7814;|&#7812;|&#7816;|&#11378;|[\\u0057\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72])/g\r\n}, {\r\n  base: 'X',\r\n  letters: /(&#88;|&#9421;|&#65336;|&#7818;|&#7820;|[\\u0058\\u24CD\\uFF38\\u1E8A\\u1E8C])/g\r\n}, {\r\n  base: 'Y',\r\n  letters: /(&#89;|&#9422;|&#65337;|&#7922;|&#221;|&#374;|&#7928;|&#562;|&#7822;|&#376;|&#7926;|&#7924;|&#435;|&#590;|&#7934;|[\\u0059\\u24CE\\uFF39\\u1EF2\\u00DD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE])/g\r\n}, {\r\n  base: 'Z',\r\n  letters: /(&#90;|&#9423;|&#65338;|&#377;|&#7824;|&#379;|&#381;|&#7826;|&#7828;|&#437;|&#548;|&#11391;|&#11371;|&#42850;|[\\u005A\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762])/g\r\n}, {\r\n  base: 'a',\r\n  letters: /(&#97;|&#9424;|&#65345;|&#7834;|&#224;|&#225;|&#226;|&#7847;|&#7845;|&#7851;|&#7849;|&#227;|&#257;|&#259;|&#7857;|&#7855;|&#7861;|&#7859;|&#551;|&#481;|&#228;|&#479;|&#7843;|&#229;|&#507;|&#462;|&#513;|&#515;|&#7841;|&#7853;|&#7863;|&#7681;|&#261;|&#11365;|&#592;|[\\u0061\\u24D0\\uFF41\\u1E9A\\u00E0\\u00E1\\u00E2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\u00E3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\u00E4\\u01DF\\u1EA3\\u00E5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250])/g\r\n}, {\r\n  base: 'aa',\r\n  letters: /(&#42803;|[\\uA733])/g\r\n}, {\r\n  base: 'ae',\r\n  letters: /(&#230;|&#509;|&#483;|[\\u00E6\\u01FD\\u01E3])/g\r\n}, {\r\n  base: 'ao',\r\n  letters: /(&#42805;|[\\uA735])/g\r\n}, {\r\n  base: 'au',\r\n  letters: /(&#42807;|[\\uA737])/g\r\n}, {\r\n  base: 'av',\r\n  letters: /(&#42809;|&#42811;|[\\uA739\\uA73B])/g\r\n}, {\r\n  base: 'ay',\r\n  letters: /(&#42813;|[\\uA73D])/g\r\n}, {\r\n  base: 'b',\r\n  letters: /(&#98;|&#9425;|&#65346;|&#7683;|&#7685;|&#7687;|&#384;|&#387;|&#595;|[\\u0062\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253])/g\r\n}, {\r\n  base: 'c',\r\n  letters: /(&#99;|&#9426;|&#65347;|&#263;|&#265;|&#267;|&#269;|&#231;|&#7689;|&#392;|&#572;|&#42815;|&#8580;|[\\u0063\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\u00E7\\u1E09\\u0188\\u023C\\uA73F\\u2184])/g\r\n}, {\r\n  base: 'd',\r\n  letters: /(&#100;|&#9427;|&#65348;|&#7691;|&#271;|&#7693;|&#7697;|&#7699;|&#7695;|&#273;|&#396;|&#598;|&#599;|&#42874;|&#240;|[\\u0064\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A\\u00F0])/g\r\n}, {\r\n  base: 'dz',\r\n  letters: /(&#499;|&#454;|[\\u01F3\\u01C6])/g\r\n}, {\r\n  base: 'e',\r\n  letters: /(&#101;|&#9428;|&#65349;|&#232;|&#233;|&#234;|&#7873;|&#7871;|&#7877;|&#7875;|&#7869;|&#275;|&#7701;|&#7703;|&#277;|&#279;|&#235;|&#7867;|&#283;|&#517;|&#519;|&#7865;|&#7879;|&#553;|&#7709;|&#281;|&#7705;|&#7707;|&#583;|&#603;|&#477;|[\\u0065\\u24D4\\uFF45\\u00E8\\u00E9\\u00EA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\u00EB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD])/g\r\n}, {\r\n  base: 'f',\r\n  letters: /(&#102;|&#9429;|&#65350;|&#7711;|&#402;|&#42876;|[\\u0066\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C])/g\r\n}, {\r\n  base: 'g',\r\n  letters: /(&#103;|&#9430;|&#65351;|&#501;|&#285;|&#7713;|&#287;|&#289;|&#487;|&#291;|&#485;|&#608;|&#42913;|&#7545;|&#42879;|[\\u0067\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F])/g\r\n}, {\r\n  base: 'h',\r\n  letters: /(&#104;|&#9431;|&#65352;|&#293;|&#7715;|&#7719;|&#543;|&#7717;|&#7721;|&#7723;|&#7830;|&#295;|&#11368;|&#11382;|&#613;|[\\u0068\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265])/g\r\n}, {\r\n  base: 'hv',\r\n  letters: /(&#405;|[\\u0195])/g\r\n}, {\r\n  base: 'i',\r\n  letters: /(&#105;|&#9432;|&#65353;|&#236;|&#237;|&#238;|&#297;|&#299;|&#301;|&#239;|&#7727;|&#7881;|&#464;|&#521;|&#523;|&#7883;|&#303;|&#7725;|&#616;|&#305;|[\\u0069\\u24D8\\uFF49\\u00EC\\u00ED\\u00EE\\u0129\\u012B\\u012D\\u00EF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131])/g\r\n}, {\r\n  base: 'ij',\r\n  letters: /(&#307;|[\\u0133])/g\r\n}, {\r\n  base: 'j',\r\n  letters: /(&#106;|&#9433;|&#65354;|&#309;|&#496;|&#585;|[\\u006A\\u24D9\\uFF4A\\u0135\\u01F0\\u0249])/g\r\n}, {\r\n  base: 'k',\r\n  letters: /(&#107;|&#9434;|&#65355;|&#7729;|&#489;|&#7731;|&#311;|&#7733;|&#409;|&#11370;|&#42817;|&#42819;|&#42821;|&#42915;|[\\u006B\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3])/g\r\n}, {\r\n  base: 'l',\r\n  letters: /(&#108;|&#9435;|&#65356;|&#320;|&#314;|&#318;|&#7735;|&#7737;|&#316;|&#7741;|&#7739;|&#322;|&#410;|&#619;|&#11361;|&#42825;|&#42881;|&#42823;|[\\u006C\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747])/g\r\n}, {\r\n  base: 'lj',\r\n  letters: /(&#457;|[\\u01C9])/g\r\n}, {\r\n  base: 'm',\r\n  letters: /(&#109;|&#9436;|&#65357;|&#7743;|&#7745;|&#7747;|&#625;|&#623;|[\\u006D\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F])/g\r\n}, {\r\n  base: 'n',\r\n  letters: /(&#110;|&#9437;|&#65358;|&#505;|&#324;|&#241;|&#7749;|&#328;|&#7751;|&#326;|&#7755;|&#7753;|&#414;|&#626;|&#329;|&#42897;|&#42917;|&#331;|[\\u006E\\u24DD\\uFF4E\\u01F9\\u0144\\u00F1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5\\u014B])/g\r\n}, {\r\n  base: 'nj',\r\n  letters: /(&#460;|[\\u01CC])/g\r\n}, {\r\n  base: 'o',\r\n  letters: /(&#111;|&#9438;|&#65359;|&#242;|&#243;|&#244;|&#7891;|&#7889;|&#7895;|&#7893;|&#245;|&#7757;|&#557;|&#7759;|&#333;|&#7761;|&#7763;|&#335;|&#559;|&#561;|&#246;|&#555;|&#7887;|&#337;|&#466;|&#525;|&#527;|&#417;|&#7901;|&#7899;|&#7905;|&#7903;|&#7907;|&#7885;|&#7897;|&#491;|&#493;|&#248;|&#511;|&#596;|&#42827;|&#42829;|&#629;|[\\u006F\\u24DE\\uFF4F\\u00F2\\u00F3\\u00F4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\u00F5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\u00F6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\u00F8\\u01FF\\u0254\\uA74B\\uA74D\\u0275])/g\r\n}, {\r\n  base: 'oe',\r\n  letters: /(&#339;|[\\u0153])/g\r\n}, {\r\n  base: 'oi',\r\n  letters: /(&#419;|[\\u01A3])/g\r\n}, {\r\n  base: 'ou',\r\n  letters: /(&#547;|[\\u0223])/g\r\n}, {\r\n  base: 'oo',\r\n  letters: /(&#42831;|[\\uA74F])/g\r\n}, {\r\n  base: 'p',\r\n  letters: /(&#112;|&#9439;|&#65360;|&#7765;|&#7767;|&#421;|&#7549;|&#42833;|&#42835;|&#42837;|[\\u0070\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755])/g\r\n}, {\r\n  base: 'q',\r\n  letters: /(&#113;|&#9440;|&#65361;|&#587;|&#42839;|&#42841;|[\\u0071\\u24E0\\uFF51\\u024B\\uA757\\uA759])/g\r\n}, {\r\n  base: 'r',\r\n  letters: /(&#114;|&#9441;|&#65362;|&#341;|&#7769;|&#345;|&#529;|&#531;|&#7771;|&#7773;|&#343;|&#7775;|&#589;|&#637;|&#42843;|&#42919;|&#42883;|[\\u0072\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783])/g\r\n}, {\r\n  base: 's',\r\n  letters: /(&#115;|&#9442;|&#65363;|&#347;|&#7781;|&#349;|&#7777;|&#353;|&#7783;|&#7779;|&#7785;|&#537;|&#351;|&#575;|&#42921;|&#42885;|&#7835;|&#383;|[\\u0073\\u24E2\\uFF53\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B\\u017F])/g\r\n}, {\r\n  base: 'ss',\r\n  letters: /(&#223;|[\\u00DF])/g\r\n}, {\r\n  base: 't',\r\n  letters: /(&#116;|&#9443;|&#65364;|&#7787;|&#7831;|&#357;|&#7789;|&#539;|&#355;|&#7793;|&#7791;|&#359;|&#429;|&#648;|&#11366;|&#42887;|[\\u0074\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787])/g\r\n}, {\r\n  base: 'th',\r\n  letters: /(&#254;|[\\u00FE])/g\r\n}, {\r\n  base: 'tz',\r\n  letters: /(&#42793;|[\\uA729])/g\r\n}, {\r\n  base: 'u',\r\n  letters: /(&#117;|&#9444;|&#65365;|&#249;|&#250;|&#251;|&#361;|&#7801;|&#363;|&#7803;|&#365;|&#252;|&#476;|&#472;|&#470;|&#474;|&#7911;|&#367;|&#369;|&#468;|&#533;|&#535;|&#432;|&#7915;|&#7913;|&#7919;|&#7917;|&#7921;|&#7909;|&#7795;|&#371;|&#7799;|&#7797;|&#649;|[\\u0075\\u24E4\\uFF55\\u00F9\\u00FA\\u00FB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\u00FC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289])/g\r\n}, {\r\n  base: 'v',\r\n  letters: /(&#118;|&#9445;|&#65366;|&#7805;|&#7807;|&#651;|&#42847;|&#652;|[\\u0076\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C])/g\r\n}, {\r\n  base: 'vy',\r\n  letters: /(&#42849;|[\\uA761])/g\r\n}, {\r\n  base: 'w',\r\n  letters: /(&#119;|&#9446;|&#65367;|&#7809;|&#7811;|&#373;|&#7815;|&#7813;|&#7832;|&#7817;|&#11379;|[\\u0077\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73])/g\r\n}, {\r\n  base: 'x',\r\n  letters: /(&#120;|&#9447;|&#65368;|&#7819;|&#7821;|[\\u0078\\u24E7\\uFF58\\u1E8B\\u1E8D])/g\r\n}, {\r\n  base: 'y',\r\n  letters: /(&#121;|&#9448;|&#65369;|&#7923;|&#253;|&#375;|&#7929;|&#563;|&#7823;|&#255;|&#7927;|&#7833;|&#7925;|&#436;|&#591;|&#7935;|[\\u0079\\u24E8\\uFF59\\u1EF3\\u00FD\\u0177\\u1EF9\\u0233\\u1E8F\\u00FF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF])/g\r\n}, {\r\n  base: 'z',\r\n  letters: /(&#122;|&#9449;|&#65370;|&#378;|&#7825;|&#380;|&#382;|&#7827;|&#7829;|&#438;|&#549;|&#576;|&#11372;|&#42851;|[\\u007A\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763])/g\r\n}];\r\n\r\nvar removeAccents = function removeAccents(str) {\r\n  var formattedStr = str;\r\n  lettersDiacritics.forEach(function (letterDiacritics) {\r\n    formattedStr = formattedStr.replace(letterDiacritics.letters, letterDiacritics.base);\r\n  });\r\n  return formattedStr;\r\n};\r\n\r\nvar normalizeString = function normalizeString(str) {\r\n  return removeAccents(str).toLowerCase();\r\n};\r\n\r\nvar getSubstringIndex = function getSubstringIndex(str, substr, ignoreAccents) {\r\n  if (!ignoreAccents) {\r\n    return str.toLowerCase().indexOf(substr.toLowerCase());\r\n  }\r\n\r\n  return normalizeString(str).indexOf(normalizeString(substr));\r\n};\r\n\r\nvar isIE = function isIE() {\r\n  return !!document.documentMode;\r\n};\r\n\r\nvar isNumber = function isNumber(val) {\r\n  return typeof val === 'number';\r\n};\r\n\r\nvar keys = function keys(obj) {\r\n  return obj === Object(obj) ? Object.keys(obj) : [];\r\n};\r\n\r\nvar omit = function omit(obj) {\r\n  var _ref;\r\n\r\n  for (var _len = arguments.length, rest = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n    rest[_key - 1] = arguments[_key];\r\n  }\r\n\r\n  var keys = (_ref = []).concat.apply(_ref, rest);\r\n\r\n  return Object.keys(obj).reduce(function (acc, k) {\r\n    if (obj.hasOwnProperty(k) && !keys.includes(k) && obj[k] !== undefined) {\r\n      acc[k] = obj[k];\r\n    }\r\n\r\n    return acc;\r\n  }, {});\r\n};\r\n\r\nvar _excluded = [\"style\", \"className\", \"classNames\"];\r\n\r\nfunction createDefaultStyle(defaultStyle, getModifiers) {\r\n  var enhance = function enhance(ComponentToWrap) {\r\n    var DefaultStyleEnhancer = function DefaultStyleEnhancer(_ref) {\r\n      var style = _ref.style,\r\n          className = _ref.className,\r\n          classNames = _ref.classNames,\r\n          rest = _objectWithoutProperties(_ref, _excluded);\r\n\r\n      var modifiers = getModifiers ? getModifiers(rest) : undefined;\r\n      var styles = useStyles(defaultStyle, {\r\n        style: style,\r\n        className: className,\r\n        classNames: classNames\r\n      }, modifiers);\r\n      return /*#__PURE__*/React.createElement(ComponentToWrap, _extends({}, rest, {\r\n        style: styles\r\n      }));\r\n    };\r\n\r\n    var displayName = ComponentToWrap.displayName || ComponentToWrap.name || 'Component';\r\n    DefaultStyleEnhancer.displayName = \"defaultStyle(\".concat(displayName, \")\");\r\n    return DefaultStyleEnhancer;\r\n  };\r\n\r\n  return enhance;\r\n}\r\n\r\nvar _generateComponentKey = function _generateComponentKey(usedKeys, id) {\r\n  if (!usedKeys.hasOwnProperty(id)) {\r\n    usedKeys[id] = 0;\r\n  } else {\r\n    usedKeys[id]++;\r\n  }\r\n\r\n  return id + '_' + usedKeys[id];\r\n};\r\n\r\nfunction Highlighter(_ref) {\r\n  var selectionStart = _ref.selectionStart,\r\n      selectionEnd = _ref.selectionEnd,\r\n      _ref$value = _ref.value,\r\n      value = _ref$value === void 0 ? '' : _ref$value,\r\n      onCaretPositionChange = _ref.onCaretPositionChange,\r\n      containerRef = _ref.containerRef,\r\n      children = _ref.children,\r\n      singleLine = _ref.singleLine,\r\n      style = _ref.style;\r\n\r\n  var _useState = useState({\r\n    left: undefined,\r\n    top: undefined\r\n  }),\r\n      _useState2 = _slicedToArray(_useState, 2),\r\n      position = _useState2[0],\r\n      setPosition = _useState2[1];\r\n\r\n  var _useState3 = useState(),\r\n      _useState4 = _slicedToArray(_useState3, 2),\r\n      caretElement = _useState4[0],\r\n      setCaretElement = _useState4[1];\r\n\r\n  useEffect(function () {\r\n    notifyCaretPosition();\r\n  }, [caretElement]);\r\n\r\n  var notifyCaretPosition = function notifyCaretPosition() {\r\n    if (!caretElement) {\r\n      return;\r\n    }\r\n\r\n    var offsetLeft = caretElement.offsetLeft,\r\n        offsetTop = caretElement.offsetTop;\r\n\r\n    if (position.left === offsetLeft && position.top === offsetTop) {\r\n      return;\r\n    }\r\n\r\n    var newPosition = {\r\n      left: offsetLeft,\r\n      top: offsetTop\r\n    };\r\n    setPosition(newPosition);\r\n    onCaretPositionChange(newPosition);\r\n  };\r\n\r\n  var config = readConfigFromChildren(children);\r\n  var caretPositionInMarkup;\r\n\r\n  if (selectionEnd === selectionStart) {\r\n    caretPositionInMarkup = mapPlainTextIndex(value, config, selectionStart, 'START');\r\n  }\r\n\r\n  var resultComponents = [];\r\n  var componentKeys = {};\r\n  var components = resultComponents;\r\n  var substringComponentKey = 0;\r\n\r\n  var textIteratee = function textIteratee(substr, index, indexInPlainText) {\r\n    // check whether the caret element has to be inserted inside the current plain substring\r\n    if (isNumber(caretPositionInMarkup) && caretPositionInMarkup >= index && caretPositionInMarkup <= index + substr.length) {\r\n      // if yes, split substr at the caret position and insert the caret component\r\n      var splitIndex = caretPositionInMarkup - index;\r\n      components.push(renderSubstring(substr.substring(0, splitIndex), substringComponentKey)); // add all following substrings and mention components as children of the caret component\r\n\r\n      components = [renderSubstring(substr.substring(splitIndex), substringComponentKey)];\r\n    } else {\r\n      components.push(renderSubstring(substr, substringComponentKey));\r\n    }\r\n\r\n    substringComponentKey++;\r\n  };\r\n\r\n  var mentionIteratee = function mentionIteratee(markup, index, indexInPlainText, id, display, mentionChildIndex, lastMentionEndIndex) {\r\n    var key = _generateComponentKey(componentKeys, id);\r\n\r\n    components.push(getMentionComponentForMatch(id, display, mentionChildIndex, key));\r\n  };\r\n\r\n  var renderSubstring = function renderSubstring(string, key) {\r\n    // set substring span to hidden, so that Emojis are not shown double in Mobile Safari\r\n    return /*#__PURE__*/React.createElement(\"span\", _extends({}, style('substring'), {\r\n      key: key\r\n    }), string);\r\n  };\r\n\r\n  var getMentionComponentForMatch = function getMentionComponentForMatch(id, display, mentionChildIndex, key) {\r\n    var props = {\r\n      id: id,\r\n      display: display,\r\n      key: key\r\n    };\r\n    var child = Children.toArray(children)[mentionChildIndex];\r\n    return /*#__PURE__*/React.cloneElement(child, props);\r\n  };\r\n\r\n  var renderHighlighterCaret = function renderHighlighterCaret(children) {\r\n    return /*#__PURE__*/React.createElement(\"span\", _extends({}, style('caret'), {\r\n      ref: setCaretElement,\r\n      key: \"caret\"\r\n    }), children);\r\n  };\r\n\r\n  iterateMentionsMarkup(value, config, mentionIteratee, textIteratee); // append a span containing a space, to ensure the last text line has the correct height\r\n\r\n  components.push(' ');\r\n\r\n  if (components !== resultComponents) {\r\n    // if a caret component is to be rendered, add all components that followed as its children\r\n    resultComponents.push(renderHighlighterCaret(components));\r\n  }\r\n\r\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, style, {\r\n    ref: containerRef\r\n  }), resultComponents);\r\n}\r\n\r\nHighlighter.propTypes = {\r\n  selectionStart: PropTypes.number,\r\n  selectionEnd: PropTypes.number,\r\n  value: PropTypes.string.isRequired,\r\n  onCaretPositionChange: PropTypes.func.isRequired,\r\n  containerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\r\n    current: typeof Element === 'undefined' ? PropTypes.any : PropTypes.instanceOf(Element)\r\n  })]),\r\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.arrayOf(PropTypes.element)]).isRequired\r\n};\r\nvar styled = createDefaultStyle({\r\n  position: 'relative',\r\n  boxSizing: 'border-box',\r\n  width: '100%',\r\n  color: 'transparent',\r\n  overflow: 'hidden',\r\n  whiteSpace: 'pre-wrap',\r\n  wordWrap: 'break-word',\r\n  border: '1px solid transparent',\r\n  textAlign: 'start',\r\n  '&singleLine': {\r\n    whiteSpace: 'pre',\r\n    wordWrap: null\r\n  },\r\n  substring: {\r\n    visibility: 'hidden'\r\n  }\r\n}, function (props) {\r\n  return {\r\n    '&singleLine': props.singleLine\r\n  };\r\n});\r\nvar Highlighter$1 = styled(Highlighter);\r\n\r\nfunction Suggestion(_ref) {\r\n  var id = _ref.id,\r\n      focused = _ref.focused,\r\n      ignoreAccents = _ref.ignoreAccents,\r\n      index = _ref.index,\r\n      onClick = _ref.onClick,\r\n      onMouseEnter = _ref.onMouseEnter,\r\n      query = _ref.query,\r\n      renderSuggestion = _ref.renderSuggestion,\r\n      suggestion = _ref.suggestion,\r\n      style = _ref.style,\r\n      className = _ref.className,\r\n      classNames = _ref.classNames;\r\n  var rest = {\r\n    onClick: onClick,\r\n    onMouseEnter: onMouseEnter\r\n  };\r\n\r\n  var renderContent = function renderContent() {\r\n    var display = getDisplay();\r\n    var highlightedDisplay = renderHighlightedDisplay(display);\r\n\r\n    if (renderSuggestion) {\r\n      return renderSuggestion(suggestion, query, highlightedDisplay, index, focused);\r\n    }\r\n\r\n    return highlightedDisplay;\r\n  };\r\n\r\n  var getDisplay = function getDisplay() {\r\n    if (typeof suggestion === 'string') {\r\n      return suggestion;\r\n    }\r\n\r\n    var id = suggestion.id,\r\n        display = suggestion.display;\r\n\r\n    if (id === undefined || !display) {\r\n      return id;\r\n    }\r\n\r\n    return display;\r\n  };\r\n\r\n  var renderHighlightedDisplay = function renderHighlightedDisplay(display) {\r\n    var i = getSubstringIndex(display, query, ignoreAccents);\r\n\r\n    if (i === -1) {\r\n      return /*#__PURE__*/React.createElement(\"span\", style('display'), display);\r\n    }\r\n\r\n    return /*#__PURE__*/React.createElement(\"span\", style('display'), display.substring(0, i), /*#__PURE__*/React.createElement(\"b\", style('highlight'), display.substring(i, i + query.length)), display.substring(i + query.length));\r\n  };\r\n\r\n  return /*#__PURE__*/React.createElement(\"li\", _extends({\r\n    id: id,\r\n    role: \"option\",\r\n    \"aria-selected\": focused\r\n  }, rest, style), renderContent());\r\n}\r\n\r\nSuggestion.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  query: PropTypes.string.isRequired,\r\n  index: PropTypes.number.isRequired,\r\n  ignoreAccents: PropTypes.bool,\r\n  suggestion: PropTypes.oneOfType([PropTypes.string, PropTypes.shape({\r\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n    display: PropTypes.string\r\n  })]).isRequired,\r\n  renderSuggestion: PropTypes.func,\r\n  focused: PropTypes.bool\r\n};\r\nvar styled$1 = createDefaultStyle({\r\n  cursor: 'pointer'\r\n}, function (props) {\r\n  return {\r\n    '&focused': props.focused\r\n  };\r\n});\r\nvar Suggestion$1 = styled$1(Suggestion);\r\n\r\nfunction LoadingIndicator(_ref) {\r\n  var style = _ref.style,\r\n      className = _ref.className,\r\n      classNames = _ref.classNames;\r\n  var styles = useStyles(defaultstyle, {\r\n    style: style,\r\n    className: className,\r\n    classNames: classNames\r\n  });\r\n  var spinnerStyles = styles('spinner');\r\n  return /*#__PURE__*/React.createElement(\"div\", styles, /*#__PURE__*/React.createElement(\"div\", spinnerStyles, /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element1'])), /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element2'])), /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element3'])), /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element4'])), /*#__PURE__*/React.createElement(\"div\", spinnerStyles(['element', 'element5']))));\r\n}\r\n\r\nvar defaultstyle = {};\r\n\r\nfunction SuggestionsOverlay(_ref) {\r\n  var id = _ref.id,\r\n      _ref$suggestions = _ref.suggestions,\r\n      suggestions = _ref$suggestions === void 0 ? {} : _ref$suggestions,\r\n      a11ySuggestionsListLabel = _ref.a11ySuggestionsListLabel,\r\n      focusIndex = _ref.focusIndex,\r\n      position = _ref.position,\r\n      left = _ref.left,\r\n      right = _ref.right,\r\n      top = _ref.top,\r\n      scrollFocusedIntoView = _ref.scrollFocusedIntoView,\r\n      isLoading = _ref.isLoading,\r\n      isOpened = _ref.isOpened,\r\n      _ref$onSelect = _ref.onSelect,\r\n      onSelect = _ref$onSelect === void 0 ? function () {\r\n    return null;\r\n  } : _ref$onSelect,\r\n      ignoreAccents = _ref.ignoreAccents,\r\n      containerRef = _ref.containerRef,\r\n      children = _ref.children,\r\n      style = _ref.style,\r\n      customSuggestionsContainer = _ref.customSuggestionsContainer,\r\n      onMouseDown = _ref.onMouseDown,\r\n      onMouseEnter = _ref.onMouseEnter;\r\n\r\n  var _useState = useState(),\r\n      _useState2 = _slicedToArray(_useState, 2),\r\n      ulElement = _useState2[0],\r\n      setUlElement = _useState2[1];\r\n\r\n  useEffect(function () {\r\n    if (!ulElement || ulElement.offsetHeight >= ulElement.scrollHeight || !scrollFocusedIntoView) {\r\n      return;\r\n    }\r\n\r\n    var scrollTop = ulElement.scrollTop;\r\n\r\n    var _ulElement$children$f = ulElement.children[focusIndex].getBoundingClientRect(),\r\n        top = _ulElement$children$f.top,\r\n        bottom = _ulElement$children$f.bottom;\r\n\r\n    var _ulElement$getBoundin = ulElement.getBoundingClientRect(),\r\n        topContainer = _ulElement$getBoundin.top;\r\n\r\n    top = top - topContainer + scrollTop;\r\n    bottom = bottom - topContainer + scrollTop;\r\n\r\n    if (top < scrollTop) {\r\n      ulElement.scrollTop = top;\r\n    } else if (bottom > ulElement.offsetHeight) {\r\n      ulElement.scrollTop = bottom - ulElement.offsetHeight;\r\n    }\r\n  }, []);\r\n\r\n  var renderSuggestions = function renderSuggestions() {\r\n    var suggestionsToRender = Object.values(suggestions).reduce(function (accResults, _ref2) {\r\n      var results = _ref2.results,\r\n          queryInfo = _ref2.queryInfo;\r\n      return [].concat(_toConsumableArray(accResults), _toConsumableArray(results.map(function (result, index) {\r\n        return renderSuggestion(result, queryInfo, accResults.length + index);\r\n      })));\r\n    }, []);\r\n    if (customSuggestionsContainer) return customSuggestionsContainer(suggestionsToRender);else return suggestionsToRender;\r\n  };\r\n\r\n  var renderSuggestion = function renderSuggestion(result, queryInfo, index) {\r\n    var isFocused = index === focusIndex;\r\n    var childIndex = queryInfo.childIndex,\r\n        query = queryInfo.query;\r\n    var renderSuggestion = Children.toArray(children)[childIndex].props.renderSuggestion;\r\n    return /*#__PURE__*/React.createElement(Suggestion$1, {\r\n      style: style('item'),\r\n      key: \"\".concat(childIndex, \"-\").concat(getID(result)),\r\n      id: getSuggestionHtmlId(id, index),\r\n      query: query,\r\n      index: index,\r\n      ignoreAccents: ignoreAccents,\r\n      renderSuggestion: renderSuggestion,\r\n      suggestion: result,\r\n      focused: isFocused,\r\n      onClick: function onClick() {\r\n        return select(result, queryInfo);\r\n      },\r\n      onMouseEnter: function onMouseEnter() {\r\n        return handleMouseEnter(index);\r\n      }\r\n    });\r\n  };\r\n\r\n  var renderLoadingIndicator = function renderLoadingIndicator() {\r\n    if (!isLoading) {\r\n      return;\r\n    }\r\n\r\n    return /*#__PURE__*/React.createElement(LoadingIndicator, {\r\n      style: style('loadingIndicator')\r\n    });\r\n  };\r\n\r\n  var handleMouseEnter = function handleMouseEnter(index, ev) {\r\n    if (onMouseEnter) {\r\n      onMouseEnter(index);\r\n    }\r\n  };\r\n\r\n  var select = function select(suggestion, queryInfo) {\r\n    onSelect(suggestion, queryInfo);\r\n  };\r\n\r\n  var getID = function getID(suggestion) {\r\n    if (typeof suggestion === 'string') {\r\n      return suggestion;\r\n    }\r\n\r\n    return suggestion.id;\r\n  };\r\n\r\n  if (!isOpened) {\r\n    return null;\r\n  }\r\n\r\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, inline({\r\n    position: position || 'absolute',\r\n    left: left,\r\n    right: right,\r\n    top: top\r\n  }, style), {\r\n    onMouseDown: onMouseDown,\r\n    ref: containerRef\r\n  }), /*#__PURE__*/React.createElement(\"ul\", _extends({\r\n    ref: setUlElement,\r\n    id: id,\r\n    role: \"listbox\",\r\n    \"aria-label\": a11ySuggestionsListLabel\r\n  }, style('list')), renderSuggestions()), renderLoadingIndicator());\r\n}\r\n\r\nSuggestionsOverlay.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  suggestions: PropTypes.object.isRequired,\r\n  a11ySuggestionsListLabel: PropTypes.string,\r\n  focusIndex: PropTypes.number,\r\n  position: PropTypes.string,\r\n  left: PropTypes.number,\r\n  right: PropTypes.number,\r\n  top: PropTypes.number,\r\n  scrollFocusedIntoView: PropTypes.bool,\r\n  isLoading: PropTypes.bool,\r\n  isOpened: PropTypes.bool.isRequired,\r\n  onSelect: PropTypes.func,\r\n  ignoreAccents: PropTypes.bool,\r\n  customSuggestionsContainer: PropTypes.any,\r\n  containerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\r\n    current: typeof Element === 'undefined' ? PropTypes.any : PropTypes.instanceOf(Element)\r\n  })])\r\n};\r\nvar styled$2 = createDefaultStyle({\r\n  zIndex: 1,\r\n  backgroundColor: 'white',\r\n  marginTop: 14,\r\n  minWidth: 100,\r\n  list: {\r\n    margin: 0,\r\n    padding: 0,\r\n    listStyleType: 'none'\r\n  }\r\n});\r\nvar SuggestionsOverlay$1 = styled$2(SuggestionsOverlay);\r\n\r\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\r\n\r\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\r\n\r\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\r\n\r\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\r\nvar makeTriggerRegex = function makeTriggerRegex(trigger) {\r\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n\r\n  if (trigger instanceof RegExp) {\r\n    return trigger;\r\n  } else {\r\n    var allowSpaceInQuery = options.allowSpaceInQuery;\r\n    var escapedTriggerChar = escapeRegex(trigger); // first capture group is the part to be replaced on completion\r\n    // second capture group is for extracting the search query\r\n\r\n    return new RegExp(\"(?:^|\\\\s)(\".concat(escapedTriggerChar, \"([^\").concat(allowSpaceInQuery ? '' : '\\\\s').concat(escapedTriggerChar, \"]*))$\"));\r\n  }\r\n};\r\n\r\nvar getDataProvider = function getDataProvider(data, ignoreAccents) {\r\n  if (data instanceof Array) {\r\n    // if data is an array, create a function to query that\r\n    return function (query, callback) {\r\n      var results = [];\r\n\r\n      for (var i = 0, l = data.length; i < l; ++i) {\r\n        var display = data[i].display || data[i].id;\r\n\r\n        if (getSubstringIndex(display, query, ignoreAccents) >= 0) {\r\n          results.push(data[i]);\r\n        }\r\n      }\r\n\r\n      return results;\r\n    };\r\n  } else {\r\n    // expect data to be a query function\r\n    return data;\r\n  }\r\n};\r\n\r\nvar KEY = {\r\n  TAB: 9,\r\n  RETURN: 13,\r\n  ESC: 27,\r\n  UP: 38,\r\n  DOWN: 40\r\n};\r\nvar isComposing = false;\r\nvar propTypes = {\r\n  /**\r\n   * If set to `true` a regular text input element will be rendered\r\n   * instead of a textarea\r\n   */\r\n  singleLine: PropTypes.bool,\r\n  allowSpaceInQuery: PropTypes.bool,\r\n  allowSuggestionsAboveCursor: PropTypes.bool,\r\n  forceSuggestionsAboveCursor: PropTypes.bool,\r\n  ignoreAccents: PropTypes.bool,\r\n  a11ySuggestionsListLabel: PropTypes.string,\r\n  value: PropTypes.string,\r\n  onKeyDown: PropTypes.func,\r\n  customSuggestionsContainer: PropTypes.func,\r\n  onSelect: PropTypes.func,\r\n  onBlur: PropTypes.func,\r\n  onChange: PropTypes.func,\r\n  suggestionsPortalHost: typeof Element === 'undefined' ? PropTypes.any : PropTypes.PropTypes.instanceOf(Element),\r\n  inputRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\r\n    current: typeof Element === 'undefined' ? PropTypes.any : PropTypes.instanceOf(Element)\r\n  })]),\r\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.arrayOf(PropTypes.element)]).isRequired\r\n};\r\n\r\nvar MentionsInput = /*#__PURE__*/function (_React$Component) {\r\n  _inherits(MentionsInput, _React$Component);\r\n\r\n  var _super = _createSuper(MentionsInput);\r\n\r\n  function MentionsInput(_props) {\r\n    var _this;\r\n\r\n    _classCallCheck(this, MentionsInput);\r\n\r\n    _this = _super.call(this, _props);\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"setContainerElement\", function (el) {\r\n      _this.containerElement = el;\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"getInputProps\", function () {\r\n      var _this$props = _this.props,\r\n          readOnly = _this$props.readOnly,\r\n          disabled = _this$props.disabled,\r\n          style = _this$props.style; // pass all props that neither we, nor substyle, consume through to the input control\r\n\r\n      var props = omit(_this.props, ['style', 'classNames', 'className'], // substyle props\r\n      keys(propTypes));\r\n      return _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, props), style('input')), {}, {\r\n        value: _this.getPlainText(),\r\n        onScroll: _this.updateHighlighterScroll\r\n      }, !readOnly && !disabled && {\r\n        onChange: _this.handleChange,\r\n        onSelect: _this.handleSelect,\r\n        onKeyDown: _this.handleKeyDown,\r\n        onBlur: _this.handleBlur,\r\n        onCompositionStart: _this.handleCompositionStart,\r\n        onCompositionEnd: _this.handleCompositionEnd\r\n      }), _this.isOpened() && {\r\n        role: 'combobox',\r\n        'aria-controls': _this.uuidSuggestionsOverlay,\r\n        'aria-expanded': true,\r\n        'aria-autocomplete': 'list',\r\n        'aria-haspopup': 'listbox',\r\n        'aria-activedescendant': getSuggestionHtmlId(_this.uuidSuggestionsOverlay, _this.state.focusIndex)\r\n      });\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"renderControl\", function () {\r\n      var _this$props2 = _this.props,\r\n          singleLine = _this$props2.singleLine,\r\n          style = _this$props2.style;\r\n\r\n      var inputProps = _this.getInputProps();\r\n\r\n      return /*#__PURE__*/React.createElement(\"div\", style('control'), _this.renderHighlighter(), singleLine ? _this.renderInput(inputProps) : _this.renderTextarea(inputProps));\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"renderInput\", function (props) {\r\n      return /*#__PURE__*/React.createElement(\"input\", _extends({\r\n        type: \"text\",\r\n        ref: _this.setInputRef\r\n      }, props));\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"renderTextarea\", function (props) {\r\n      return /*#__PURE__*/React.createElement(\"textarea\", _extends({\r\n        ref: _this.setInputRef\r\n      }, props));\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"setInputRef\", function (el) {\r\n      _this.inputElement = el;\r\n      var inputRef = _this.props.inputRef;\r\n\r\n      if (typeof inputRef === 'function') {\r\n        inputRef(el);\r\n      } else if (inputRef) {\r\n        inputRef.current = el;\r\n      }\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"setSuggestionsElement\", function (el) {\r\n      _this.suggestionsElement = el;\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"renderSuggestionsOverlay\", function () {\r\n      if (!isNumber(_this.state.selectionStart)) {\r\n        // do not show suggestions when the input does not have the focus\r\n        return null;\r\n      }\r\n\r\n      var _this$state$suggestio = _this.state.suggestionsPosition,\r\n          position = _this$state$suggestio.position,\r\n          left = _this$state$suggestio.left,\r\n          top = _this$state$suggestio.top,\r\n          right = _this$state$suggestio.right;\r\n      var suggestionsNode = /*#__PURE__*/React.createElement(SuggestionsOverlay$1, {\r\n        id: _this.uuidSuggestionsOverlay,\r\n        style: _this.props.style('suggestions'),\r\n        position: position,\r\n        left: left,\r\n        top: top,\r\n        right: right,\r\n        focusIndex: _this.state.focusIndex,\r\n        scrollFocusedIntoView: _this.state.scrollFocusedIntoView,\r\n        containerRef: _this.setSuggestionsElement,\r\n        suggestions: _this.state.suggestions,\r\n        customSuggestionsContainer: _this.props.customSuggestionsContainer,\r\n        onSelect: _this.addMention,\r\n        onMouseDown: _this.handleSuggestionsMouseDown,\r\n        onMouseEnter: _this.handleSuggestionsMouseEnter,\r\n        isLoading: _this.isLoading(),\r\n        isOpened: _this.isOpened(),\r\n        ignoreAccents: _this.props.ignoreAccents,\r\n        a11ySuggestionsListLabel: _this.props.a11ySuggestionsListLabel\r\n      }, _this.props.children);\r\n\r\n      if (_this.props.suggestionsPortalHost) {\r\n        return /*#__PURE__*/ReactDOM.createPortal(suggestionsNode, _this.props.suggestionsPortalHost);\r\n      } else {\r\n        return suggestionsNode;\r\n      }\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"renderHighlighter\", function () {\r\n      var _this$state = _this.state,\r\n          selectionStart = _this$state.selectionStart,\r\n          selectionEnd = _this$state.selectionEnd;\r\n      var _this$props3 = _this.props,\r\n          singleLine = _this$props3.singleLine,\r\n          children = _this$props3.children,\r\n          value = _this$props3.value,\r\n          style = _this$props3.style;\r\n      return /*#__PURE__*/React.createElement(Highlighter$1, {\r\n        containerRef: _this.setHighlighterElement,\r\n        style: style('highlighter'),\r\n        value: value,\r\n        singleLine: singleLine,\r\n        selectionStart: selectionStart,\r\n        selectionEnd: selectionEnd,\r\n        onCaretPositionChange: _this.handleCaretPositionChange\r\n      }, children);\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"setHighlighterElement\", function (el) {\r\n      _this.highlighterElement = el;\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"handleCaretPositionChange\", function (position) {\r\n      _this.setState({\r\n        caretPosition: position\r\n      });\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"getPlainText\", function () {\r\n      return getPlainText(_this.props.value || '', readConfigFromChildren(_this.props.children));\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"executeOnChange\", function (event) {\r\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n        args[_key - 1] = arguments[_key];\r\n      }\r\n\r\n      if (_this.props.onChange) {\r\n        var _this$props4;\r\n\r\n        return (_this$props4 = _this.props).onChange.apply(_this$props4, [event].concat(args));\r\n      }\r\n\r\n      if (_this.props.valueLink) {\r\n        var _this$props$valueLink;\r\n\r\n        return (_this$props$valueLink = _this.props.valueLink).requestChange.apply(_this$props$valueLink, [event.target.value].concat(args));\r\n      }\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (ev) {\r\n      isComposing = false;\r\n\r\n      if (isIE()) {\r\n        // if we are inside iframe, we need to find activeElement within its contentDocument\r\n        var currentDocument = document.activeElement && document.activeElement.contentDocument || document;\r\n\r\n        if (currentDocument.activeElement !== ev.target) {\r\n          // fix an IE bug (blur from empty input element with placeholder attribute trigger \"input\" event)\r\n          return;\r\n        }\r\n      }\r\n\r\n      var value = _this.props.value || '';\r\n      var config = readConfigFromChildren(_this.props.children);\r\n      var newPlainTextValue = ev.target.value; // Derive the new value to set by applying the local change in the textarea's plain text\r\n\r\n      var newValue = applyChangeToValue(value, newPlainTextValue, {\r\n        selectionStartBefore: _this.state.selectionStart,\r\n        selectionEndBefore: _this.state.selectionEnd,\r\n        selectionEndAfter: ev.target.selectionEnd\r\n      }, config); // In case a mention is deleted, also adjust the new plain text value\r\n\r\n      newPlainTextValue = getPlainText(newValue, config); // Save current selection after change to be able to restore caret position after rerendering\r\n\r\n      var selectionStart = ev.target.selectionStart;\r\n      var selectionEnd = ev.target.selectionEnd;\r\n      var setSelectionAfterMentionChange = false; // Adjust selection range in case a mention will be deleted by the characters outside of the\r\n      // selection range that are automatically deleted\r\n\r\n      var startOfMention = findStartOfMentionInPlainText(value, config, selectionStart);\r\n\r\n      if (startOfMention !== undefined && _this.state.selectionEnd > startOfMention) {\r\n        // only if a deletion has taken place\r\n        selectionStart = startOfMention + (ev.nativeEvent.data ? ev.nativeEvent.data.length : 0);\r\n        selectionEnd = selectionStart;\r\n        setSelectionAfterMentionChange = true;\r\n      }\r\n\r\n      _this.setState({\r\n        selectionStart: selectionStart,\r\n        selectionEnd: selectionEnd,\r\n        setSelectionAfterMentionChange: setSelectionAfterMentionChange\r\n      });\r\n\r\n      var mentions = getMentions(newValue, config); // Propagate change\r\n      // let handleChange = this.getOnChange(this.props) || emptyFunction;\r\n\r\n      var eventMock = {\r\n        target: {\r\n          value: newValue\r\n        }\r\n      }; // this.props.onChange.call(this, eventMock, newValue, newPlainTextValue, mentions);\r\n\r\n      _this.executeOnChange(eventMock, newValue, newPlainTextValue, mentions);\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"handleSelect\", function (ev) {\r\n      // keep track of selection range / caret position\r\n      _this.setState({\r\n        selectionStart: ev.target.selectionStart,\r\n        selectionEnd: ev.target.selectionEnd\r\n      }); // do nothing while a IME composition session is active\r\n\r\n\r\n      if (isComposing) return; // refresh suggestions queries\r\n\r\n      var el = _this.inputElement;\r\n\r\n      if (ev.target.selectionStart === ev.target.selectionEnd) {\r\n        _this.updateMentionsQueries(el.value, ev.target.selectionStart);\r\n      } else {\r\n        _this.clearSuggestions();\r\n      } // sync highlighters scroll position\r\n\r\n\r\n      _this.updateHighlighterScroll();\r\n\r\n      _this.props.onSelect(ev);\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"handleKeyDown\", function (ev) {\r\n      // do not intercept key events if the suggestions overlay is not shown\r\n      var suggestionsCount = countSuggestions(_this.state.suggestions);\r\n\r\n      if (suggestionsCount === 0 || !_this.suggestionsElement) {\r\n        _this.props.onKeyDown(ev);\r\n\r\n        return;\r\n      }\r\n\r\n      if (Object.values(KEY).indexOf(ev.keyCode) >= 0) {\r\n        ev.preventDefault();\r\n        ev.stopPropagation();\r\n      }\r\n\r\n      switch (ev.keyCode) {\r\n        case KEY.ESC:\r\n          {\r\n            _this.clearSuggestions();\r\n\r\n            return;\r\n          }\r\n\r\n        case KEY.DOWN:\r\n          {\r\n            _this.shiftFocus(+1);\r\n\r\n            return;\r\n          }\r\n\r\n        case KEY.UP:\r\n          {\r\n            _this.shiftFocus(-1);\r\n\r\n            return;\r\n          }\r\n\r\n        case KEY.RETURN:\r\n          {\r\n            _this.selectFocused();\r\n\r\n            return;\r\n          }\r\n\r\n        case KEY.TAB:\r\n          {\r\n            _this.selectFocused();\r\n\r\n            return;\r\n          }\r\n\r\n        default:\r\n          {\r\n            return;\r\n          }\r\n      }\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"shiftFocus\", function (delta) {\r\n      var suggestionsCount = countSuggestions(_this.state.suggestions);\r\n\r\n      _this.setState({\r\n        focusIndex: (suggestionsCount + _this.state.focusIndex + delta) % suggestionsCount,\r\n        scrollFocusedIntoView: true\r\n      });\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"selectFocused\", function () {\r\n      var _this$state2 = _this.state,\r\n          suggestions = _this$state2.suggestions,\r\n          focusIndex = _this$state2.focusIndex;\r\n      var _Object$values$reduce = Object.values(suggestions).reduce(function (acc, _ref) {\r\n        var results = _ref.results,\r\n            queryInfo = _ref.queryInfo;\r\n        return [].concat(_toConsumableArray(acc), _toConsumableArray(results.map(function (result) {\r\n          return {\r\n            result: result,\r\n            queryInfo: queryInfo\r\n          };\r\n        })));\r\n      }, [])[focusIndex],\r\n          result = _Object$values$reduce.result,\r\n          queryInfo = _Object$values$reduce.queryInfo;\r\n\r\n      _this.addMention(result, queryInfo);\r\n\r\n      _this.setState({\r\n        focusIndex: 0\r\n      });\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"handleBlur\", function (ev) {\r\n      var clickedSuggestion = _this._suggestionsMouseDown;\r\n      _this._suggestionsMouseDown = false; // only reset selection if the mousedown happened on an element\r\n      // other than the suggestions overlay\r\n\r\n      if (!clickedSuggestion) {\r\n        _this.setState({\r\n          selectionStart: null,\r\n          selectionEnd: null\r\n        });\r\n      }\r\n\r\n      window.setTimeout(function () {\r\n        _this.updateHighlighterScroll();\r\n      }, 1);\r\n\r\n      _this.props.onBlur(ev, clickedSuggestion);\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"handleSuggestionsMouseDown\", function (ev) {\r\n      _this._suggestionsMouseDown = true;\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"handleSuggestionsMouseEnter\", function (focusIndex) {\r\n      _this.setState({\r\n        focusIndex: focusIndex,\r\n        scrollFocusedIntoView: false\r\n      });\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"updateSuggestionsPosition\", function () {\r\n      var caretPosition = _this.state.caretPosition;\r\n      var _this$props5 = _this.props,\r\n          suggestionsPortalHost = _this$props5.suggestionsPortalHost,\r\n          allowSuggestionsAboveCursor = _this$props5.allowSuggestionsAboveCursor,\r\n          forceSuggestionsAboveCursor = _this$props5.forceSuggestionsAboveCursor;\r\n\r\n      if (!caretPosition || !_this.suggestionsElement) {\r\n        return;\r\n      }\r\n\r\n      var suggestions = _this.suggestionsElement;\r\n      var highlighter = _this.highlighterElement; // first get viewport-relative position (highlighter is offsetParent of caret):\r\n\r\n      var caretOffsetParentRect = highlighter.getBoundingClientRect();\r\n      var caretHeight = getComputedStyleLengthProp(highlighter, 'font-size');\r\n      var viewportRelative = {\r\n        left: caretOffsetParentRect.left + caretPosition.left,\r\n        top: caretOffsetParentRect.top + caretPosition.top + caretHeight\r\n      };\r\n      var viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\r\n\r\n      if (!suggestions) {\r\n        return;\r\n      }\r\n\r\n      var position = {}; // if suggestions menu is in a portal, update position to be releative to its portal node\r\n\r\n      if (suggestionsPortalHost) {\r\n        position.position = 'fixed';\r\n        var left = viewportRelative.left;\r\n        var top = viewportRelative.top; // absolute/fixed positioned elements are positioned according to their entire box including margins; so we remove margins here:\r\n\r\n        left -= getComputedStyleLengthProp(suggestions, 'margin-left');\r\n        top -= getComputedStyleLengthProp(suggestions, 'margin-top'); // take into account highlighter/textinput scrolling:\r\n\r\n        left -= highlighter.scrollLeft;\r\n        top -= highlighter.scrollTop; // guard for mentions suggestions list clipped by right edge of window\r\n\r\n        var viewportWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\r\n\r\n        if (left + suggestions.offsetWidth > viewportWidth) {\r\n          position.left = Math.max(0, viewportWidth - suggestions.offsetWidth);\r\n        } else {\r\n          position.left = left;\r\n        } // guard for mentions suggestions list clipped by bottom edge of window if allowSuggestionsAboveCursor set to true.\r\n        // Move the list up above the caret if it's getting cut off by the bottom of the window, provided that the list height\r\n        // is small enough to NOT cover up the caret\r\n\r\n\r\n        if (allowSuggestionsAboveCursor && top + suggestions.offsetHeight > viewportHeight && suggestions.offsetHeight < top - caretHeight || forceSuggestionsAboveCursor) {\r\n          position.top = Math.max(0, top - suggestions.offsetHeight - caretHeight);\r\n        } else {\r\n          position.top = top;\r\n        }\r\n      } else {\r\n        var _left = caretPosition.left - highlighter.scrollLeft;\r\n\r\n        var _top = caretPosition.top - highlighter.scrollTop; // guard for mentions suggestions list clipped by right edge of window\r\n\r\n\r\n        if (_left + suggestions.offsetWidth > _this.containerElement.offsetWidth) {\r\n          position.right = 0;\r\n        } else {\r\n          position.left = _left;\r\n        } // guard for mentions suggestions list clipped by bottom edge of window if allowSuggestionsAboveCursor set to true.\r\n        // move the list up above the caret if it's getting cut off by the bottom of the window, provided that the list height\r\n        // is small enough to NOT cover up the caret\r\n\r\n\r\n        if (allowSuggestionsAboveCursor && viewportRelative.top - highlighter.scrollTop + suggestions.offsetHeight > viewportHeight && suggestions.offsetHeight < caretOffsetParentRect.top - caretHeight - highlighter.scrollTop || forceSuggestionsAboveCursor) {\r\n          position.top = _top - suggestions.offsetHeight - caretHeight;\r\n        } else {\r\n          position.top = _top;\r\n        }\r\n      }\r\n\r\n      if (position.left === _this.state.suggestionsPosition.left && position.top === _this.state.suggestionsPosition.top && position.position === _this.state.suggestionsPosition.position) {\r\n        return;\r\n      }\r\n\r\n      _this.setState({\r\n        suggestionsPosition: position\r\n      });\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"updateHighlighterScroll\", function () {\r\n      var input = _this.inputElement;\r\n      var highlighter = _this.highlighterElement;\r\n\r\n      if (!input || !highlighter) {\r\n        // since the invocation of this function is deferred,\r\n        // the whole component may have been unmounted in the meanwhile\r\n        return;\r\n      }\r\n\r\n      highlighter.scrollLeft = input.scrollLeft;\r\n      highlighter.scrollTop = input.scrollTop;\r\n      highlighter.height = input.height;\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"handleCompositionStart\", function () {\r\n      isComposing = true;\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"handleCompositionEnd\", function () {\r\n      isComposing = false;\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"setSelection\", function (selectionStart, selectionEnd) {\r\n      if (selectionStart === null || selectionEnd === null) return;\r\n      var el = _this.inputElement;\r\n\r\n      if (el.setSelectionRange) {\r\n        el.setSelectionRange(selectionStart, selectionEnd);\r\n      } else if (el.createTextRange) {\r\n        var range = el.createTextRange();\r\n        range.collapse(true);\r\n        range.moveEnd('character', selectionEnd);\r\n        range.moveStart('character', selectionStart);\r\n        range.select();\r\n      }\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"updateMentionsQueries\", function (plainTextValue, caretPosition) {\r\n      // Invalidate previous queries. Async results for previous queries will be neglected.\r\n      _this._queryId++;\r\n      _this.suggestions = {};\r\n\r\n      _this.setState({\r\n        suggestions: {}\r\n      });\r\n\r\n      var value = _this.props.value || '';\r\n      var children = _this.props.children;\r\n      var config = readConfigFromChildren(children);\r\n      var positionInValue = mapPlainTextIndex(value, config, caretPosition, 'NULL'); // If caret is inside of mention, do not query\r\n\r\n      if (positionInValue === null) {\r\n        return;\r\n      } // Extract substring in between the end of the previous mention and the caret\r\n\r\n\r\n      var substringStartIndex = getEndOfLastMention(value.substring(0, positionInValue), config);\r\n      var substring = plainTextValue.substring(substringStartIndex, caretPosition); // Check if suggestions have to be shown:\r\n      // Match the trigger patterns of all Mention children on the extracted substring\r\n\r\n      React.Children.forEach(children, function (child, childIndex) {\r\n        if (!child) {\r\n          return;\r\n        }\r\n\r\n        var regex = makeTriggerRegex(child.props.trigger, _this.props);\r\n        var match = substring.match(regex);\r\n\r\n        if (match) {\r\n          var querySequenceStart = substringStartIndex + substring.indexOf(match[1], match.index);\r\n\r\n          _this.queryData(match[2], childIndex, querySequenceStart, querySequenceStart + match[1].length, plainTextValue);\r\n        }\r\n      });\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"clearSuggestions\", function () {\r\n      // Invalidate previous queries. Async results for previous queries will be neglected.\r\n      _this._queryId++;\r\n      _this.suggestions = {};\r\n\r\n      _this.setState({\r\n        suggestions: {},\r\n        focusIndex: 0\r\n      });\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"queryData\", function (query, childIndex, querySequenceStart, querySequenceEnd, plainTextValue) {\r\n      var _this$props6 = _this.props,\r\n          children = _this$props6.children,\r\n          ignoreAccents = _this$props6.ignoreAccents;\r\n      var mentionChild = Children.toArray(children)[childIndex];\r\n      var provideData = getDataProvider(mentionChild.props.data, ignoreAccents);\r\n      var syncResult = provideData(query, _this.updateSuggestions.bind(null, _this._queryId, childIndex, query, querySequenceStart, querySequenceEnd, plainTextValue));\r\n\r\n      if (syncResult instanceof Array) {\r\n        _this.updateSuggestions(_this._queryId, childIndex, query, querySequenceStart, querySequenceEnd, plainTextValue, syncResult);\r\n      }\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"updateSuggestions\", function (queryId, childIndex, query, querySequenceStart, querySequenceEnd, plainTextValue, results) {\r\n      // neglect async results from previous queries\r\n      if (queryId !== _this._queryId) return; // save in property so that multiple sync state updates from different mentions sources\r\n      // won't overwrite each other\r\n\r\n      _this.suggestions = _objectSpread(_objectSpread({}, _this.suggestions), {}, _defineProperty({}, childIndex, {\r\n        queryInfo: {\r\n          childIndex: childIndex,\r\n          query: query,\r\n          querySequenceStart: querySequenceStart,\r\n          querySequenceEnd: querySequenceEnd,\r\n          plainTextValue: plainTextValue\r\n        },\r\n        results: results\r\n      }));\r\n      var focusIndex = _this.state.focusIndex;\r\n      var suggestionsCount = countSuggestions(_this.suggestions);\r\n\r\n      _this.setState({\r\n        suggestions: _this.suggestions,\r\n        focusIndex: focusIndex >= suggestionsCount ? Math.max(suggestionsCount - 1, 0) : focusIndex\r\n      });\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"addMention\", function (_ref2, _ref3) {\r\n      var id = _ref2.id,\r\n          display = _ref2.display;\r\n      var childIndex = _ref3.childIndex,\r\n          querySequenceStart = _ref3.querySequenceStart,\r\n          querySequenceEnd = _ref3.querySequenceEnd,\r\n          plainTextValue = _ref3.plainTextValue;\r\n      // Insert mention in the marked up value at the correct position\r\n      var value = _this.props.value || '';\r\n      var config = readConfigFromChildren(_this.props.children);\r\n      var mentionsChild = Children.toArray(_this.props.children)[childIndex];\r\n      var _mentionsChild$props = mentionsChild.props,\r\n          markup = _mentionsChild$props.markup,\r\n          displayTransform = _mentionsChild$props.displayTransform,\r\n          appendSpaceOnAdd = _mentionsChild$props.appendSpaceOnAdd,\r\n          onAdd = _mentionsChild$props.onAdd;\r\n      var start = mapPlainTextIndex(value, config, querySequenceStart, 'START');\r\n      var end = start + querySequenceEnd - querySequenceStart;\r\n      var insert = makeMentionsMarkup(markup, id, display);\r\n\r\n      if (appendSpaceOnAdd) {\r\n        insert += ' ';\r\n      }\r\n\r\n      var newValue = spliceString(value, start, end, insert); // Refocus input and set caret position to end of mention\r\n\r\n      _this.inputElement.focus();\r\n\r\n      var displayValue = displayTransform(id, display);\r\n\r\n      if (appendSpaceOnAdd) {\r\n        displayValue += ' ';\r\n      }\r\n\r\n      var newCaretPosition = querySequenceStart + displayValue.length;\r\n\r\n      _this.setState({\r\n        selectionStart: newCaretPosition,\r\n        selectionEnd: newCaretPosition,\r\n        setSelectionAfterMentionChange: true\r\n      }); // Propagate change\r\n\r\n\r\n      var eventMock = {\r\n        target: {\r\n          value: newValue\r\n        }\r\n      };\r\n      var mentions = getMentions(newValue, config);\r\n      var newPlainTextValue = spliceString(plainTextValue, querySequenceStart, querySequenceEnd, displayValue);\r\n\r\n      _this.executeOnChange(eventMock, newValue, newPlainTextValue, mentions);\r\n\r\n      if (onAdd) {\r\n        onAdd(id, display, start, end);\r\n      } // Make sure the suggestions overlay is closed\r\n\r\n\r\n      _this.clearSuggestions();\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"isLoading\", function () {\r\n      var isLoading = false;\r\n      React.Children.forEach(_this.props.children, function (child) {\r\n        isLoading = isLoading || child && child.props.isLoading;\r\n      });\r\n      return isLoading;\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"isOpened\", function () {\r\n      return isNumber(_this.state.selectionStart) && (countSuggestions(_this.state.suggestions) !== 0 || _this.isLoading());\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"_queryId\", 0);\r\n\r\n    _this.suggestions = {};\r\n    _this.uuidSuggestionsOverlay = Math.random().toString(16).substring(2);\r\n    _this.handleCopy = _this.handleCopy.bind(_assertThisInitialized(_this));\r\n    _this.handleCut = _this.handleCut.bind(_assertThisInitialized(_this));\r\n    _this.handlePaste = _this.handlePaste.bind(_assertThisInitialized(_this));\r\n    _this.state = {\r\n      focusIndex: 0,\r\n      selectionStart: null,\r\n      selectionEnd: null,\r\n      suggestions: {},\r\n      caretPosition: null,\r\n      suggestionsPosition: {}\r\n    };\r\n    return _this;\r\n  }\r\n\r\n  _createClass(MentionsInput, [{\r\n    key: \"componentDidMount\",\r\n    value: function componentDidMount() {\r\n      document.addEventListener('copy', this.handleCopy);\r\n      document.addEventListener('cut', this.handleCut);\r\n      document.addEventListener('paste', this.handlePaste);\r\n      this.updateSuggestionsPosition();\r\n    }\r\n  }, {\r\n    key: \"componentDidUpdate\",\r\n    value: function componentDidUpdate(prevProps, prevState) {\r\n      // Update position of suggestions unless this componentDidUpdate was\r\n      // triggered by an update to suggestionsPosition.\r\n      if (prevState.suggestionsPosition === this.state.suggestionsPosition) {\r\n        this.updateSuggestionsPosition();\r\n      } // maintain selection in case a mention is added/removed causing\r\n      // the cursor to jump to the end\r\n\r\n\r\n      if (this.state.setSelectionAfterMentionChange) {\r\n        this.setState({\r\n          setSelectionAfterMentionChange: false\r\n        });\r\n        this.setSelection(this.state.selectionStart, this.state.selectionEnd);\r\n      }\r\n    }\r\n  }, {\r\n    key: \"componentWillUnmount\",\r\n    value: function componentWillUnmount() {\r\n      document.removeEventListener('copy', this.handleCopy);\r\n      document.removeEventListener('cut', this.handleCut);\r\n      document.removeEventListener('paste', this.handlePaste);\r\n    }\r\n  }, {\r\n    key: \"render\",\r\n    value: function render() {\r\n      return /*#__PURE__*/React.createElement(\"div\", _extends({\r\n        ref: this.setContainerElement\r\n      }, this.props.style), this.renderControl(), this.renderSuggestionsOverlay());\r\n    }\r\n  }, {\r\n    key: \"handlePaste\",\r\n    value: function handlePaste(event) {\r\n      if (event.target !== this.inputElement) {\r\n        return;\r\n      }\r\n\r\n      if (!this.supportsClipboardActions(event)) {\r\n        return;\r\n      }\r\n\r\n      event.preventDefault();\r\n      var _this$state3 = this.state,\r\n          selectionStart = _this$state3.selectionStart,\r\n          selectionEnd = _this$state3.selectionEnd;\r\n      var _this$props7 = this.props,\r\n          value = _this$props7.value,\r\n          children = _this$props7.children;\r\n      var config = readConfigFromChildren(children);\r\n      var markupStartIndex = mapPlainTextIndex(value, config, selectionStart, 'START');\r\n      var markupEndIndex = mapPlainTextIndex(value, config, selectionEnd, 'END');\r\n      var pastedMentions = event.clipboardData.getData('text/react-mentions');\r\n      var pastedData = event.clipboardData.getData('text/plain');\r\n      var newValue = spliceString(value, markupStartIndex, markupEndIndex, pastedMentions || pastedData).replace(/\\r/g, '');\r\n      var newPlainTextValue = getPlainText(newValue, config);\r\n      var eventMock = {\r\n        target: _objectSpread(_objectSpread({}, event.target), {}, {\r\n          value: newValue\r\n        })\r\n      };\r\n      this.executeOnChange(eventMock, newValue, newPlainTextValue, getMentions(newValue, config)); // Move the cursor position to the end of the pasted data\r\n\r\n      var startOfMention = findStartOfMentionInPlainText(value, config, selectionStart);\r\n      var nextPos = (startOfMention || selectionStart) + getPlainText(pastedMentions || pastedData, config).length;\r\n      this.setSelection(nextPos, nextPos);\r\n    }\r\n  }, {\r\n    key: \"saveSelectionToClipboard\",\r\n    value: function saveSelectionToClipboard(event) {\r\n      // use the actual selectionStart & selectionEnd instead of the one stored\r\n      // in state to ensure copy & paste also works on disabled inputs & textareas\r\n      var selectionStart = this.inputElement.selectionStart;\r\n      var selectionEnd = this.inputElement.selectionEnd;\r\n      var _this$props8 = this.props,\r\n          children = _this$props8.children,\r\n          value = _this$props8.value;\r\n      var config = readConfigFromChildren(children);\r\n      var markupStartIndex = mapPlainTextIndex(value, config, selectionStart, 'START');\r\n      var markupEndIndex = mapPlainTextIndex(value, config, selectionEnd, 'END');\r\n      event.clipboardData.setData('text/plain', event.target.value.slice(selectionStart, selectionEnd));\r\n      event.clipboardData.setData('text/react-mentions', value.slice(markupStartIndex, markupEndIndex));\r\n    }\r\n  }, {\r\n    key: \"supportsClipboardActions\",\r\n    value: function supportsClipboardActions(event) {\r\n      return !!event.clipboardData;\r\n    }\r\n  }, {\r\n    key: \"handleCopy\",\r\n    value: function handleCopy(event) {\r\n      if (event.target !== this.inputElement) {\r\n        return;\r\n      }\r\n\r\n      if (!this.supportsClipboardActions(event)) {\r\n        return;\r\n      }\r\n\r\n      event.preventDefault();\r\n      this.saveSelectionToClipboard(event);\r\n    }\r\n  }, {\r\n    key: \"handleCut\",\r\n    value: function handleCut(event) {\r\n      if (event.target !== this.inputElement) {\r\n        return;\r\n      }\r\n\r\n      if (!this.supportsClipboardActions(event)) {\r\n        return;\r\n      }\r\n\r\n      event.preventDefault();\r\n      this.saveSelectionToClipboard(event);\r\n      var _this$state4 = this.state,\r\n          selectionStart = _this$state4.selectionStart,\r\n          selectionEnd = _this$state4.selectionEnd;\r\n      var _this$props9 = this.props,\r\n          children = _this$props9.children,\r\n          value = _this$props9.value;\r\n      var config = readConfigFromChildren(children);\r\n      var markupStartIndex = mapPlainTextIndex(value, config, selectionStart, 'START');\r\n      var markupEndIndex = mapPlainTextIndex(value, config, selectionEnd, 'END');\r\n      var newValue = [value.slice(0, markupStartIndex), value.slice(markupEndIndex)].join('');\r\n      var newPlainTextValue = getPlainText(newValue, config);\r\n      var eventMock = {\r\n        target: _objectSpread(_objectSpread({}, event.target), {}, {\r\n          value: newPlainTextValue\r\n        })\r\n      };\r\n      this.executeOnChange(eventMock, newValue, newPlainTextValue, getMentions(value, config));\r\n    } // Handle input element's change event\r\n\r\n  }]);\r\n\r\n  return MentionsInput;\r\n}(React.Component);\r\n/**\r\n * Returns the computed length property value for the provided element.\r\n * Note: According to spec and testing, can count on length values coming back in pixels. See https://developer.mozilla.org/en-US/docs/Web/CSS/used_value#Difference_from_computed_value\r\n */\r\n\r\n\r\n_defineProperty(MentionsInput, \"propTypes\", propTypes);\r\n\r\n_defineProperty(MentionsInput, \"defaultProps\", {\r\n  ignoreAccents: false,\r\n  singleLine: false,\r\n  allowSuggestionsAboveCursor: false,\r\n  onKeyDown: function onKeyDown() {\r\n    return null;\r\n  },\r\n  onSelect: function onSelect() {\r\n    return null;\r\n  },\r\n  onBlur: function onBlur() {\r\n    return null;\r\n  }\r\n});\r\n\r\nvar getComputedStyleLengthProp = function getComputedStyleLengthProp(forElement, propertyName) {\r\n  var length = parseFloat(window.getComputedStyle(forElement, null).getPropertyValue(propertyName));\r\n  return isFinite(length) ? length : 0;\r\n};\r\n\r\nvar isMobileSafari = typeof navigator !== 'undefined' && /iPhone|iPad|iPod/i.test(navigator.userAgent);\r\nvar styled$3 = createDefaultStyle({\r\n  position: 'relative',\r\n  overflowY: 'visible',\r\n  input: {\r\n    display: 'block',\r\n    width: '100%',\r\n    position: 'absolute',\r\n    margin: 0,\r\n    top: 0,\r\n    left: 0,\r\n    boxSizing: 'border-box',\r\n    backgroundColor: 'transparent',\r\n    fontFamily: 'inherit',\r\n    fontSize: 'inherit',\r\n    letterSpacing: 'inherit'\r\n  },\r\n  '&multiLine': {\r\n    input: _objectSpread({\r\n      height: '100%',\r\n      bottom: 0,\r\n      overflow: 'hidden',\r\n      resize: 'none'\r\n    }, isMobileSafari ? {\r\n      marginTop: 1,\r\n      marginLeft: -3\r\n    } : null)\r\n  }\r\n}, function (_ref4) {\r\n  var singleLine = _ref4.singleLine;\r\n  return {\r\n    '&singleLine': singleLine,\r\n    '&multiLine': !singleLine\r\n  };\r\n});\r\nvar MentionsInput$1 = styled$3(MentionsInput);\r\n\r\nvar defaultStyle = {\r\n  fontWeight: 'inherit'\r\n};\r\n\r\nvar Mention = function Mention(_ref) {\r\n  var display = _ref.display,\r\n      style = _ref.style,\r\n      className = _ref.className,\r\n      classNames = _ref.classNames;\r\n  var styles = useStyles(defaultStyle, {\r\n    style: style,\r\n    className: className,\r\n    classNames: classNames\r\n  });\r\n  return /*#__PURE__*/React.createElement(\"strong\", styles, display);\r\n};\r\n\r\nMention.propTypes = {\r\n  /**\r\n   * Called when a new mention is added in the input\r\n   *\r\n   * Example:\r\n   *\r\n   * ```js\r\n   * function(id, display) {\r\n   *   console.log(\"user \" + display + \" was mentioned!\");\r\n   * }\r\n   * ```\r\n   */\r\n  onAdd: PropTypes.func,\r\n  onRemove: PropTypes.func,\r\n  renderSuggestion: PropTypes.func,\r\n  trigger: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(RegExp)]),\r\n  markup: PropTypes.string,\r\n  displayTransform: PropTypes.func,\r\n\r\n  /**\r\n   * If set to `true` spaces will not interrupt matching suggestions\r\n   */\r\n  allowSpaceInQuery: PropTypes.bool,\r\n  isLoading: PropTypes.bool\r\n};\r\nMention.defaultProps = {\r\n  trigger: '@',\r\n  markup: '@[__display__](__id__)',\r\n  displayTransform: function displayTransform(id, display) {\r\n    return display || id;\r\n  },\r\n  onAdd: function onAdd() {\r\n    return null;\r\n  },\r\n  onRemove: function onRemove() {\r\n    return null;\r\n  },\r\n  renderSuggestion: null,\r\n  isLoading: false,\r\n  appendSpaceOnAdd: false\r\n};\r\n\r\nexport { Mention, MentionsInput$1 as MentionsInput };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}