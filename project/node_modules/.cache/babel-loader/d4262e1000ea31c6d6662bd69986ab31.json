{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/NikitaMac/Desktop/Modern Web Development/Homework/modern-web-development-project/project/src/Components/Comments/Comment.js\";\n\nimport CommentForm from \"./CommentForm\";\nimport React from \"react\";\n\nvar Comment = function Comment(_ref) {\n  var comment = _ref.comment,\n      replies = _ref.replies,\n      getReplies = _ref.getReplies,\n      setActiveComment = _ref.setActiveComment,\n      activeComment = _ref.activeComment,\n      currentUser = _ref.currentUser,\n      _ref$filteredIds = _ref.filteredIds,\n      filteredIds = _ref$filteredIds === void 0 ? [] : _ref$filteredIds,\n      _ref$reduxWord = _ref.reduxWord,\n      reduxWord = _ref$reduxWord === void 0 ? \"\" : _ref$reduxWord,\n      updateComment = _ref.updateComment,\n      deleteComment = _ref.deleteComment,\n      addComment = _ref.addComment,\n      _ref$parentId = _ref.parentId,\n      parentId = _ref$parentId === void 0 ? null : _ref$parentId,\n      _ref$usersForMention = _ref.usersForMention,\n      usersForMention = _ref$usersForMention === void 0 ? [] : _ref$usersForMention;\n  var isEditing = activeComment && activeComment.id === comment.id && activeComment.type === \"editing\";\n  var isReplying = activeComment && activeComment.id === comment.id && activeComment.type === \"replying\";\n  var canDelete = currentUser.id === comment.attributes.userId && replies.length === 0;\n  var canReply = Boolean(currentUser.id);\n  var canEdit = currentUser.id === comment.attributes.userId;\n  var replyId = parentId ? parentId : comment.id;\n  var createdAt = new Date(comment.attributes.createdAt).toLocaleDateString();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    key: comment.id,\n    className: \"comment\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-stretch\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-author\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }\n  }, comment.attributes.username), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 11\n    }\n  }, createdAt)), !isEditing && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 24\n    }\n  }, comment.attributes.body), isEditing && /*#__PURE__*/React.createElement(CommentForm, {\n    submitLabel: \"Update\",\n    hasCancelButton: true,\n    initialText: comment.attributes.body,\n    handleSubmit: function handleSubmit(text) {\n      return updateComment(comment.id, text);\n    },\n    handleCancel: function handleCancel() {\n      setActiveComment(null);\n    },\n    usersForMention: usersForMention,\n    currentUser: currentUser,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-actions\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, canReply && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-action\",\n    onClick: function onClick() {\n      return setActiveComment({\n        id: comment.id,\n        type: \"replying\"\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, \"Reply\"), canEdit && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-action\",\n    onClick: function onClick() {\n      return setActiveComment({\n        id: comment.id,\n        type: \"editing\"\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, \"Edit\"), canDelete && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-action\",\n    onClick: function onClick() {\n      return deleteComment(comment.id);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, \"Delete\")), isReplying && /*#__PURE__*/React.createElement(CommentForm, {\n    submitLabel: \"Reply\",\n    handleSubmit: function handleSubmit(text) {\n      addComment(text, currentUser.id, replyId, currentUser.attributes.username);\n    },\n    usersForMention: usersForMention,\n    currentUser: currentUser,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }), replies.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"replies\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, replies.map(function (reply) {\n    return filteredIds.includes(reply.id) || reduxWord === \"\" ? /*#__PURE__*/React.createElement(Comment, {\n      comment: reply,\n      key: reply.id,\n      setActiveComment: setActiveComment,\n      activeComment: activeComment,\n      currentUser: currentUser,\n      filteredIds: filteredIds,\n      reduxWord: reduxWord,\n      updateComment: updateComment,\n      deleteComment: deleteComment,\n      addComment: addComment,\n      parentId: reply.id,\n      getReplies: getReplies,\n      replies: getReplies(reply.id),\n      usersForMention: usersForMention,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 15\n      }\n    }) : /*#__PURE__*/React.createElement(React.Fragment, null);\n  }))));\n};\n\nexport default Comment;","map":{"version":3,"names":["CommentForm","React","Comment","comment","replies","getReplies","setActiveComment","activeComment","currentUser","filteredIds","reduxWord","updateComment","deleteComment","addComment","parentId","usersForMention","isEditing","id","type","isReplying","canDelete","attributes","userId","length","canReply","Boolean","canEdit","replyId","createdAt","Date","toLocaleDateString","username","body","text","map","reply","includes"],"sources":["/Users/NikitaMac/Desktop/Modern Web Development/Homework/modern-web-development-project/project/src/Components/Comments/Comment.js"],"sourcesContent":["import CommentForm from \"./CommentForm\";\nimport React from \"react\";\n\nconst Comment = ({\n  comment,\n  replies,\n  getReplies,\n  setActiveComment,\n  activeComment,\n  currentUser,\n  filteredIds = [],\n  reduxWord = \"\",\n  updateComment,\n  deleteComment,\n  addComment,\n  parentId = null,\n  usersForMention = []\n}) => {\n\n  const isEditing =\n    activeComment &&\n    activeComment.id === comment.id &&\n    activeComment.type === \"editing\";\n\n  const isReplying =\n    activeComment &&\n    activeComment.id === comment.id &&\n    activeComment.type === \"replying\";\n\n  const canDelete = currentUser.id === comment.attributes.userId && replies.length === 0;\n\n  const canReply = Boolean(currentUser.id);\n\n  const canEdit = currentUser.id === comment.attributes.userId;\n\n  const replyId = parentId ? parentId : comment.id;\n\n  const createdAt = new Date(comment.attributes.createdAt).toLocaleDateString();\n\n  return (\n    <div key={comment.id} className=\"comment\">\n      <div className=\"comment-stretch\">\n        <div className=\"comment-content\">\n          <div className=\"comment-author\">{comment.attributes.username}</div>\n          <div>{createdAt}</div>\n        </div>\n\n        {!isEditing && <div className=\"comment-text\">{comment.attributes.body}</div>}\n        \n        {isEditing && (\n          <CommentForm\n            submitLabel=\"Update\"\n            hasCancelButton\n            initialText={comment.attributes.body}\n            handleSubmit={(text) => updateComment(comment.id, text)}\n            handleCancel={() => {\n              setActiveComment(null);\n            }}\n            usersForMention={usersForMention}\n            currentUser={currentUser}\n          />\n        )}\n        <div className=\"comment-actions\">\n          {canReply && (\n            <div\n              className=\"comment-action\"\n              onClick={() =>\n                setActiveComment({ id: comment.id, type: \"replying\" })\n              }\n            >\n              Reply\n            </div>\n          )}\n          {canEdit && (\n            <div\n              className=\"comment-action\"\n              onClick={() =>\n                setActiveComment({ id: comment.id, type: \"editing\" })\n              }\n            >\n              Edit\n            </div>\n          )}\n          {canDelete && (\n            <div\n              className=\"comment-action\"\n              onClick={() => deleteComment(comment.id)}\n            >\n              Delete\n            </div>\n          )}\n        </div>\n        {isReplying && (\n          <CommentForm\n            submitLabel=\"Reply\"\n            handleSubmit={(text) => {addComment(text, currentUser.id, replyId, currentUser.attributes.username)}}\n            usersForMention={usersForMention}\n            currentUser={currentUser}\n          />\n        )}\n        {replies.length > 0 && (\n          <div className=\"replies\">\n            {replies.map((reply) => (\n              (filteredIds.includes(reply.id) || (reduxWord === \"\")) ? \n              <Comment\n                comment={reply}\n                key={reply.id}\n                setActiveComment={setActiveComment}\n                activeComment={activeComment}\n                currentUser={currentUser}\n                filteredIds={filteredIds}\n                reduxWord={reduxWord}\n                updateComment={updateComment}\n                deleteComment={deleteComment}\n                addComment={addComment}\n                parentId={reply.id}\n                getReplies={getReplies}\n                replies={getReplies(reply.id)}\n                usersForMention={usersForMention}\n              />\n              : <></>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Comment;"],"mappings":"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"},"metadata":{},"sourceType":"module"}