{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _Reflect$construct = require(\"@babel/runtime-corejs3/core-js-stable/reflect/construct\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.UnsetOp = exports.SetOp = exports.RemoveOp = exports.RelationOp = exports.Op = exports.IncrementOp = exports.AddUniqueOp = exports.AddOp = void 0;\nexports.opFromJSON = opFromJSON;\n\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\n\nvar _splice = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/splice\"));\n\nvar _indexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/index-of\"));\n\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\n\nvar _isArray = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\"));\n\nvar _arrayContainsObject = _interopRequireDefault(require(\"./arrayContainsObject\"));\n\nvar _decode = _interopRequireDefault(require(\"./decode\"));\n\nvar _encode = _interopRequireDefault(require(\"./encode\"));\n\nvar _ParseObject = _interopRequireDefault(require(\"./ParseObject\"));\n\nvar _ParseRelation = _interopRequireDefault(require(\"./ParseRelation\"));\n\nvar _unique = _interopRequireDefault(require(\"./unique\"));\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = (0, _getPrototypeOf2.default)(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n      result = _Reflect$construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2.default)(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !_Reflect$construct) return false;\n  if (_Reflect$construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(_Reflect$construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction opFromJSON(json\n/*: { [key: string]: any }*/\n)\n/*: ?Op*/\n{\n  if (!json || !json.__op) {\n    return null;\n  }\n\n  switch (json.__op) {\n    case 'Delete':\n      return new UnsetOp();\n\n    case 'Increment':\n      return new IncrementOp(json.amount);\n\n    case 'Add':\n      return new AddOp((0, _decode.default)(json.objects));\n\n    case 'AddUnique':\n      return new AddUniqueOp((0, _decode.default)(json.objects));\n\n    case 'Remove':\n      return new RemoveOp((0, _decode.default)(json.objects));\n\n    case 'AddRelation':\n      {\n        var toAdd = (0, _decode.default)(json.objects);\n\n        if (!(0, _isArray.default)(toAdd)) {\n          return new RelationOp([], []);\n        }\n\n        return new RelationOp(toAdd, []);\n      }\n\n    case 'RemoveRelation':\n      {\n        var toRemove = (0, _decode.default)(json.objects);\n\n        if (!(0, _isArray.default)(toRemove)) {\n          return new RelationOp([], []);\n        }\n\n        return new RelationOp([], toRemove);\n      }\n\n    case 'Batch':\n      {\n        var _toAdd = [];\n        var _toRemove = [];\n\n        for (var i = 0; i < json.ops.length; i++) {\n          if (json.ops[i].__op === 'AddRelation') {\n            _toAdd = (0, _concat.default)(_toAdd).call(_toAdd, (0, _decode.default)(json.ops[i].objects));\n          } else if (json.ops[i].__op === 'RemoveRelation') {\n            _toRemove = (0, _concat.default)(_toRemove).call(_toRemove, (0, _decode.default)(json.ops[i].objects));\n          }\n        }\n\n        return new RelationOp(_toAdd, _toRemove);\n      }\n  }\n\n  return null;\n}\n\nvar Op = /*#__PURE__*/function () {\n  function Op() {\n    (0, _classCallCheck2.default)(this, Op);\n  }\n\n  (0, _createClass2.default)(Op, [{\n    key: \"applyTo\",\n    value: // Empty parent class\n    function ()\n    /*: mixed*/\n    {}\n    /* eslint-disable-line no-unused-vars */\n\n  }, {\n    key: \"mergeWith\",\n    value: function ()\n    /*: ?Op*/\n    {}\n    /* eslint-disable-line no-unused-vars */\n\n  }, {\n    key: \"toJSON\",\n    value: function ()\n    /*: mixed*/\n    {}\n  }]);\n  return Op;\n}();\n\nexports.Op = Op;\n\nvar SetOp = /*#__PURE__*/function (_Op) {\n  (0, _inherits2.default)(SetOp, _Op);\n\n  var _super = _createSuper(SetOp);\n\n  function SetOp(value\n  /*: mixed*/\n  ) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, SetOp);\n    _this = _super.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"_value\", void 0);\n    _this._value = value;\n    return _this;\n  }\n\n  (0, _createClass2.default)(SetOp, [{\n    key: \"applyTo\",\n    value: function ()\n    /*: mixed*/\n    {\n      return this._value;\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function ()\n    /*: SetOp*/\n    {\n      return new SetOp(this._value);\n    }\n  }, {\n    key: \"toJSON\",\n    value: function (offline\n    /*:: ?: boolean*/\n    ) {\n      return (0, _encode.default)(this._value, false, true, undefined, offline);\n    }\n  }]);\n  return SetOp;\n}(Op);\n\nexports.SetOp = SetOp;\n\nvar UnsetOp = /*#__PURE__*/function (_Op2) {\n  (0, _inherits2.default)(UnsetOp, _Op2);\n\n  var _super2 = _createSuper(UnsetOp);\n\n  function UnsetOp() {\n    (0, _classCallCheck2.default)(this, UnsetOp);\n    return _super2.apply(this, arguments);\n  }\n\n  (0, _createClass2.default)(UnsetOp, [{\n    key: \"applyTo\",\n    value: function () {\n      return undefined;\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function ()\n    /*: UnsetOp*/\n    {\n      return new UnsetOp();\n    }\n  }, {\n    key: \"toJSON\",\n    value: function ()\n    /*: { __op: string }*/\n    {\n      return {\n        __op: 'Delete'\n      };\n    }\n  }]);\n  return UnsetOp;\n}(Op);\n\nexports.UnsetOp = UnsetOp;\n\nvar IncrementOp = /*#__PURE__*/function (_Op3) {\n  (0, _inherits2.default)(IncrementOp, _Op3);\n\n  var _super3 = _createSuper(IncrementOp);\n\n  function IncrementOp(amount\n  /*: number*/\n  ) {\n    var _this2;\n\n    (0, _classCallCheck2.default)(this, IncrementOp);\n    _this2 = _super3.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this2), \"_amount\", void 0);\n\n    if (typeof amount !== 'number') {\n      throw new TypeError('Increment Op must be initialized with a numeric amount.');\n    }\n\n    _this2._amount = amount;\n    return _this2;\n  }\n\n  (0, _createClass2.default)(IncrementOp, [{\n    key: \"applyTo\",\n    value: function (value\n    /*: ?mixed*/\n    )\n    /*: number*/\n    {\n      if (typeof value === 'undefined') {\n        return this._amount;\n      }\n\n      if (typeof value !== 'number') {\n        throw new TypeError('Cannot increment a non-numeric value.');\n      }\n\n      return this._amount + value;\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function (previous\n    /*: Op*/\n    )\n    /*: Op*/\n    {\n      if (!previous) {\n        return this;\n      }\n\n      if (previous instanceof SetOp) {\n        return new SetOp(this.applyTo(previous._value));\n      }\n\n      if (previous instanceof UnsetOp) {\n        return new SetOp(this._amount);\n      }\n\n      if (previous instanceof IncrementOp) {\n        return new IncrementOp(this.applyTo(previous._amount));\n      }\n\n      throw new Error('Cannot merge Increment Op with the previous Op');\n    }\n  }, {\n    key: \"toJSON\",\n    value: function ()\n    /*: { __op: string, amount: number }*/\n    {\n      return {\n        __op: 'Increment',\n        amount: this._amount\n      };\n    }\n  }]);\n  return IncrementOp;\n}(Op);\n\nexports.IncrementOp = IncrementOp;\n\nvar AddOp = /*#__PURE__*/function (_Op4) {\n  (0, _inherits2.default)(AddOp, _Op4);\n\n  var _super4 = _createSuper(AddOp);\n\n  function AddOp(value\n  /*: mixed | Array<mixed>*/\n  ) {\n    var _this3;\n\n    (0, _classCallCheck2.default)(this, AddOp);\n    _this3 = _super4.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this3), \"_value\", void 0);\n    _this3._value = (0, _isArray.default)(value) ? value : [value];\n    return _this3;\n  }\n\n  (0, _createClass2.default)(AddOp, [{\n    key: \"applyTo\",\n    value: function (value\n    /*: mixed*/\n    )\n    /*: Array<mixed>*/\n    {\n      if (value == null) {\n        return this._value;\n      }\n\n      if ((0, _isArray.default)(value)) {\n        return (0, _concat.default)(value).call(value, this._value);\n      }\n\n      throw new Error('Cannot add elements to a non-array value');\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function (previous\n    /*: Op*/\n    )\n    /*: Op*/\n    {\n      if (!previous) {\n        return this;\n      }\n\n      if (previous instanceof SetOp) {\n        return new SetOp(this.applyTo(previous._value));\n      }\n\n      if (previous instanceof UnsetOp) {\n        return new SetOp(this._value);\n      }\n\n      if (previous instanceof AddOp) {\n        return new AddOp(this.applyTo(previous._value));\n      }\n\n      throw new Error('Cannot merge Add Op with the previous Op');\n    }\n  }, {\n    key: \"toJSON\",\n    value: function ()\n    /*: { __op: string, objects: mixed }*/\n    {\n      return {\n        __op: 'Add',\n        objects: (0, _encode.default)(this._value, false, true)\n      };\n    }\n  }]);\n  return AddOp;\n}(Op);\n\nexports.AddOp = AddOp;\n\nvar AddUniqueOp = /*#__PURE__*/function (_Op5) {\n  (0, _inherits2.default)(AddUniqueOp, _Op5);\n\n  var _super5 = _createSuper(AddUniqueOp);\n\n  function AddUniqueOp(value\n  /*: mixed | Array<mixed>*/\n  ) {\n    var _this4;\n\n    (0, _classCallCheck2.default)(this, AddUniqueOp);\n    _this4 = _super5.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this4), \"_value\", void 0);\n    _this4._value = (0, _unique.default)((0, _isArray.default)(value) ? value : [value]);\n    return _this4;\n  }\n\n  (0, _createClass2.default)(AddUniqueOp, [{\n    key: \"applyTo\",\n    value: function (value\n    /*: mixed | Array<mixed>*/\n    )\n    /*: Array<mixed>*/\n    {\n      if (value == null) {\n        return this._value || [];\n      }\n\n      if ((0, _isArray.default)(value)) {\n        var _context;\n\n        var toAdd = [];\n        (0, _forEach.default)(_context = this._value).call(_context, function (v) {\n          if (v instanceof _ParseObject.default) {\n            if (!(0, _arrayContainsObject.default)(value, v)) {\n              toAdd.push(v);\n            }\n          } else {\n            if ((0, _indexOf.default)(value).call(value, v) < 0) {\n              toAdd.push(v);\n            }\n          }\n        });\n        return (0, _concat.default)(value).call(value, toAdd);\n      }\n\n      throw new Error('Cannot add elements to a non-array value');\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function (previous\n    /*: Op*/\n    )\n    /*: Op*/\n    {\n      if (!previous) {\n        return this;\n      }\n\n      if (previous instanceof SetOp) {\n        return new SetOp(this.applyTo(previous._value));\n      }\n\n      if (previous instanceof UnsetOp) {\n        return new SetOp(this._value);\n      }\n\n      if (previous instanceof AddUniqueOp) {\n        return new AddUniqueOp(this.applyTo(previous._value));\n      }\n\n      throw new Error('Cannot merge AddUnique Op with the previous Op');\n    }\n  }, {\n    key: \"toJSON\",\n    value: function ()\n    /*: { __op: string, objects: mixed }*/\n    {\n      return {\n        __op: 'AddUnique',\n        objects: (0, _encode.default)(this._value, false, true)\n      };\n    }\n  }]);\n  return AddUniqueOp;\n}(Op);\n\nexports.AddUniqueOp = AddUniqueOp;\n\nvar RemoveOp = /*#__PURE__*/function (_Op6) {\n  (0, _inherits2.default)(RemoveOp, _Op6);\n\n  var _super6 = _createSuper(RemoveOp);\n\n  function RemoveOp(value\n  /*: mixed | Array<mixed>*/\n  ) {\n    var _this5;\n\n    (0, _classCallCheck2.default)(this, RemoveOp);\n    _this5 = _super6.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this5), \"_value\", void 0);\n    _this5._value = (0, _unique.default)((0, _isArray.default)(value) ? value : [value]);\n    return _this5;\n  }\n\n  (0, _createClass2.default)(RemoveOp, [{\n    key: \"applyTo\",\n    value: function (value\n    /*: mixed | Array<mixed>*/\n    )\n    /*: Array<mixed>*/\n    {\n      if (value == null) {\n        return [];\n      }\n\n      if ((0, _isArray.default)(value)) {\n        // var i = value.indexOf(this._value);\n        var removed = (0, _concat.default)(value).call(value, []);\n\n        for (var i = 0; i < this._value.length; i++) {\n          var index = (0, _indexOf.default)(removed).call(removed, this._value[i]);\n\n          while (index > -1) {\n            (0, _splice.default)(removed).call(removed, index, 1);\n            index = (0, _indexOf.default)(removed).call(removed, this._value[i]);\n          }\n\n          if (this._value[i] instanceof _ParseObject.default && this._value[i].id) {\n            for (var j = 0; j < removed.length; j++) {\n              if (removed[j] instanceof _ParseObject.default && this._value[i].id === removed[j].id) {\n                (0, _splice.default)(removed).call(removed, j, 1);\n                j--;\n              }\n            }\n          }\n        }\n\n        return removed;\n      }\n\n      throw new Error('Cannot remove elements from a non-array value');\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function (previous\n    /*: Op*/\n    )\n    /*: Op*/\n    {\n      if (!previous) {\n        return this;\n      }\n\n      if (previous instanceof SetOp) {\n        return new SetOp(this.applyTo(previous._value));\n      }\n\n      if (previous instanceof UnsetOp) {\n        return new UnsetOp();\n      }\n\n      if (previous instanceof RemoveOp) {\n        var _context2;\n\n        var uniques = (0, _concat.default)(_context2 = previous._value).call(_context2, []);\n\n        for (var i = 0; i < this._value.length; i++) {\n          if (this._value[i] instanceof _ParseObject.default) {\n            if (!(0, _arrayContainsObject.default)(uniques, this._value[i])) {\n              uniques.push(this._value[i]);\n            }\n          } else {\n            if ((0, _indexOf.default)(uniques).call(uniques, this._value[i]) < 0) {\n              uniques.push(this._value[i]);\n            }\n          }\n        }\n\n        return new RemoveOp(uniques);\n      }\n\n      throw new Error('Cannot merge Remove Op with the previous Op');\n    }\n  }, {\n    key: \"toJSON\",\n    value: function ()\n    /*: { __op: string, objects: mixed }*/\n    {\n      return {\n        __op: 'Remove',\n        objects: (0, _encode.default)(this._value, false, true)\n      };\n    }\n  }]);\n  return RemoveOp;\n}(Op);\n\nexports.RemoveOp = RemoveOp;\n\nvar RelationOp = /*#__PURE__*/function (_Op7) {\n  (0, _inherits2.default)(RelationOp, _Op7);\n\n  var _super7 = _createSuper(RelationOp);\n\n  function RelationOp(adds\n  /*: Array<ParseObject | string>*/\n  , removes\n  /*: Array<ParseObject | string>*/\n  ) {\n    var _this6;\n\n    (0, _classCallCheck2.default)(this, RelationOp);\n    _this6 = _super7.call(this);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this6), \"_targetClassName\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this6), \"relationsToAdd\", void 0);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this6), \"relationsToRemove\", void 0);\n    _this6._targetClassName = null;\n\n    if ((0, _isArray.default)(adds)) {\n      _this6.relationsToAdd = (0, _unique.default)((0, _map.default)(adds).call(adds, _this6._extractId, (0, _assertThisInitialized2.default)(_this6)));\n    }\n\n    if ((0, _isArray.default)(removes)) {\n      _this6.relationsToRemove = (0, _unique.default)((0, _map.default)(removes).call(removes, _this6._extractId, (0, _assertThisInitialized2.default)(_this6)));\n    }\n\n    return _this6;\n  }\n\n  (0, _createClass2.default)(RelationOp, [{\n    key: \"_extractId\",\n    value: function (obj\n    /*: string | ParseObject*/\n    )\n    /*: string*/\n    {\n      if (typeof obj === 'string') {\n        return obj;\n      }\n\n      if (!obj.id) {\n        throw new Error('You cannot add or remove an unsaved Parse Object from a relation');\n      }\n\n      if (!this._targetClassName) {\n        this._targetClassName = obj.className;\n      }\n\n      if (this._targetClassName !== obj.className) {\n        throw new Error('Tried to create a Relation with 2 different object types: ' + this._targetClassName + ' and ' + obj.className + '.');\n      }\n\n      return obj.id;\n    }\n  }, {\n    key: \"applyTo\",\n    value: function (value\n    /*: mixed*/\n    , object\n    /*:: ?: { className: string, id: ?string }*/\n    , key\n    /*:: ?: string*/\n    )\n    /*: ?ParseRelation*/\n    {\n      if (!value) {\n        var _context3;\n\n        if (!object || !key) {\n          throw new Error('Cannot apply a RelationOp without either a previous value, or an object and a key');\n        }\n\n        var parent = new _ParseObject.default(object.className);\n\n        if (object.id && (0, _indexOf.default)(_context3 = object.id).call(_context3, 'local') === 0) {\n          parent._localId = object.id;\n        } else if (object.id) {\n          parent.id = object.id;\n        }\n\n        var relation = new _ParseRelation.default(parent, key);\n        relation.targetClassName = this._targetClassName;\n        return relation;\n      }\n\n      if (value instanceof _ParseRelation.default) {\n        if (this._targetClassName) {\n          if (value.targetClassName) {\n            if (this._targetClassName !== value.targetClassName) {\n              throw new Error('Related object must be a ' + value.targetClassName + ', but a ' + this._targetClassName + ' was passed in.');\n            }\n          } else {\n            value.targetClassName = this._targetClassName;\n          }\n        }\n\n        return value;\n      } else {\n        throw new Error('Relation cannot be applied to a non-relation field');\n      }\n    }\n  }, {\n    key: \"mergeWith\",\n    value: function (previous\n    /*: Op*/\n    )\n    /*: Op*/\n    {\n      if (!previous) {\n        return this;\n      } else if (previous instanceof UnsetOp) {\n        throw new Error('You cannot modify a relation after deleting it.');\n      } else if (previous instanceof SetOp && previous._value instanceof _ParseRelation.default) {\n        return this;\n      } else if (previous instanceof RelationOp) {\n        var _context4, _context5, _context6, _context7, _context8, _context9;\n\n        if (previous._targetClassName && previous._targetClassName !== this._targetClassName) {\n          throw new Error('Related object must be of class ' + previous._targetClassName + ', but ' + (this._targetClassName || 'null') + ' was passed in.');\n        }\n\n        var newAdd = (0, _concat.default)(_context4 = previous.relationsToAdd).call(_context4, []);\n        (0, _forEach.default)(_context5 = this.relationsToRemove).call(_context5, function (r) {\n          var index = (0, _indexOf.default)(newAdd).call(newAdd, r);\n\n          if (index > -1) {\n            (0, _splice.default)(newAdd).call(newAdd, index, 1);\n          }\n        });\n        (0, _forEach.default)(_context6 = this.relationsToAdd).call(_context6, function (r) {\n          var index = (0, _indexOf.default)(newAdd).call(newAdd, r);\n\n          if (index < 0) {\n            newAdd.push(r);\n          }\n        });\n        var newRemove = (0, _concat.default)(_context7 = previous.relationsToRemove).call(_context7, []);\n        (0, _forEach.default)(_context8 = this.relationsToAdd).call(_context8, function (r) {\n          var index = (0, _indexOf.default)(newRemove).call(newRemove, r);\n\n          if (index > -1) {\n            (0, _splice.default)(newRemove).call(newRemove, index, 1);\n          }\n        });\n        (0, _forEach.default)(_context9 = this.relationsToRemove).call(_context9, function (r) {\n          var index = (0, _indexOf.default)(newRemove).call(newRemove, r);\n\n          if (index < 0) {\n            newRemove.push(r);\n          }\n        });\n        var newRelation = new RelationOp(newAdd, newRemove);\n        newRelation._targetClassName = this._targetClassName;\n        return newRelation;\n      }\n\n      throw new Error('Cannot merge Relation Op with the previous Op');\n    }\n  }, {\n    key: \"toJSON\",\n    value: function ()\n    /*: { __op?: string, objects?: mixed, ops?: mixed }*/\n    {\n      var _this7 = this;\n\n      var idToPointer = function (id) {\n        return {\n          __type: 'Pointer',\n          className: _this7._targetClassName,\n          objectId: id\n        };\n      };\n\n      var adds = null;\n      var removes = null;\n      var pointers = null;\n\n      if (this.relationsToAdd.length > 0) {\n        var _context10;\n\n        pointers = (0, _map.default)(_context10 = this.relationsToAdd).call(_context10, idToPointer);\n        adds = {\n          __op: 'AddRelation',\n          objects: pointers\n        };\n      }\n\n      if (this.relationsToRemove.length > 0) {\n        var _context11;\n\n        pointers = (0, _map.default)(_context11 = this.relationsToRemove).call(_context11, idToPointer);\n        removes = {\n          __op: 'RemoveRelation',\n          objects: pointers\n        };\n      }\n\n      if (adds && removes) {\n        return {\n          __op: 'Batch',\n          ops: [adds, removes]\n        };\n      }\n\n      return adds || removes || {};\n    }\n  }]);\n  return RelationOp;\n}(Op);\n\nexports.RelationOp = RelationOp;","map":{"version":3,"names":["_interopRequireDefault","require","_Object$defineProperty","_Reflect$construct","exports","value","UnsetOp","SetOp","RemoveOp","RelationOp","Op","IncrementOp","AddUniqueOp","AddOp","opFromJSON","_map","_splice","_indexOf","_forEach","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_defineProperty2","_classCallCheck2","_createClass2","_concat","_isArray","_arrayContainsObject","_decode","_encode","_ParseObject","_ParseRelation","_unique","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","Super","default","result","NewTarget","constructor","arguments","apply","Reflect","sham","Proxy","Boolean","prototype","valueOf","call","e","json","__op","amount","objects","toAdd","toRemove","_toAdd","_toRemove","i","ops","length","key","_Op","_super","_this","_value","offline","undefined","_Op2","_super2","_Op3","_super3","_this2","TypeError","_amount","previous","applyTo","Error","_Op4","_super4","_this3","_Op5","_super5","_this4","_context","v","push","_Op6","_super6","_this5","removed","index","id","j","_context2","uniques","_Op7","_super7","adds","removes","_this6","_targetClassName","relationsToAdd","_extractId","relationsToRemove","obj","className","object","_context3","parent","_localId","relation","targetClassName","_context4","_context5","_context6","_context7","_context8","_context9","newAdd","r","newRemove","newRelation","_this7","idToPointer","__type","objectId","pointers","_context10","_context11"],"sources":["C:/Users/brosk/Documents/Web Dev/modern-web-development-project/project/node_modules/parse/lib/browser/ParseOp.js"],"sourcesContent":["\"use strict\";\r\n\r\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\r\n\r\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\r\n\r\nvar _Reflect$construct = require(\"@babel/runtime-corejs3/core-js-stable/reflect/construct\");\r\n\r\n_Object$defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\n\r\nexports.UnsetOp = exports.SetOp = exports.RemoveOp = exports.RelationOp = exports.Op = exports.IncrementOp = exports.AddUniqueOp = exports.AddOp = void 0;\r\nexports.opFromJSON = opFromJSON;\r\n\r\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\r\n\r\nvar _splice = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/splice\"));\r\n\r\nvar _indexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/index-of\"));\r\n\r\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\r\n\r\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/assertThisInitialized\"));\r\n\r\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/inherits\"));\r\n\r\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/possibleConstructorReturn\"));\r\n\r\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/getPrototypeOf\"));\r\n\r\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\r\n\r\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\r\n\r\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\r\n\r\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\r\n\r\nvar _isArray = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\"));\r\n\r\nvar _arrayContainsObject = _interopRequireDefault(require(\"./arrayContainsObject\"));\r\n\r\nvar _decode = _interopRequireDefault(require(\"./decode\"));\r\n\r\nvar _encode = _interopRequireDefault(require(\"./encode\"));\r\n\r\nvar _ParseObject = _interopRequireDefault(require(\"./ParseObject\"));\r\n\r\nvar _ParseRelation = _interopRequireDefault(require(\"./ParseRelation\"));\r\n\r\nvar _unique = _interopRequireDefault(require(\"./unique\"));\r\n\r\nfunction _createSuper(Derived) {\r\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\r\n\r\n  return function () {\r\n    var Super = (0, _getPrototypeOf2.default)(Derived),\r\n        result;\r\n\r\n    if (hasNativeReflectConstruct) {\r\n      var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\r\n      result = _Reflect$construct(Super, arguments, NewTarget);\r\n    } else {\r\n      result = Super.apply(this, arguments);\r\n    }\r\n\r\n    return (0, _possibleConstructorReturn2.default)(this, result);\r\n  };\r\n}\r\n\r\nfunction _isNativeReflectConstruct() {\r\n  if (typeof Reflect === \"undefined\" || !_Reflect$construct) return false;\r\n  if (_Reflect$construct.sham) return false;\r\n  if (typeof Proxy === \"function\") return true;\r\n\r\n  try {\r\n    Boolean.prototype.valueOf.call(_Reflect$construct(Boolean, [], function () {}));\r\n    return true;\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction opFromJSON(json\r\n/*: { [key: string]: any }*/\r\n)\r\n/*: ?Op*/\r\n{\r\n  if (!json || !json.__op) {\r\n    return null;\r\n  }\r\n\r\n  switch (json.__op) {\r\n    case 'Delete':\r\n      return new UnsetOp();\r\n\r\n    case 'Increment':\r\n      return new IncrementOp(json.amount);\r\n\r\n    case 'Add':\r\n      return new AddOp((0, _decode.default)(json.objects));\r\n\r\n    case 'AddUnique':\r\n      return new AddUniqueOp((0, _decode.default)(json.objects));\r\n\r\n    case 'Remove':\r\n      return new RemoveOp((0, _decode.default)(json.objects));\r\n\r\n    case 'AddRelation':\r\n      {\r\n        var toAdd = (0, _decode.default)(json.objects);\r\n\r\n        if (!(0, _isArray.default)(toAdd)) {\r\n          return new RelationOp([], []);\r\n        }\r\n\r\n        return new RelationOp(toAdd, []);\r\n      }\r\n\r\n    case 'RemoveRelation':\r\n      {\r\n        var toRemove = (0, _decode.default)(json.objects);\r\n\r\n        if (!(0, _isArray.default)(toRemove)) {\r\n          return new RelationOp([], []);\r\n        }\r\n\r\n        return new RelationOp([], toRemove);\r\n      }\r\n\r\n    case 'Batch':\r\n      {\r\n        var _toAdd = [];\r\n        var _toRemove = [];\r\n\r\n        for (var i = 0; i < json.ops.length; i++) {\r\n          if (json.ops[i].__op === 'AddRelation') {\r\n            _toAdd = (0, _concat.default)(_toAdd).call(_toAdd, (0, _decode.default)(json.ops[i].objects));\r\n          } else if (json.ops[i].__op === 'RemoveRelation') {\r\n            _toRemove = (0, _concat.default)(_toRemove).call(_toRemove, (0, _decode.default)(json.ops[i].objects));\r\n          }\r\n        }\r\n\r\n        return new RelationOp(_toAdd, _toRemove);\r\n      }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nvar Op = /*#__PURE__*/function () {\r\n  function Op() {\r\n    (0, _classCallCheck2.default)(this, Op);\r\n  }\r\n\r\n  (0, _createClass2.default)(Op, [{\r\n    key: \"applyTo\",\r\n    value: // Empty parent class\r\n    function ()\r\n    /*: mixed*/\r\n    {}\r\n    /* eslint-disable-line no-unused-vars */\r\n\r\n  }, {\r\n    key: \"mergeWith\",\r\n    value: function ()\r\n    /*: ?Op*/\r\n    {}\r\n    /* eslint-disable-line no-unused-vars */\r\n\r\n  }, {\r\n    key: \"toJSON\",\r\n    value: function ()\r\n    /*: mixed*/\r\n    {}\r\n  }]);\r\n  return Op;\r\n}();\r\n\r\nexports.Op = Op;\r\n\r\nvar SetOp = /*#__PURE__*/function (_Op) {\r\n  (0, _inherits2.default)(SetOp, _Op);\r\n\r\n  var _super = _createSuper(SetOp);\r\n\r\n  function SetOp(value\r\n  /*: mixed*/\r\n  ) {\r\n    var _this;\r\n\r\n    (0, _classCallCheck2.default)(this, SetOp);\r\n    _this = _super.call(this);\r\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"_value\", void 0);\r\n    _this._value = value;\r\n    return _this;\r\n  }\r\n\r\n  (0, _createClass2.default)(SetOp, [{\r\n    key: \"applyTo\",\r\n    value: function ()\r\n    /*: mixed*/\r\n    {\r\n      return this._value;\r\n    }\r\n  }, {\r\n    key: \"mergeWith\",\r\n    value: function ()\r\n    /*: SetOp*/\r\n    {\r\n      return new SetOp(this._value);\r\n    }\r\n  }, {\r\n    key: \"toJSON\",\r\n    value: function (offline\r\n    /*:: ?: boolean*/\r\n    ) {\r\n      return (0, _encode.default)(this._value, false, true, undefined, offline);\r\n    }\r\n  }]);\r\n  return SetOp;\r\n}(Op);\r\n\r\nexports.SetOp = SetOp;\r\n\r\nvar UnsetOp = /*#__PURE__*/function (_Op2) {\r\n  (0, _inherits2.default)(UnsetOp, _Op2);\r\n\r\n  var _super2 = _createSuper(UnsetOp);\r\n\r\n  function UnsetOp() {\r\n    (0, _classCallCheck2.default)(this, UnsetOp);\r\n    return _super2.apply(this, arguments);\r\n  }\r\n\r\n  (0, _createClass2.default)(UnsetOp, [{\r\n    key: \"applyTo\",\r\n    value: function () {\r\n      return undefined;\r\n    }\r\n  }, {\r\n    key: \"mergeWith\",\r\n    value: function ()\r\n    /*: UnsetOp*/\r\n    {\r\n      return new UnsetOp();\r\n    }\r\n  }, {\r\n    key: \"toJSON\",\r\n    value: function ()\r\n    /*: { __op: string }*/\r\n    {\r\n      return {\r\n        __op: 'Delete'\r\n      };\r\n    }\r\n  }]);\r\n  return UnsetOp;\r\n}(Op);\r\n\r\nexports.UnsetOp = UnsetOp;\r\n\r\nvar IncrementOp = /*#__PURE__*/function (_Op3) {\r\n  (0, _inherits2.default)(IncrementOp, _Op3);\r\n\r\n  var _super3 = _createSuper(IncrementOp);\r\n\r\n  function IncrementOp(amount\r\n  /*: number*/\r\n  ) {\r\n    var _this2;\r\n\r\n    (0, _classCallCheck2.default)(this, IncrementOp);\r\n    _this2 = _super3.call(this);\r\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this2), \"_amount\", void 0);\r\n\r\n    if (typeof amount !== 'number') {\r\n      throw new TypeError('Increment Op must be initialized with a numeric amount.');\r\n    }\r\n\r\n    _this2._amount = amount;\r\n    return _this2;\r\n  }\r\n\r\n  (0, _createClass2.default)(IncrementOp, [{\r\n    key: \"applyTo\",\r\n    value: function (value\r\n    /*: ?mixed*/\r\n    )\r\n    /*: number*/\r\n    {\r\n      if (typeof value === 'undefined') {\r\n        return this._amount;\r\n      }\r\n\r\n      if (typeof value !== 'number') {\r\n        throw new TypeError('Cannot increment a non-numeric value.');\r\n      }\r\n\r\n      return this._amount + value;\r\n    }\r\n  }, {\r\n    key: \"mergeWith\",\r\n    value: function (previous\r\n    /*: Op*/\r\n    )\r\n    /*: Op*/\r\n    {\r\n      if (!previous) {\r\n        return this;\r\n      }\r\n\r\n      if (previous instanceof SetOp) {\r\n        return new SetOp(this.applyTo(previous._value));\r\n      }\r\n\r\n      if (previous instanceof UnsetOp) {\r\n        return new SetOp(this._amount);\r\n      }\r\n\r\n      if (previous instanceof IncrementOp) {\r\n        return new IncrementOp(this.applyTo(previous._amount));\r\n      }\r\n\r\n      throw new Error('Cannot merge Increment Op with the previous Op');\r\n    }\r\n  }, {\r\n    key: \"toJSON\",\r\n    value: function ()\r\n    /*: { __op: string, amount: number }*/\r\n    {\r\n      return {\r\n        __op: 'Increment',\r\n        amount: this._amount\r\n      };\r\n    }\r\n  }]);\r\n  return IncrementOp;\r\n}(Op);\r\n\r\nexports.IncrementOp = IncrementOp;\r\n\r\nvar AddOp = /*#__PURE__*/function (_Op4) {\r\n  (0, _inherits2.default)(AddOp, _Op4);\r\n\r\n  var _super4 = _createSuper(AddOp);\r\n\r\n  function AddOp(value\r\n  /*: mixed | Array<mixed>*/\r\n  ) {\r\n    var _this3;\r\n\r\n    (0, _classCallCheck2.default)(this, AddOp);\r\n    _this3 = _super4.call(this);\r\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this3), \"_value\", void 0);\r\n    _this3._value = (0, _isArray.default)(value) ? value : [value];\r\n    return _this3;\r\n  }\r\n\r\n  (0, _createClass2.default)(AddOp, [{\r\n    key: \"applyTo\",\r\n    value: function (value\r\n    /*: mixed*/\r\n    )\r\n    /*: Array<mixed>*/\r\n    {\r\n      if (value == null) {\r\n        return this._value;\r\n      }\r\n\r\n      if ((0, _isArray.default)(value)) {\r\n        return (0, _concat.default)(value).call(value, this._value);\r\n      }\r\n\r\n      throw new Error('Cannot add elements to a non-array value');\r\n    }\r\n  }, {\r\n    key: \"mergeWith\",\r\n    value: function (previous\r\n    /*: Op*/\r\n    )\r\n    /*: Op*/\r\n    {\r\n      if (!previous) {\r\n        return this;\r\n      }\r\n\r\n      if (previous instanceof SetOp) {\r\n        return new SetOp(this.applyTo(previous._value));\r\n      }\r\n\r\n      if (previous instanceof UnsetOp) {\r\n        return new SetOp(this._value);\r\n      }\r\n\r\n      if (previous instanceof AddOp) {\r\n        return new AddOp(this.applyTo(previous._value));\r\n      }\r\n\r\n      throw new Error('Cannot merge Add Op with the previous Op');\r\n    }\r\n  }, {\r\n    key: \"toJSON\",\r\n    value: function ()\r\n    /*: { __op: string, objects: mixed }*/\r\n    {\r\n      return {\r\n        __op: 'Add',\r\n        objects: (0, _encode.default)(this._value, false, true)\r\n      };\r\n    }\r\n  }]);\r\n  return AddOp;\r\n}(Op);\r\n\r\nexports.AddOp = AddOp;\r\n\r\nvar AddUniqueOp = /*#__PURE__*/function (_Op5) {\r\n  (0, _inherits2.default)(AddUniqueOp, _Op5);\r\n\r\n  var _super5 = _createSuper(AddUniqueOp);\r\n\r\n  function AddUniqueOp(value\r\n  /*: mixed | Array<mixed>*/\r\n  ) {\r\n    var _this4;\r\n\r\n    (0, _classCallCheck2.default)(this, AddUniqueOp);\r\n    _this4 = _super5.call(this);\r\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this4), \"_value\", void 0);\r\n    _this4._value = (0, _unique.default)((0, _isArray.default)(value) ? value : [value]);\r\n    return _this4;\r\n  }\r\n\r\n  (0, _createClass2.default)(AddUniqueOp, [{\r\n    key: \"applyTo\",\r\n    value: function (value\r\n    /*: mixed | Array<mixed>*/\r\n    )\r\n    /*: Array<mixed>*/\r\n    {\r\n      if (value == null) {\r\n        return this._value || [];\r\n      }\r\n\r\n      if ((0, _isArray.default)(value)) {\r\n        var _context;\r\n\r\n        var toAdd = [];\r\n        (0, _forEach.default)(_context = this._value).call(_context, function (v) {\r\n          if (v instanceof _ParseObject.default) {\r\n            if (!(0, _arrayContainsObject.default)(value, v)) {\r\n              toAdd.push(v);\r\n            }\r\n          } else {\r\n            if ((0, _indexOf.default)(value).call(value, v) < 0) {\r\n              toAdd.push(v);\r\n            }\r\n          }\r\n        });\r\n        return (0, _concat.default)(value).call(value, toAdd);\r\n      }\r\n\r\n      throw new Error('Cannot add elements to a non-array value');\r\n    }\r\n  }, {\r\n    key: \"mergeWith\",\r\n    value: function (previous\r\n    /*: Op*/\r\n    )\r\n    /*: Op*/\r\n    {\r\n      if (!previous) {\r\n        return this;\r\n      }\r\n\r\n      if (previous instanceof SetOp) {\r\n        return new SetOp(this.applyTo(previous._value));\r\n      }\r\n\r\n      if (previous instanceof UnsetOp) {\r\n        return new SetOp(this._value);\r\n      }\r\n\r\n      if (previous instanceof AddUniqueOp) {\r\n        return new AddUniqueOp(this.applyTo(previous._value));\r\n      }\r\n\r\n      throw new Error('Cannot merge AddUnique Op with the previous Op');\r\n    }\r\n  }, {\r\n    key: \"toJSON\",\r\n    value: function ()\r\n    /*: { __op: string, objects: mixed }*/\r\n    {\r\n      return {\r\n        __op: 'AddUnique',\r\n        objects: (0, _encode.default)(this._value, false, true)\r\n      };\r\n    }\r\n  }]);\r\n  return AddUniqueOp;\r\n}(Op);\r\n\r\nexports.AddUniqueOp = AddUniqueOp;\r\n\r\nvar RemoveOp = /*#__PURE__*/function (_Op6) {\r\n  (0, _inherits2.default)(RemoveOp, _Op6);\r\n\r\n  var _super6 = _createSuper(RemoveOp);\r\n\r\n  function RemoveOp(value\r\n  /*: mixed | Array<mixed>*/\r\n  ) {\r\n    var _this5;\r\n\r\n    (0, _classCallCheck2.default)(this, RemoveOp);\r\n    _this5 = _super6.call(this);\r\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this5), \"_value\", void 0);\r\n    _this5._value = (0, _unique.default)((0, _isArray.default)(value) ? value : [value]);\r\n    return _this5;\r\n  }\r\n\r\n  (0, _createClass2.default)(RemoveOp, [{\r\n    key: \"applyTo\",\r\n    value: function (value\r\n    /*: mixed | Array<mixed>*/\r\n    )\r\n    /*: Array<mixed>*/\r\n    {\r\n      if (value == null) {\r\n        return [];\r\n      }\r\n\r\n      if ((0, _isArray.default)(value)) {\r\n        // var i = value.indexOf(this._value);\r\n        var removed = (0, _concat.default)(value).call(value, []);\r\n\r\n        for (var i = 0; i < this._value.length; i++) {\r\n          var index = (0, _indexOf.default)(removed).call(removed, this._value[i]);\r\n\r\n          while (index > -1) {\r\n            (0, _splice.default)(removed).call(removed, index, 1);\r\n            index = (0, _indexOf.default)(removed).call(removed, this._value[i]);\r\n          }\r\n\r\n          if (this._value[i] instanceof _ParseObject.default && this._value[i].id) {\r\n            for (var j = 0; j < removed.length; j++) {\r\n              if (removed[j] instanceof _ParseObject.default && this._value[i].id === removed[j].id) {\r\n                (0, _splice.default)(removed).call(removed, j, 1);\r\n                j--;\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        return removed;\r\n      }\r\n\r\n      throw new Error('Cannot remove elements from a non-array value');\r\n    }\r\n  }, {\r\n    key: \"mergeWith\",\r\n    value: function (previous\r\n    /*: Op*/\r\n    )\r\n    /*: Op*/\r\n    {\r\n      if (!previous) {\r\n        return this;\r\n      }\r\n\r\n      if (previous instanceof SetOp) {\r\n        return new SetOp(this.applyTo(previous._value));\r\n      }\r\n\r\n      if (previous instanceof UnsetOp) {\r\n        return new UnsetOp();\r\n      }\r\n\r\n      if (previous instanceof RemoveOp) {\r\n        var _context2;\r\n\r\n        var uniques = (0, _concat.default)(_context2 = previous._value).call(_context2, []);\r\n\r\n        for (var i = 0; i < this._value.length; i++) {\r\n          if (this._value[i] instanceof _ParseObject.default) {\r\n            if (!(0, _arrayContainsObject.default)(uniques, this._value[i])) {\r\n              uniques.push(this._value[i]);\r\n            }\r\n          } else {\r\n            if ((0, _indexOf.default)(uniques).call(uniques, this._value[i]) < 0) {\r\n              uniques.push(this._value[i]);\r\n            }\r\n          }\r\n        }\r\n\r\n        return new RemoveOp(uniques);\r\n      }\r\n\r\n      throw new Error('Cannot merge Remove Op with the previous Op');\r\n    }\r\n  }, {\r\n    key: \"toJSON\",\r\n    value: function ()\r\n    /*: { __op: string, objects: mixed }*/\r\n    {\r\n      return {\r\n        __op: 'Remove',\r\n        objects: (0, _encode.default)(this._value, false, true)\r\n      };\r\n    }\r\n  }]);\r\n  return RemoveOp;\r\n}(Op);\r\n\r\nexports.RemoveOp = RemoveOp;\r\n\r\nvar RelationOp = /*#__PURE__*/function (_Op7) {\r\n  (0, _inherits2.default)(RelationOp, _Op7);\r\n\r\n  var _super7 = _createSuper(RelationOp);\r\n\r\n  function RelationOp(adds\r\n  /*: Array<ParseObject | string>*/\r\n  , removes\r\n  /*: Array<ParseObject | string>*/\r\n  ) {\r\n    var _this6;\r\n\r\n    (0, _classCallCheck2.default)(this, RelationOp);\r\n    _this6 = _super7.call(this);\r\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this6), \"_targetClassName\", void 0);\r\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this6), \"relationsToAdd\", void 0);\r\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this6), \"relationsToRemove\", void 0);\r\n    _this6._targetClassName = null;\r\n\r\n    if ((0, _isArray.default)(adds)) {\r\n      _this6.relationsToAdd = (0, _unique.default)((0, _map.default)(adds).call(adds, _this6._extractId, (0, _assertThisInitialized2.default)(_this6)));\r\n    }\r\n\r\n    if ((0, _isArray.default)(removes)) {\r\n      _this6.relationsToRemove = (0, _unique.default)((0, _map.default)(removes).call(removes, _this6._extractId, (0, _assertThisInitialized2.default)(_this6)));\r\n    }\r\n\r\n    return _this6;\r\n  }\r\n\r\n  (0, _createClass2.default)(RelationOp, [{\r\n    key: \"_extractId\",\r\n    value: function (obj\r\n    /*: string | ParseObject*/\r\n    )\r\n    /*: string*/\r\n    {\r\n      if (typeof obj === 'string') {\r\n        return obj;\r\n      }\r\n\r\n      if (!obj.id) {\r\n        throw new Error('You cannot add or remove an unsaved Parse Object from a relation');\r\n      }\r\n\r\n      if (!this._targetClassName) {\r\n        this._targetClassName = obj.className;\r\n      }\r\n\r\n      if (this._targetClassName !== obj.className) {\r\n        throw new Error('Tried to create a Relation with 2 different object types: ' + this._targetClassName + ' and ' + obj.className + '.');\r\n      }\r\n\r\n      return obj.id;\r\n    }\r\n  }, {\r\n    key: \"applyTo\",\r\n    value: function (value\r\n    /*: mixed*/\r\n    , object\r\n    /*:: ?: { className: string, id: ?string }*/\r\n    , key\r\n    /*:: ?: string*/\r\n    )\r\n    /*: ?ParseRelation*/\r\n    {\r\n      if (!value) {\r\n        var _context3;\r\n\r\n        if (!object || !key) {\r\n          throw new Error('Cannot apply a RelationOp without either a previous value, or an object and a key');\r\n        }\r\n\r\n        var parent = new _ParseObject.default(object.className);\r\n\r\n        if (object.id && (0, _indexOf.default)(_context3 = object.id).call(_context3, 'local') === 0) {\r\n          parent._localId = object.id;\r\n        } else if (object.id) {\r\n          parent.id = object.id;\r\n        }\r\n\r\n        var relation = new _ParseRelation.default(parent, key);\r\n        relation.targetClassName = this._targetClassName;\r\n        return relation;\r\n      }\r\n\r\n      if (value instanceof _ParseRelation.default) {\r\n        if (this._targetClassName) {\r\n          if (value.targetClassName) {\r\n            if (this._targetClassName !== value.targetClassName) {\r\n              throw new Error('Related object must be a ' + value.targetClassName + ', but a ' + this._targetClassName + ' was passed in.');\r\n            }\r\n          } else {\r\n            value.targetClassName = this._targetClassName;\r\n          }\r\n        }\r\n\r\n        return value;\r\n      } else {\r\n        throw new Error('Relation cannot be applied to a non-relation field');\r\n      }\r\n    }\r\n  }, {\r\n    key: \"mergeWith\",\r\n    value: function (previous\r\n    /*: Op*/\r\n    )\r\n    /*: Op*/\r\n    {\r\n      if (!previous) {\r\n        return this;\r\n      } else if (previous instanceof UnsetOp) {\r\n        throw new Error('You cannot modify a relation after deleting it.');\r\n      } else if (previous instanceof SetOp && previous._value instanceof _ParseRelation.default) {\r\n        return this;\r\n      } else if (previous instanceof RelationOp) {\r\n        var _context4, _context5, _context6, _context7, _context8, _context9;\r\n\r\n        if (previous._targetClassName && previous._targetClassName !== this._targetClassName) {\r\n          throw new Error('Related object must be of class ' + previous._targetClassName + ', but ' + (this._targetClassName || 'null') + ' was passed in.');\r\n        }\r\n\r\n        var newAdd = (0, _concat.default)(_context4 = previous.relationsToAdd).call(_context4, []);\r\n        (0, _forEach.default)(_context5 = this.relationsToRemove).call(_context5, function (r) {\r\n          var index = (0, _indexOf.default)(newAdd).call(newAdd, r);\r\n\r\n          if (index > -1) {\r\n            (0, _splice.default)(newAdd).call(newAdd, index, 1);\r\n          }\r\n        });\r\n        (0, _forEach.default)(_context6 = this.relationsToAdd).call(_context6, function (r) {\r\n          var index = (0, _indexOf.default)(newAdd).call(newAdd, r);\r\n\r\n          if (index < 0) {\r\n            newAdd.push(r);\r\n          }\r\n        });\r\n        var newRemove = (0, _concat.default)(_context7 = previous.relationsToRemove).call(_context7, []);\r\n        (0, _forEach.default)(_context8 = this.relationsToAdd).call(_context8, function (r) {\r\n          var index = (0, _indexOf.default)(newRemove).call(newRemove, r);\r\n\r\n          if (index > -1) {\r\n            (0, _splice.default)(newRemove).call(newRemove, index, 1);\r\n          }\r\n        });\r\n        (0, _forEach.default)(_context9 = this.relationsToRemove).call(_context9, function (r) {\r\n          var index = (0, _indexOf.default)(newRemove).call(newRemove, r);\r\n\r\n          if (index < 0) {\r\n            newRemove.push(r);\r\n          }\r\n        });\r\n        var newRelation = new RelationOp(newAdd, newRemove);\r\n        newRelation._targetClassName = this._targetClassName;\r\n        return newRelation;\r\n      }\r\n\r\n      throw new Error('Cannot merge Relation Op with the previous Op');\r\n    }\r\n  }, {\r\n    key: \"toJSON\",\r\n    value: function ()\r\n    /*: { __op?: string, objects?: mixed, ops?: mixed }*/\r\n    {\r\n      var _this7 = this;\r\n\r\n      var idToPointer = function (id) {\r\n        return {\r\n          __type: 'Pointer',\r\n          className: _this7._targetClassName,\r\n          objectId: id\r\n        };\r\n      };\r\n\r\n      var adds = null;\r\n      var removes = null;\r\n      var pointers = null;\r\n\r\n      if (this.relationsToAdd.length > 0) {\r\n        var _context10;\r\n\r\n        pointers = (0, _map.default)(_context10 = this.relationsToAdd).call(_context10, idToPointer);\r\n        adds = {\r\n          __op: 'AddRelation',\r\n          objects: pointers\r\n        };\r\n      }\r\n\r\n      if (this.relationsToRemove.length > 0) {\r\n        var _context11;\r\n\r\n        pointers = (0, _map.default)(_context11 = this.relationsToRemove).call(_context11, idToPointer);\r\n        removes = {\r\n          __op: 'RemoveRelation',\r\n          objects: pointers\r\n        };\r\n      }\r\n\r\n      if (adds && removes) {\r\n        return {\r\n          __op: 'Batch',\r\n          ops: [adds, removes]\r\n        };\r\n      }\r\n\r\n      return adds || removes || {};\r\n    }\r\n  }]);\r\n  return RelationOp;\r\n}(Op);\r\n\r\nexports.RelationOp = RelationOp;"],"mappings":"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"},"metadata":{},"sourceType":"script"}